{"version":3,"sources":["webpack://transdiscipline/./node_modules/dc/dist/dc.js"],"names":["_toConsumableArray","_get","_assertThisInitialized","_createClass","_classCallCheck","_inherits","_possibleConstructorReturn","_getPrototypeOf","_wrapNativeSuper","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","exports","d3TimeFormat","d3Time","d3Format","d3Selection","d3Dispatch","d3Array","d3Scale","d3Interpolate","d3ScaleChromatic","d3Axis","d3Zoom","d3Brush","d3Timer","d3Shape","d3Geo","d3Ease","d3Hierarchy","d3","d3Collection","version","BadArgumentException","_Error","_super","Error","constants","CHART_CLASS","DEBUG_GROUP_CLASS","STACK_CLASS","DESELECTED_CLASS","SELECTED_CLASS","NODE_INDEX_NAME","GROUP_INDEX_NAME","DEFAULT_CHART_GROUP","EVENT_DELAY","NEGLIGIBLE_NUMBER","Logger","enableDebugLog","_alreadyWarned","key","value","msg","console","warn","log","logger","debug","Config","_defaultColors","_schemeCategory20c","dateFormat","timeFormat","_renderlet","disableTransitions","colors","length","warnOnce","config","d3compat","eventHandler","handler","a","b","nester","_ref","sortKeys","sortValues","entries","pointer","chartRegistry","ChartRegistry","_chartMap","group","chart","indexOf","_initializeChartGroup","push","i","anchorName","splice","registerChart","register","deregisterChart","deregister","hasChart","has","deregisterAllCharts","clear","filterAll","charts","list","refocusAll","focus","renderAll","render","redrawAll","redraw","transition","selection","duration","delay","name","s","undefined","optionalTransition","enable","afterTransition","_transition","callback","empty","n","each","on","renderlet","_","instanceOfChart","o","Object","__dcFlag__","events","current","closure","setTimeout","filters","low","high","range","Array","isFiltered","filterType","filter","f","fromBottomLeft","Math","min","max","Infinity","x","y","path","slice","InvalidStateException","_Error2","_super2","pluck","d","utils","concat","Date","isFloat","printSingleValue","fformat","isInteger","round","format","_toTimeFunc","t","timeSecond","timeMinute","timeHour","timeDay","timeWeek","timeMonth","timeYear","add","l","r","replace","getTime","offset","percentage","subtract","isNumber","isNegligible","clamp","val","constant","_idCounter","findChild","children","nodeName","k","uniqueId","nameToId","toLowerCase","appendOrSelect","parent","selector","tag","element","select","append","safeNumber","arraysEqual","a1","a2","every","elem","allChildren","node","paths","toHierarchy","accessor","root","data","parts","currentNode","j","currentPath","childNode","getAncestors","unshift","arraysIdentical","printers","map","join","units","start","end","abs","fp","precision","_f","resolution","floor","ceil","_defaultFilterHandler","dimension","filterRange","filterFunction","filterExact","_defaultHasFilterHandler","some","_defaultRemoveFilterHandler","_defaultAddFilterHandler","_defaultResetFilterHandler","BaseMixin","_this","_svgDescription","_keyboardAccessible","_dimension","_group","_anchor","_root","_svg","_isChild","_minWidth","_defaultWidthCalc","width","getBoundingClientRect","_widthCalc","_minHeight","_defaultHeightCalc","height","_heightCalc","_width","_height","_useViewBoxResizing","_keyAccessor","_valueAccessor","_label","_ordering","_renderLabel","_title","keyAccessor","valueAccessor","_renderTitle","_controlsUseVisibility","_transitionDuration","_transitionDelay","_filterPrinter","_mandatoryAttributesList","_chartGroup","_listeners","dispatch","_legend","_commitHandler","_defaultData","all","_data","_filters","_filterHandler","_hasFilterHandler","_removeFilterHandler","_addFilterHandler","_resetFilterHandler","expireCache","_groupName","orderFunction","_this2","from","sort","ascending","sel","selectAll","chartGroup","anchor","classed","id","chartID","rootElement","svgElement","remove","generateSvg","attr","html","svgDescription","sizeSvg","description","filterPrinterFunction","attribute","controlsUseVisibility","style","text","_this3","forEach","checkForMandatoryAttributes","_doRender","_activateRenderlets","onClickFunction","_this4","_len","onClickArgs","_key","tabElements","event","keyCode","preventDefault","_this5","transitionDuration","transitionDelay","_doRedraw","_this6","error","_this7","fs","_filter","_this8","applyFilters","_invokeFilteredListener","hasFilter","turnOnControls","turnOffControls","datum","_this9","trigger","redrawGroup","labelFunction","enableLabels","titleFunction","opts","applyOptions","listener","renderletFunction","baseMixin","ColorMixin","Base","_Base","_class","_super3","_this10","_colors","scaleOrdinal","defaultColors","_colorAccessor","_colorCalculator","getColor","newDomain","colorAccessor","domain","colorScale","scaleQuantize","scaleLinear","interpolate","interpolateHcl","BubbleMixin","_ColorMixin","_class2","_super4","_this11","_maxBubbleRelativeSize","_minRadiusWithLabel","_sortBubbleSize","_elasticRadius","_excludeElasticZero","BUBBLE_NODE_CLASS","BUBBLE_CLASS","MIN_RADIUS","renderLabel","radiusAccessor","radiusValueAccessor","descending","_r","bubbleRadiusScale","rMin","rMax","_radiusValueAccessor","_rValueAccessor","values","_this12","isNaN","label","bubbleR","_shouldLabel","bubbleGEnter","_this13","onClick","_labelPointerEvent","_labelFunction","_labelOpacity","_this14","labels","title","g","_this15","renderTitle","_titleFunction","_this16","radius","relativeSize","excludeZero","isSelectedNode","highlightSelected","fadeDeselected","_chart","resetHighlight","_this17","CapMixin","_Base2","_class3","_super5","_this18","_cap","_takeFront","_othersLabel","_othersGrouper","topItems","restItems","restItemsSum","sum","restKeys","others","othersLabel","ordering","kv","_computeOrderedGroups","rest","items","count","grouperFunction","MarginMixin","_BaseMixin","_super6","_this19","_margin","top","right","bottom","left","_margins","margins","GRID_LINE_CLASS","HORIZONTAL_CLASS","VERTICAL_CLASS","Y_AXIS_LABEL_CLASS","X_AXIS_LABEL_CLASS","CUSTOM_BRUSH_HANDLE_CLASS","DEFAULT_AXIS_LABEL_PADDING","CoordinateGridMixin","_ColorMixin2","_super7","_this20","schemeCategory10","_mandatoryAttributes","_parent","_g","_chartBodyG","_x","_origX","_xOriginalDomain","_xAxis","_xUnits","integers","_xAxisPadding","_xAxisPaddingUnit","_xElasticity","_xAxisLabel","_xAxisLabelPadding","_lastXDomain","_y","_yAxis","_yAxisPadding","_yElasticity","_yAxisLabel","_yAxisLabelPadding","_brush","brushX","_gBrush","_brushOn","_parentBrushOn","_round","_ignoreBrushEvents","_renderHorizontalGridLine","_renderVerticalGridLine","_resizing","_unitCount","_zoomScale","_zoomOutRestrict","_zoom","zoom","evt","_onZoom","_nullZoom","_hasBeenMouseZoomable","_ignoreZoomEvents","_rangeChart","_focusChart","_mouseZoomable","_clipPadding","_fOuterRangeBandPadding","_fRangeBandPadding","_useRightYAxis","_useTopXAxis","focusChart","extent","svg","href","window","location","split","_getClipPathId","gElement","xScale","rescale","_createXAxis","_elasticX","padding","unit","isOrdinal","xUnits","ordinal","axisTop","axisBottom","bandwidth","scaleBand","elasticX","_ordinalXDomain","xAxisMin","xAxisMax","xdom","xAxisLength","paddingInner","paddingOuter","_useOuterPadding","scale","_renderVerticalGridLines","axisXG","_xAxisY","axisXLab","axisXLabY","xAxisLabel","_this21","gridLineG","insert","ticks","tickValues","tickArguments","lines","linesGEnter","enter","exit","effectiveWidth","labelText","axisRight","axisLeft","elasticY","_min","yAxisMin","_max","yAxisMax","rangeRound","yAxisHeight","_createYAxis","_renderHorizontalGridLinesForAxis","axisClass","rotation","labelXPosition","axisYLab","labelYPosition","axis","position","axisYG","axisPosition","_yAxisX","renderYAxisAt","labelPosition","renderYAxisLabel","yAxisLabel","useRightYAxis","yScale","_elasticY","_renderHorizontalGridLines","_renderVerticalGridLines2","_this22","m","_this23","_this24","_this25","effectiveHeight","redrawBrush","doTransition","_this26","_brushing","setBrushExtents","createBrushHandlePaths","gBrush","_this27","brushHandles","type","merge","resizeHandlePath","brushSelection","_this28","invert","extendBrush","rangedFilter","brushIsEmpty","RangedFilter","applyBrushSelection","replaceFilter","oldValue","_this29","_withoutBrushEvents","_this30","scaledSelection","move","fadeDeselectedArea","defs","chartBodyClip","resetSvg","_preprocessData","_generateG","_generateClipPath","_drawChart","_configureMouseZoom","_prepareXAxis","_prepareYAxis","plotData","renderXAxis","renderYAxis","renderBrush","resizing","copy","_enableMouseZoom","_disableMouseZoom","scaleExtent","zoomScaleMin","translateExtent","_updateD3zoomTransform","noRaiseEvents","domFilter","_this31","_hasRangeSelected","_invokeZoomedListener","origDomain","xt","zoomIdentity","translate","_this32","_withoutZoomEvents","transform","_domainToZoomTransform","rescaleX","ext","outerLimits","_checkExtents","_zoomHandler","c","_this33","xOriginalDomain","brushOn","d3Box","Number","whiskers","boxWhiskers","quartiles","boxQuartiles","tickFormat","renderDataPoints","dataRadius","dataOpacity","dataWidthPortion","showOutliers","boldOutlier","box","index","quartileData","whiskerIndices","whiskerData","_i","outlierIndices","pointIndices","x1","x0","__chart__","center","_box","medianLine","whisker","outlierClass","outlierSize","outlierX","random","outlier","point","boxTick","whiskerTick","timerFlush","quantile","StackMixin","_CoordinateGridMixin","_super8","_this34","_stackLayout","stack","_stack","_titles","_hidableStacks","_evadeDomainFilter","layers","_visibility","_prepareValues","v4data","v","col","layer","keys","stackLayout","series","ys","y0","y1","layerIdx","_this35","valAccessor","String","allValues","hidden","domainValues","_domainFilter","evadeDomainFilter","xDomain","p","stackName","_findLayerByName","_flattenStack","yAxisPadding","_ref2","xAxisPadding","xAxisPaddingUnit","titleAccessor","flat","_this36","color","isLegendableHidden","showStack","hideStack","renderGroup","MIN_BAR_WIDTH","DEFAULT_GAP_BETWEEN_BARS","LABEL_PADDING","BarChart","_StackMixin","_super9","_this37","_gap","_centerBar","_alwaysUseRounding","_barWidth","_outerRangeBandPadding","chartBodyG","_calculateBarWidth","last","size","_renderBars","_renderLabels","_barHeight","layerIndex","_this38","labelsEnterUpdate","_labelXPos","_labelYPos","_this39","bars","_barXPos","barsEnterUpdate","_makeKeyboardAccessible","numberOfBars","xUnitCount","barPadding","_this40","parentBrushOn","_barPadding","_rangeBandPadding","colorFilter","inv","match","barChart","defaultWhiskersIQR","q1","q3","iqr","BoxPlot","_CoordinateGridMixin2","_super10","_this41","_whiskerIqrFactor","_whiskersIqr","_whiskers","_tickFormat","_renderDataPoints","_dataOpacity","_dataWidthPortion","_showOutliers","_boldOutlier","_yRangePadding","_boxWidth","innerChartWidth","boxPadding","outerPadding","xOffset","_calculatedBoxWidth","boxesG","boxesGEnterUpdate","_renderBoxes","_updateBoxes","_removeBoxes","_this42","boxesGEnter","_boxTransform","_this43","_this44","_this45","_maxDataValue","_minDataValue","_yAxisRangeRatio","show","opacity","boxPlot","BubbleChart","_BubbleMixin","_super11","_this46","_bubbleX","_bubbleY","calculateRadiusDomain","maxBubbleRelativeSize","bubbleG","sortBubbleSize","keyboardAccessible","order","_removeNodes","_renderNodes","_updateNodes","_this47","_bubbleLocator","_doRenderLabel","_doRenderTitles","_this48","doUpdateLabels","doUpdateTitles","isFinite","bubbleChart","BUBBLE_OVERLAY_CLASS","BubbleOverlay","_BubbleMixin2","_super12","_this49","_points","_initOverlayG","_initializeBubbles","_this50","_mapData","nodeG","_getNodeG","circle","_this51","bubbleNodeClass","_updateBubbles","_this52","flag","debugG","debugText","bubbleOverlay","GROUP_CSS_CLASS","ITEM_CSS_CLASS","CboxMenu","_BaseMixin2","_super13","_this53","_cbox","_promptText","_multiple","_inputType","_promptValue","_uniqueId","_filterDisplayed","_order","_this54","_renderOptions","property","_this55","options","_onChange","li","target","checked","nodes","option","onChange","_this56","cboxMenu","SUB_CHART_CLASS","DEFAULT_RIGHT_Y_AXIS_LABEL_PADDING","CompositeChart","_CoordinateGridMixin3","_super14","_this57","_children","_childOptions","_shareColors","_shareTitle","_alignYAxes","_rightYAxis","_rightYAxisLabel","_rightYAxisLabelPadding","_rightY","_rightAxisGridLines","child","_generateChildG","_resizing2","_leftYAxisChildren","_rightYAxisChildren","ranges","_calculateYAxisRanges","_prepareLeftYAxis","_prepareRightYAxis","yAxis","rightYAxis","rightYAxisLabel","lyAxisMin","lyAxisMax","ryAxisMin","ryAxisMax","_yAxisMin","_yAxisMax","_rightYAxisMin","_rightYAxisMax","alignYAxes","_alignYAxisRanges","extentRatio","needDomain","rightY","needRange","xAxis","_useRightAxisGridLines","_this58","subChartArray","_this59","prop","_height2","_setChildrenProperty","_width2","_margins2","_getYAxisMin","_getYAxisMax","_getAllXAxisMinFromChildCharts","_getAllXAxisMaxFromChildCharts","_this60","reduce","legendables","legendHighlight","legendReset","compositeChart","DataCount","_BaseMixin3","_super15","_this61","_formatNumber","_crossfilter","_groupAll","_html","formatter","tot","crossfilter","groupAll","selected","cf","dataCount","LABEL_CSS_CLASS","ITEM_CSS_CLASS$1","SECTION_CSS_CLASS","GRID_CSS_CLASS","DataGrid","_BaseMixin4","_super16","_this62","_section","_size","JSON","stringify","_sortBy","_beginSlice","_endSlice","_htmlSection","_renderItems","_renderSections","_this63","sections","_nestEntries","itemSection","_this64","section","_this65","htmlSection","sortByFunction","_order2","dataGrid","LABEL_CSS_CLASS$1","ROW_CSS_CLASS","COLUMN_CSS_CLASS","SECTION_CSS_CLASS$1","HEAD_CSS_CLASS","DataTable","_BaseMixin5","_super17","_this66","_columns","_showSections","_renderRows","_doColumnHeaderFnToString","_doColumnHeaderCapitalize","charAt","toUpperCase","i1","i2","lastIndexOf","substring","_this67","bAllFunctions","thead","headrow","headcols","_doColumnHeaderFormat","rowSection","_this68","_this69","rows","rowEnter","_doColumnValueFormat","_section2","_size2","_beginSlice2","_endSlice2","_order3","showSections","dataTable","GeoChoroplethChart","_ColorMixin3","_super18","_this70","_geoPath","geoPath","_projectionFlag","_projection","_geoJsons","regionG","_geoJson","_getGeoPath","_plotData","_generateLayeredData","_isDataLayer","_renderRegionG","_renderPaths","_renderTitles","_this71","_layerSelector","_isSelected","_isDeselected","layerNameClass","regionClass","baseClasses","_getKey","_this72","currentFill","_this73","selectedRegion","_this74","json","projection","geoAlbersUsa","geoJsons","geoChoroplethChart","DEFAULT_BORDER_RADIUS","HeatMap","_ColorMixin4","_super19","_this75","_chartBody","_cols","_rows","_colOrdering","_rowOrdering","_colScale","_rowScale","_xBorderRadius","_yBorderRadius","_colsLabel","_rowsLabel","_xAxisOnClick","_filterAxis","_yAxisOnClick","_boxOnClick","TwoDimensionalFilter","_this76","cellsOnAxis","unfilteredCellsOnAxis","filtersList","_filter2","_this77","nonstandardFilter","isArray","_this78","cols","rowCount","colCount","boxWidth","boxHeight","boxes","gEnter","boxOnClick","gCols","gColsText","xAxisOnClick","colsLabel","gRows","gRowsText","yAxisOnClick","rowsLabel","_chart2","heatMap","HtmlLegend","_htmlLegendDivCssClass","_legendItemCssClassHorizontal","_legendItemCssClassVertical","_container","_legendText","_maxItems","_horizontal","_legendItemClass","_highlightSelected","_this79","_defaultLegendItemCssClass","container","legendItemClassName","itemEnter","legendToggle","_makeLegendKeyboardAccessible","_keyboardAccessible2","_this80","htmlLegend","LABEL_GAP","Legend","_itemHeight","_legendWidth","_itemWidth","_autoItemWidth","_gap2","_highlightSelected2","_horizontal2","_legendText2","_maxItems2","_keyboardAccessible3","_this81","_this82","_self","clientHeight","cumulativeLegendTextWidth","row","_self2","itemWidth","getBBox","translateBy","_legendItemHeight","legend","DEFAULT_DOT_RADIUS","TOOLTIP_G_CLASS","DOT_CIRCLE_CLASS","Y_AXIS_REF_LINE_CLASS","X_AXIS_REF_LINE_CLASS","DEFAULT_DOT_OPACITY","LABEL_PADDING$1","LineChart","_StackMixin2","_super20","_this83","_renderArea","_dotRadius","_dataPointRadius","_dataPointFillOpacity","_dataPointStrokeOpacity","_curve","_interpolate","_tension","_defined","_dashStyle","_xyTipsOn","chartBody","layersList","layersEnter","_drawLine","_drawArea","_drawDots","_drawLabels","_interpolate2","curve","curveLinear","curveLinearClosed","curveStep","curveStepBefore","curveStepAfter","curveBasis","curveBasisOpen","curveBasisClosed","curveBundle","curveCardinal","curveCardinalOpen","curveCardinalClosed","curveMonotoneX","tension","_this84","_line","line","_getCurveFactory","defined","_getColor","_safeD","_this85","_area","area","_this86","xyTipsOn","tooltipListClass","tooltips","points","_createRefLines","dots","dotsEnterModify","_getDotRadius","dot","_showDot","_showRefLines","_hideDot","_hideRefLines","_doRenderTitle","labelsEnterModify","yAxisX","yAxisRefPathD","xAxisRefPathD","fillOpacity","strokeOpacity","dashstyle","item","_colorFilter","_this87","lineChart","SPAN_CLASS","NumberDisplay","_BaseMixin6","_super21","_this88","one","none","_lastValue","_ariaLiveRegion","valObj","_maxBin","_html2","sorted","newValue","span","ease","easeQuad","tween","interpStart","interp","interpolateNumber","num","formatNumber","innerHTML","numberDisplay","DEFAULT_MIN_ANGLE_FOR_LABEL","PieChart","_CapMixin","_super22","_this89","_sliceCssClass","_labelCssClass","_sliceGroupCssClass","_labelGroupCssClass","_emptyCssClass","_emptyTitle","_radius","_givenRadius","_innerRadius","_externalRadiusPadding","_cx","_cy","_minAngleForLabel","_externalLabelRadius","_drawPaths","cappedKeyAccessor","cappedValueAccessor","cap","cx","cy","_this90","maxRadius","pieData","arcs","_buildArcs","pieLayout","_pieLayout","slices","_removeElements","_createElements","_updateElements","_highlightFilter","slicesEnter","_createSliceNodes","_createSlicePath","_createTitles","_createLabels","_this91","_this92","slicePath","_fill","_onClick","_safeArc","tranNodes","attrTween","_tweenPie","_this93","_this94","_sliceHasNoData","_sliceTooSmall","_isSelectedSlice","_this95","_applyLabelText","_labelPosition","whether","_this96","labelsEnter","classes","_highlightSlice","_positionLabels","_updateLabelPaths","_this97","polyline","arc2","arc","outerRadius","innerRadius","_current","startAngle","endAngle","d2","centroid","_updateSlicePaths","_updateLabels","_updateTitles","_this98","slicePaths","_this99","_this100","pie","angle","_arc","externalLabelRadius","_this101","legendable","_highlightSliceFromLegendable","highlighted","_this102","_isOffCanvas","pieChart","RowChart","_CapMixin2","_super23","_this103","_labelOffsetX","_labelOffsetY","_hasLabelOffsetY","_dyOffset","_titleLabelOffsetX","_fixedBarHeight","_rowCssClass","_titleRowCssClass","_renderTitleLabel","_rowData","rowsCap","_this104","_extent","axisG","_calculateAxisScale","_this105","_drawAxis","_drawGridLines","_this106","_this107","rect","_isSelectedRow","_rootValue","_translateX","_this108","renderTitleLabel","_this109","lab","titlelab","_xAxis2","_gap3","_elasticX2","labelOffsety","rowChart","ScatterPlot","_CoordinateGridMixin4","_super24","_this110","_symbol","symbol","_existenceAccessor","originalKeyAccessor","existenceAccessor","_highlightedSize","_symbolSize","_excludedSize","_excludedColor","_excludedOpacity","_emptySize","_emptyOpacity","_nonemptyOpacity","_emptyColor","_filtered","_canvas","_context","_useCanvas","brush","_elementSize","sqrt","PI","pow","_filter3","RangedTwoDimensionalFilter","svgSel","svgLeft","parseInt","svgTop","devicePixelRatio","getContext","clip","imageSmoothingQuality","canvasElement","legendHighlightDatum","_this111","_resizeCanvas","context","clearRect","canvas","cOpacity","excludedOpacity","cColor","excludedColor","cSize","_canvasElementSize","isHighlighted","save","globalAlpha","beginPath","fillStyle","fill","restore","_this112","symbols","_locator","_plotOnCanvas","_plotOnSVG","_d","_this113","_customSymbol","_this114","emptySize","_resizeSymbolsWhere","condition","oldSize","_this115","coord","ranged2DFilter","_this116","scatterPlot","SELECT_CSS_CLASS","OPTION_CSS_CLASS","SelectMenu","_BaseMixin7","_super25","_this117","_select","_numberVisible","_this118","_setAttributes","_this119","selectedOptions","_this120","_order4","_promptText2","_filterDisplayed2","_multiple2","_promptValue2","numberVisible","selectMenu","SeriesChart","_CompositeChart","_super26","_this121","_keySort","_charts","_chartFunction","_seriesAccessor","_seriesSort","_valueSort","shareColors","childrenChanged","_this122","keep","sub","subChart","_clearChart","_compose","bind","chartFunction","_resetChildren","sortFunction","seriesChart","DEFAULT_MIN_ANGLE_FOR_LABEL$1","SunburstChart","_ColorMixin5","_super27","_this123","_ringSizes","_extendedValueAccessor","ringIndex","customRelativeRadius","ringSizes","relativeRingSizes","scaleFactor","standardRadius","rootOffset","partitionedNodes","cdata","_partitionNodes","shift","sunburstData","_this124","depth","_this125","_tweenSlice","_this126","_this127","_this128","_this129","_this130","_innerRadius2","_radius2","_cx2","_cy2","_minAngleForLabel2","_this131","partitionDy","scaleInnerRadius","scaleOuterRadius","relativeRingSizesFunction","ringCount","_relativeRingSizesFunction","_this132","assertPortionsArray","relativeSizes","numberOfRings","portionsSum","_scaleRadius","defaultRingSizes","_this133","_isPathFiltered","pathFilter","HierarchyFilter","currentFilter","_this134","getSortable","_hierarchy","hierarchy","partition","_partition","descendants","_this135","_filtersForPath","exactMatch","_this136","_this137","tweenTarget","assign","sunburstChart","INPUT_CSS_CLASS","TextFilterWidget","_BaseMixin8","_super28","_this138","_normalize","_filterFunctionFactory","query","_placeHolder","_input","textFilterWidget","callHandler","that","_ref3","nest","mouse","_ref4","out","groups","defineProperty","factory"],"mappings":"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","file":"cfc251a4-f86f820ac13aa2487f54.js","sourcesContent":["var _toConsumableArray = require(\"E:/profKhan/transdiscipline/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _get = require(\"E:/profKhan/transdiscipline/node_modules/@babel/runtime/helpers/get\");\n\nvar _assertThisInitialized = require(\"E:/profKhan/transdiscipline/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _createClass = require(\"E:/profKhan/transdiscipline/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _classCallCheck = require(\"E:/profKhan/transdiscipline/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _inherits = require(\"E:/profKhan/transdiscipline/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"E:/profKhan/transdiscipline/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"E:/profKhan/transdiscipline/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _wrapNativeSuper = require(\"E:/profKhan/transdiscipline/node_modules/@babel/runtime/helpers/wrapNativeSuper\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*!\n *  dc 4.2.7\n *  http://dc-js.github.io/dc.js/\n *  Copyright 2012-2021 Nick Zhu & the dc.js Developers\n *  https://github.com/dc-js/dc.js/blob/master/AUTHORS\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3'), require('d3'), require('d3'), require('d3'), require('d3'), require('d3'), require('d3'), require('d3'), require('d3'), require('d3'), require('d3'), require('d3'), require('d3'), require('d3'), require('d3'), require('d3'), require('d3'), require('d3'), require('d3')) : typeof define === 'function' && define.amd ? define(['exports', 'd3', 'd3', 'd3', 'd3', 'd3', 'd3', 'd3', 'd3', 'd3', 'd3', 'd3', 'd3', 'd3', 'd3', 'd3', 'd3', 'd3', 'd3', 'd3'], factory) : (global = global || self, factory(global.dc = {}, global.d3, global.d3, global.d3, global.d3, global.d3, global.d3, global.d3, global.d3, global.d3, global.d3, global.d3, global.d3, global.d3, global.d3, global.d3, global.d3, global.d3, global.d3, global.d3));\n})(this, function (exports, d3TimeFormat, d3Time, d3Format, d3Selection, d3Dispatch, d3Array, d3Scale, d3Interpolate, d3ScaleChromatic, d3Axis, d3Zoom, d3Brush, d3Timer, d3Shape, d3Geo, d3Ease, d3Hierarchy, d3, d3Collection) {\n  'use strict';\n\n  var version = \"4.2.7\";\n\n  var BadArgumentException = /*#__PURE__*/function (_Error) {\n    _inherits(BadArgumentException, _Error);\n\n    var _super = _createSuper(BadArgumentException);\n\n    function BadArgumentException() {\n      _classCallCheck(this, BadArgumentException);\n\n      return _super.apply(this, arguments);\n    }\n\n    return BadArgumentException;\n  }( /*#__PURE__*/_wrapNativeSuper(Error));\n\n  var constants = {\n    CHART_CLASS: 'dc-chart',\n    DEBUG_GROUP_CLASS: 'debug',\n    STACK_CLASS: 'stack',\n    DESELECTED_CLASS: 'deselected',\n    SELECTED_CLASS: 'selected',\n    NODE_INDEX_NAME: '__index__',\n    GROUP_INDEX_NAME: '__group_index__',\n    DEFAULT_CHART_GROUP: '__default_chart_group__',\n    EVENT_DELAY: 40,\n    NEGLIGIBLE_NUMBER: 1e-10\n  };\n  /**\n   * Provides basis logging and deprecation utilities\n   */\n\n  var Logger = /*#__PURE__*/function () {\n    function Logger() {\n      _classCallCheck(this, Logger);\n\n      /**\n       * Enable debug level logging. Set to `false` by default.\n       * @name enableDebugLog\n       * @memberof Logger\n       * @instance\n       */\n      this.enableDebugLog = false;\n      this._alreadyWarned = {};\n    }\n    /**\n     * Put a warning message to console\n     * @example\n     * logger.warn('Invalid use of .tension on CurveLinear');\n     * @param {String} [msg]\n     * @returns {Logger}\n     */\n\n\n    _createClass(Logger, [{\n      key: \"warn\",\n      value: function warn(msg) {\n        if (console) {\n          if (console.warn) {\n            console.warn(msg);\n          } else if (console.log) {\n            console.log(msg);\n          }\n        }\n\n        return this;\n      }\n      /**\n       * Put a warning message to console. It will warn only on unique messages.\n       * @example\n       * logger.warnOnce('Invalid use of .tension on CurveLinear');\n       * @param {String} [msg]\n       * @returns {Logger}\n       */\n\n    }, {\n      key: \"warnOnce\",\n      value: function warnOnce(msg) {\n        if (!this._alreadyWarned[msg]) {\n          this._alreadyWarned[msg] = true;\n          logger.warn(msg);\n        }\n\n        return this;\n      }\n      /**\n       * Put a debug message to console. It is controlled by `logger.enableDebugLog`\n       * @example\n       * logger.debug('Total number of slices: ' + numSlices);\n       * @param {String} [msg]\n       * @returns {Logger}\n       */\n\n    }, {\n      key: \"debug\",\n      value: function debug(msg) {\n        if (this.enableDebugLog && console) {\n          if (console.debug) {\n            console.debug(msg);\n          } else if (console.log) {\n            console.log(msg);\n          }\n        }\n\n        return this;\n      }\n    }]);\n\n    return Logger;\n  }();\n\n  var logger = new Logger();\n  /**\n   * General configuration\n   */\n\n  var Config = /*#__PURE__*/function () {\n    function Config() {\n      _classCallCheck(this, Config);\n\n      this._defaultColors = Config._schemeCategory20c;\n      /**\n       * The default date format for dc.js\n       * @type {Function}\n       * @default d3.timeFormat('%m/%d/%Y')\n       */\n\n      this.dateFormat = d3TimeFormat.timeFormat('%m/%d/%Y');\n      this._renderlet = null;\n      /**\n       * If this boolean is set truthy, all transitions will be disabled, and changes to the charts will happen\n       * immediately.\n       * @type {Boolean}\n       * @default false\n       */\n\n      this.disableTransitions = false;\n    }\n    /**\n     * Set the default color scheme for ordinal charts. Changing it will impact all ordinal charts.\n     *\n     * By default it is set to a copy of\n     * `d3.schemeCategory20c` for backward compatibility. This color scheme has been\n     * [removed from D3v5](https://github.com/d3/d3/blob/master/CHANGES.md#changes-in-d3-50).\n     * In DC 3.1 release it will change to a more appropriate default.\n     *\n     * @example\n     * config.defaultColors(d3.schemeSet1)\n     * @param {Array} [colors]\n     * @returns {Array|config}\n     */\n\n\n    _createClass(Config, [{\n      key: \"defaultColors\",\n      value: function defaultColors(colors) {\n        if (!arguments.length) {\n          // Issue warning if it uses _schemeCategory20c\n          if (this._defaultColors === Config._schemeCategory20c) {\n            logger.warnOnce('You are using d3.schemeCategory20c, which has been removed in D3v5. ' + 'See the explanation at https://github.com/d3/d3/blob/master/CHANGES.md#changes-in-d3-50. ' + 'DC is using it for backward compatibility, however it will be changed in DCv3.1. ' + 'You can change it by calling dc.config.defaultColors(newScheme). ' + 'See https://github.com/d3/d3-scale-chromatic for some alternatives.');\n          }\n\n          return this._defaultColors;\n        }\n\n        this._defaultColors = colors;\n        return this;\n      }\n    }]);\n\n    return Config;\n  }(); // D3v5 has removed schemeCategory20c, copied here for backward compatibility\n\n\n  Config._schemeCategory20c = ['#3182bd', '#6baed6', '#9ecae1', '#c6dbef', '#e6550d', '#fd8d3c', '#fdae6b', '#fdd0a2', '#31a354', '#74c476', '#a1d99b', '#c7e9c0', '#756bb1', '#9e9ac8', '#bcbddc', '#dadaeb', '#636363', '#969696', '#bdbdbd', '#d9d9d9'];\n  /**\n   * General configuration object; see {@link Config} for members.\n   */\n\n  var config = new Config();\n  /**\n   * d3.js compatiblity layer\n   */\n\n  var d3compat = {\n    eventHandler: function eventHandler(handler) {\n      return function eventHandler(a, b) {\n        console.warn('No d3.js compatbility event handler registered, defaulting to v6 behavior.');\n        handler.call(this, b, a);\n      };\n    },\n    nester: function nester(_ref) {\n      var key = _ref.key,\n          sortKeys = _ref.sortKeys,\n          sortValues = _ref.sortValues,\n          entries = _ref.entries;\n      throw new Error('No d3.js compatbility nester registered, load v5 or v6 compability layer.');\n    },\n    pointer: function pointer() {\n      throw new Error('No d3.js compatbility pointer registered, load v5 or v6 compability layer.');\n    }\n  };\n  /**\n   * The ChartRegistry maintains sets of all instantiated dc.js charts under named groups\n   * and the default group. There is a single global ChartRegistry object named `chartRegistry`\n   *\n   * A chart group often corresponds to a crossfilter instance. It specifies\n   * the set of charts which should be updated when a filter changes on one of the charts or when the\n   * global functions {@link filterAll filterAll}, {@link refocusAll refocusAll},\n   * {@link renderAll renderAll}, {@link redrawAll redrawAll}, or chart functions\n   * {@link baseMixin#renderGroup baseMixin.renderGroup},\n   * {@link baseMixin#redrawGroup baseMixin.redrawGroup} are called.\n   */\n\n  var ChartRegistry = /*#__PURE__*/function () {\n    function ChartRegistry() {\n      _classCallCheck(this, ChartRegistry);\n\n      // chartGroup:string => charts:array\n      this._chartMap = {};\n    }\n\n    _createClass(ChartRegistry, [{\n      key: \"_initializeChartGroup\",\n      value: function _initializeChartGroup(group) {\n        if (!group) {\n          group = constants.DEFAULT_CHART_GROUP;\n        }\n\n        if (!this._chartMap[group]) {\n          this._chartMap[group] = [];\n        }\n\n        return group;\n      }\n      /**\n       * Determine if a given chart instance resides in any group in the registry.\n       * @param {Object} chart dc.js chart instance\n       * @returns {Boolean}\n       */\n\n    }, {\n      key: \"has\",\n      value: function has(chart) {\n        for (var e in this._chartMap) {\n          if (this._chartMap[e].indexOf(chart) >= 0) {\n            return true;\n          }\n        }\n\n        return false;\n      }\n      /**\n       * Add given chart instance to the given group, creating the group if necessary.\n       * If no group is provided, the default group `constants.DEFAULT_CHART_GROUP` will be used.\n       * @param {Object} chart dc.js chart instance\n       * @param {String} [group] Group name\n       * @return {undefined}\n       */\n\n    }, {\n      key: \"register\",\n      value: function register(chart, group) {\n        var _chartMap = this._chartMap;\n        group = this._initializeChartGroup(group);\n\n        _chartMap[group].push(chart);\n      }\n      /**\n       * Remove given chart instance from the given group, creating the group if necessary.\n       * If no group is provided, the default group `constants.DEFAULT_CHART_GROUP` will be used.\n       * @param {Object} chart dc.js chart instance\n       * @param {String} [group] Group name\n       * @return {undefined}\n       */\n\n    }, {\n      key: \"deregister\",\n      value: function deregister(chart, group) {\n        group = this._initializeChartGroup(group);\n\n        for (var i = 0; i < this._chartMap[group].length; i++) {\n          if (this._chartMap[group][i].anchorName() === chart.anchorName()) {\n            this._chartMap[group].splice(i, 1);\n\n            break;\n          }\n        }\n      }\n      /**\n       * Clear given group if one is provided, otherwise clears all groups.\n       * @param {String} group Group name\n       * @return {undefined}\n       */\n\n    }, {\n      key: \"clear\",\n      value: function clear(group) {\n        if (group) {\n          delete this._chartMap[group];\n        } else {\n          this._chartMap = {};\n        }\n      }\n      /**\n       * Get an array of each chart instance in the given group.\n       * If no group is provided, the charts in the default group are returned.\n       * @param {String} [group] Group name\n       * @returns {Array<Object>}\n       */\n\n    }, {\n      key: \"list\",\n      value: function list(group) {\n        group = this._initializeChartGroup(group);\n        return this._chartMap[group];\n      }\n    }]);\n\n    return ChartRegistry;\n  }();\n  /**\n   * The chartRegistry object maintains sets of all instantiated dc.js charts under named groups\n   * and the default group. See {@link ChartRegistry ChartRegistry} for its methods.\n   */\n\n\n  var chartRegistry = new ChartRegistry();\n  /**\n   * Add given chart instance to the given group, creating the group if necessary.\n   * If no group is provided, the default group `constants.DEFAULT_CHART_GROUP` will be used.\n   * @function registerChart\n   * @param {Object} chart dc.js chart instance\n   * @param {String} [group] Group name\n   * @return {undefined}\n   */\n\n  var registerChart = function registerChart(chart, group) {\n    chartRegistry.register(chart, group);\n  };\n  /**\n   * Remove given chart instance from the given group, creating the group if necessary.\n   * If no group is provided, the default group `constants.DEFAULT_CHART_GROUP` will be used.\n   * @function deregisterChart\n   * @param {Object} chart dc.js chart instance\n   * @param {String} [group] Group name\n   * @return {undefined}\n   */\n\n\n  var deregisterChart = function deregisterChart(chart, group) {\n    chartRegistry.deregister(chart, group);\n  };\n  /**\n   * Determine if a given chart instance resides in any group in the registry.\n   * @function hasChart\n   * @param {Object} chart dc.js chart instance\n   * @returns {Boolean}\n   */\n\n\n  var hasChart = function hasChart(chart) {\n    return chartRegistry.has(chart);\n  };\n  /**\n   * Clear given group if one is provided, otherwise clears all groups.\n   * @function deregisterAllCharts\n   * @param {String} group Group name\n   * @return {undefined}\n   */\n\n\n  var deregisterAllCharts = function deregisterAllCharts(group) {\n    chartRegistry.clear(group);\n  };\n  /**\n   * Clear all filters on all charts within the given chart group. If the chart group is not given then\n   * only charts that belong to the default chart group will be reset.\n   * @function filterAll\n   * @param {String} [group]\n   * @return {undefined}\n   */\n\n\n  var filterAll = function filterAll(group) {\n    var charts = chartRegistry.list(group);\n\n    for (var i = 0; i < charts.length; ++i) {\n      charts[i].filterAll();\n    }\n  };\n  /**\n   * Reset zoom level / focus on all charts that belong to the given chart group. If the chart group is\n   * not given then only charts that belong to the default chart group will be reset.\n   * @function refocusAll\n   * @param {String} [group]\n   * @return {undefined}\n   */\n\n\n  var refocusAll = function refocusAll(group) {\n    var charts = chartRegistry.list(group);\n\n    for (var i = 0; i < charts.length; ++i) {\n      if (charts[i].focus) {\n        charts[i].focus();\n      }\n    }\n  };\n  /**\n   * Re-render all charts belong to the given chart group. If the chart group is not given then only\n   * charts that belong to the default chart group will be re-rendered.\n   * @function renderAll\n   * @param {String} [group]\n   * @return {undefined}\n   */\n\n\n  var renderAll = function renderAll(group) {\n    var charts = chartRegistry.list(group);\n\n    for (var i = 0; i < charts.length; ++i) {\n      charts[i].render();\n    }\n\n    if (config._renderlet !== null) {\n      config._renderlet(group);\n    }\n  };\n  /**\n   * Redraw all charts belong to the given chart group. If the chart group is not given then only charts\n   * that belong to the default chart group will be re-drawn. Redraw is different from re-render since\n   * when redrawing dc tries to update the graphic incrementally, using transitions, instead of starting\n   * from scratch.\n   * @function redrawAll\n   * @param {String} [group]\n   * @return {undefined}\n   */\n\n\n  var redrawAll = function redrawAll(group) {\n    var charts = chartRegistry.list(group);\n\n    for (var i = 0; i < charts.length; ++i) {\n      charts[i].redraw();\n    }\n\n    if (config._renderlet !== null) {\n      config._renderlet(group);\n    }\n  };\n  /**\n   * Start a transition on a selection if transitions are globally enabled\n   * ({@link disableTransitions} is false) and the duration is greater than zero; otherwise return\n   * the selection. Since most operations are the same on a d3 selection and a d3 transition, this\n   * allows a common code path for both cases.\n   * @function transition\n   * @param {d3.selection} selection - the selection to be transitioned\n   * @param {Number|Function} [duration=250] - the duration of the transition in milliseconds, a\n   * function returning the duration, or 0 for no transition\n   * @param {Number|Function} [delay] - the delay of the transition in milliseconds, or a function\n   * returning the delay, or 0 for no delay\n   * @param {String} [name] - the name of the transition (if concurrent transitions on the same\n   * elements are needed)\n   * @returns {d3.transition|d3.selection}\n   */\n\n\n  var transition = function transition(selection, duration, delay, name) {\n    if (config.disableTransitions || duration <= 0) {\n      return selection;\n    }\n\n    var s = selection.transition(name);\n\n    if (duration >= 0 || duration !== undefined) {\n      s = s.duration(duration);\n    }\n\n    if (delay >= 0 || delay !== undefined) {\n      s = s.delay(delay);\n    }\n\n    return s;\n  };\n  /* somewhat silly, but to avoid duplicating logic */\n\n\n  var optionalTransition = function optionalTransition(enable, duration, delay, name) {\n    if (enable) {\n      return function (selection) {\n        return transition(selection, duration, delay, name);\n      };\n    } else {\n      return function (selection) {\n        return selection;\n      };\n    }\n  }; // See http://stackoverflow.com/a/20773846\n\n\n  var afterTransition = function afterTransition(_transition, callback) {\n    if (_transition.empty() || !_transition.duration) {\n      callback.call(_transition);\n    } else {\n      var n = 0;\n\n      _transition.each(function () {\n        ++n;\n      }).on('end', function () {\n        if (! --n) {\n          callback.call(_transition);\n        }\n      });\n    }\n  };\n\n  var renderlet = function renderlet(_) {\n    if (!arguments.length) {\n      return config._renderlet;\n    }\n\n    config._renderlet = _;\n    return null;\n  };\n\n  var instanceOfChart = function instanceOfChart(o) {\n    return o instanceof Object && o.__dcFlag__ && true;\n  };\n\n  var events = {\n    current: null\n  };\n  /**\n   * This function triggers a throttled event function with a specified delay (in milli-seconds).  Events\n   * that are triggered repetitively due to user interaction such brush dragging might flood the library\n   * and invoke more renders than can be executed in time. Using this function to wrap your event\n   * function allows the library to smooth out the rendering by throttling events and only responding to\n   * the most recent event.\n   * @name events.trigger\n   * @example\n   * chart.on('renderlet', function(chart) {\n   *     // smooth the rendering through event throttling\n   *     events.trigger(function(){\n   *         // focus some other chart to the range selected by user on this chart\n   *         someOtherChart.focus(chart.filter());\n   *     });\n   * })\n   * @param {Function} closure\n   * @param {Number} [delay]\n   * @return {undefined}\n   */\n\n  events.trigger = function (closure, delay) {\n    if (!delay) {\n      closure();\n      return;\n    }\n\n    events.current = closure;\n    setTimeout(function () {\n      if (closure === events.current) {\n        closure();\n      }\n    }, delay);\n  };\n  /**\n   * The dc.js filters are functions which are passed into crossfilter to chose which records will be\n   * accumulated to produce values for the charts.  In the crossfilter model, any filters applied on one\n   * dimension will affect all the other dimensions but not that one.  dc always applies a filter\n   * function to the dimension; the function combines multiple filters and if any of them accept a\n   * record, it is filtered in.\n   *\n   * These filter constructors are used as appropriate by the various charts to implement brushing.  We\n   * mention below which chart uses which filter.  In some cases, many instances of a filter will be added.\n   *\n   * Each of the dc.js filters is an object with the following properties:\n   * * `isFiltered` - a function that returns true if a value is within the filter\n   * * `filterType` - a string identifying the filter, here the name of the constructor\n   *\n   * Currently these filter objects are also arrays, but this is not a requirement. Custom filters\n   * can be used as long as they have the properties above.\n   * @namespace filters\n   * @type {{}}\n   */\n\n\n  var filters = {};\n  /**\n   * RangedFilter is a filter which accepts keys between `low` and `high`.  It is used to implement X\n   * axis brushing for the {@link CoordinateGridMixin coordinate grid charts}.\n   *\n   * Its `filterType` is 'RangedFilter'\n   * @name RangedFilter\n   * @memberof filters\n   * @param {Number} low\n   * @param {Number} high\n   * @returns {Array<Number>}\n   * @constructor\n   */\n\n  filters.RangedFilter = function (low, high) {\n    var range = new Array(low, high);\n\n    range.isFiltered = function (value) {\n      return value >= this[0] && value < this[1];\n    };\n\n    range.filterType = 'RangedFilter';\n    return range;\n  };\n  /**\n   * TwoDimensionalFilter is a filter which accepts a single two-dimensional value.  It is used by the\n   * {@link HeatMap heat map chart} to include particular cells as they are clicked.  (Rows and columns are\n   * filtered by filtering all the cells in the row or column.)\n   *\n   * Its `filterType` is 'TwoDimensionalFilter'\n   * @name TwoDimensionalFilter\n   * @memberof filters\n   * @param {Array<Number>} filter\n   * @returns {Array<Number>}\n   * @constructor\n   */\n\n\n  filters.TwoDimensionalFilter = function (filter) {\n    if (filter === null) {\n      return null;\n    }\n\n    var f = filter;\n\n    f.isFiltered = function (value) {\n      return value.length && value.length === f.length && value[0] === f[0] && value[1] === f[1];\n    };\n\n    f.filterType = 'TwoDimensionalFilter';\n    return f;\n  };\n  /**\n   * The RangedTwoDimensionalFilter allows filtering all values which fit within a rectangular\n   * region. It is used by the {@link ScatterPlot scatter plot} to implement rectangular brushing.\n   *\n   * It takes two two-dimensional points in the form `[[x1,y1],[x2,y2]]`, and normalizes them so that\n   * `x1 <= x2` and `y1 <= y2`. It then returns a filter which accepts any points which are in the\n   * rectangular range including the lower values but excluding the higher values.\n   *\n   * If an array of two values are given to the RangedTwoDimensionalFilter, it interprets the values as\n   * two x coordinates `x1` and `x2` and returns a filter which accepts any points for which `x1 <= x <\n   * x2`.\n   *\n   * Its `filterType` is 'RangedTwoDimensionalFilter'\n   * @name RangedTwoDimensionalFilter\n   * @memberof filters\n   * @param {Array<Array<Number>>} filter\n   * @returns {Array<Array<Number>>}\n   * @constructor\n   */\n\n\n  filters.RangedTwoDimensionalFilter = function (filter) {\n    if (filter === null) {\n      return null;\n    }\n\n    var f = filter;\n    var fromBottomLeft;\n\n    if (f[0] instanceof Array) {\n      fromBottomLeft = [[Math.min(filter[0][0], filter[1][0]), Math.min(filter[0][1], filter[1][1])], [Math.max(filter[0][0], filter[1][0]), Math.max(filter[0][1], filter[1][1])]];\n    } else {\n      fromBottomLeft = [[filter[0], -Infinity], [filter[1], Infinity]];\n    }\n\n    f.isFiltered = function (value) {\n      var x, y;\n\n      if (value instanceof Array) {\n        x = value[0];\n        y = value[1];\n      } else {\n        x = value;\n        y = fromBottomLeft[0][1];\n      }\n\n      return x >= fromBottomLeft[0][0] && x < fromBottomLeft[1][0] && y >= fromBottomLeft[0][1] && y < fromBottomLeft[1][1];\n    };\n\n    f.filterType = 'RangedTwoDimensionalFilter';\n    return f;\n  }; // ******** Sunburst Chart ********\n\n  /**\n   * HierarchyFilter is a filter which accepts a key path as an array. It matches any node at, or\n   * child of, the given path. It is used by the {@link SunburstChart sunburst chart} to include particular cells and all\n   * their children as they are clicked.\n   *\n   * @name HierarchyFilter\n   * @memberof filters\n   * @param {String} path\n   * @returns {Array<String>}\n   * @constructor\n   */\n\n\n  filters.HierarchyFilter = function (path) {\n    if (path === null) {\n      return null;\n    }\n\n    var filter = path.slice(0);\n\n    filter.isFiltered = function (value) {\n      if (!(filter.length && value && value.length && value.length >= filter.length)) {\n        return false;\n      }\n\n      for (var i = 0; i < filter.length; i++) {\n        if (value[i] !== filter[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    };\n\n    return filter;\n  };\n\n  var InvalidStateException = /*#__PURE__*/function (_Error2) {\n    _inherits(InvalidStateException, _Error2);\n\n    var _super2 = _createSuper(InvalidStateException);\n\n    function InvalidStateException() {\n      _classCallCheck(this, InvalidStateException);\n\n      return _super2.apply(this, arguments);\n    }\n\n    return InvalidStateException;\n  }( /*#__PURE__*/_wrapNativeSuper(Error));\n  /**\n   * Returns a function that given a string property name, can be used to pluck the property off an object.  A function\n   * can be passed as the second argument to also alter the data being returned.\n   *\n   * This can be a useful shorthand method to create accessor functions.\n   * @example\n   * var xPluck = pluck('x');\n   * var objA = {x: 1};\n   * xPluck(objA) // 1\n   * @example\n   * var xPosition = pluck('x', function (x, i) {\n   *     // `this` is the original datum,\n   *     // `x` is the x property of the datum,\n   *     // `i` is the position in the array\n   *     return this.radius + x;\n   * });\n   * selectAll('.circle').data(...).x(xPosition);\n   * @function pluck\n   * @param {String} n\n   * @param {Function} [f]\n   * @returns {Function}\n   */\n\n\n  var pluck = function pluck(n, f) {\n    if (!f) {\n      return function (d) {\n        return d[n];\n      };\n    }\n\n    return function (d, i) {\n      return f.call(d, d[n], i);\n    };\n  };\n  /**\n   * @namespace utils\n   * @type {{}}\n   */\n\n\n  var utils = {};\n  /**\n   * Print a single value filter.\n   * @method printSingleValue\n   * @memberof utils\n   * @param {any} filter\n   * @returns {String}\n   */\n\n  utils.printSingleValue = function (filter) {\n    var s = \"\".concat(filter);\n\n    if (filter instanceof Date) {\n      s = config.dateFormat(filter);\n    } else if (typeof filter === 'string') {\n      s = filter;\n    } else if (utils.isFloat(filter)) {\n      s = utils.printSingleValue.fformat(filter);\n    } else if (utils.isInteger(filter)) {\n      s = Math.round(filter);\n    }\n\n    return s;\n  };\n\n  utils.printSingleValue.fformat = d3Format.format('.2f'); // convert 'day' to d3.timeDay and similar\n\n  utils._toTimeFunc = function (t) {\n    var mappings = {\n      'second': d3Time.timeSecond,\n      'minute': d3Time.timeMinute,\n      'hour': d3Time.timeHour,\n      'day': d3Time.timeDay,\n      'week': d3Time.timeWeek,\n      'month': d3Time.timeMonth,\n      'year': d3Time.timeYear\n    };\n    return mappings[t];\n  };\n  /**\n   * Arbitrary add one value to another.\n   *\n   * If the value l is of type Date, adds r units to it. t becomes the unit.\n   * For example utils.add(dt, 3, 'week') will add 3 (r = 3) weeks (t= 'week') to dt.\n   *\n   * If l is of type numeric, t is ignored. In this case if r is of type string,\n   * it is assumed to be percentage (whether or not it includes %). For example\n   * utils.add(30, 10) will give 40 and utils.add(30, '10') will give 33.\n   *\n   * They also generate strange results if l is a string.\n   * @method add\n   * @memberof utils\n   * @param {Date|Number} l the value to modify\n   * @param {String|Number} r the amount by which to modify the value\n   * @param {Function|String} [t=d3.timeDay] if `l` is a `Date`, then this should be a\n   * [d3 time interval](https://github.com/d3/d3-time/blob/master/README.md#_interval).\n   * For backward compatibility with dc.js 2.0, it can also be the name of an interval, i.e.\n   * 'millis', 'second', 'minute', 'hour', 'day', 'week', 'month', or 'year'\n   * @returns {Date|Number}\n   */\n\n\n  utils.add = function (l, r, t) {\n    if (typeof r === 'string') {\n      r = r.replace('%', '');\n    }\n\n    if (l instanceof Date) {\n      if (typeof r === 'string') {\n        r = +r;\n      }\n\n      if (t === 'millis') {\n        return new Date(l.getTime() + r);\n      }\n\n      t = t || d3Time.timeDay;\n\n      if (typeof t !== 'function') {\n        t = utils._toTimeFunc(t);\n      }\n\n      return t.offset(l, r);\n    } else if (typeof r === 'string') {\n      var percentage = +r / 100;\n      return l > 0 ? l * (1 + percentage) : l * (1 - percentage);\n    } else {\n      return l + r;\n    }\n  };\n  /**\n   * Arbitrary subtract one value from another.\n   *\n   * If the value l is of type Date, subtracts r units from it. t becomes the unit.\n   * For example utils.subtract(dt, 3, 'week') will subtract 3 (r = 3) weeks (t= 'week') from dt.\n   *\n   * If l is of type numeric, t is ignored. In this case if r is of type string,\n   * it is assumed to be percentage (whether or not it includes %). For example\n   * utils.subtract(30, 10) will give 20 and utils.subtract(30, '10') will give 27.\n   *\n   * They also generate strange results if l is a string.\n   * @method subtract\n   * @memberof utils\n   * @param {Date|Number} l the value to modify\n   * @param {String|Number} r the amount by which to modify the value\n   * @param {Function|String} [t=d3.timeDay] if `l` is a `Date`, then this should be a\n   * [d3 time interval](https://github.com/d3/d3-time/blob/master/README.md#_interval).\n   * For backward compatibility with dc.js 2.0, it can also be the name of an interval, i.e.\n   * 'millis', 'second', 'minute', 'hour', 'day', 'week', 'month', or 'year'\n   * @returns {Date|Number}\n   */\n\n\n  utils.subtract = function (l, r, t) {\n    if (typeof r === 'string') {\n      r = r.replace('%', '');\n    }\n\n    if (l instanceof Date) {\n      if (typeof r === 'string') {\n        r = +r;\n      }\n\n      if (t === 'millis') {\n        return new Date(l.getTime() - r);\n      }\n\n      t = t || d3Time.timeDay;\n\n      if (typeof t !== 'function') {\n        t = utils._toTimeFunc(t);\n      }\n\n      return t.offset(l, -r);\n    } else if (typeof r === 'string') {\n      var percentage = +r / 100;\n      return l < 0 ? l * (1 + percentage) : l * (1 - percentage);\n    } else {\n      return l - r;\n    }\n  };\n  /**\n   * Is the value a number?\n   * @method isNumber\n   * @memberof utils\n   * @param {any} n\n   * @returns {Boolean}\n   */\n\n\n  utils.isNumber = function (n) {\n    return n === +n;\n  };\n  /**\n   * Is the value a float?\n   * @method isFloat\n   * @memberof utils\n   * @param {any} n\n   * @returns {Boolean}\n   */\n\n\n  utils.isFloat = function (n) {\n    return n === +n && n !== (n | 0);\n  };\n  /**\n   * Is the value an integer?\n   * @method isInteger\n   * @memberof utils\n   * @param {any} n\n   * @returns {Boolean}\n   */\n\n\n  utils.isInteger = function (n) {\n    return n === +n && n === (n | 0);\n  };\n  /**\n   * Is the value very close to zero?\n   * @method isNegligible\n   * @memberof utils\n   * @param {any} n\n   * @returns {Boolean}\n   */\n\n\n  utils.isNegligible = function (n) {\n    return !utils.isNumber(n) || n < constants.NEGLIGIBLE_NUMBER && n > -constants.NEGLIGIBLE_NUMBER;\n  };\n  /**\n   * Ensure the value is no greater or less than the min/max values.  If it is return the boundary value.\n   * @method clamp\n   * @memberof utils\n   * @param {any} val\n   * @param {any} min\n   * @param {any} max\n   * @returns {any}\n   */\n\n\n  utils.clamp = function (val, min, max) {\n    return val < min ? min : val > max ? max : val;\n  };\n  /**\n   * Given `x`, return a function that always returns `x`.\n   *\n   * {@link https://github.com/d3/d3/blob/master/CHANGES.md#internals `d3.functor` was removed in d3 version 4}.\n   * This function helps to implement the replacement,\n   * `typeof x === \"function\" ? x : utils.constant(x)`\n   * @method constant\n   * @memberof utils\n   * @param {any} x\n   * @returns {Function}\n   */\n\n\n  utils.constant = function (x) {\n    return function () {\n      return x;\n    };\n  };\n  /**\n   * Using a simple static counter, provide a unique integer id.\n   * @method uniqueId\n   * @memberof utils\n   * @returns {Number}\n   */\n\n\n  var _idCounter = 0;\n\n  utils.uniqueId = function () {\n    return ++_idCounter;\n  };\n  /**\n   * Convert a name to an ID.\n   * @method nameToId\n   * @memberof utils\n   * @param {String} name\n   * @returns {String}\n   */\n\n\n  utils.nameToId = function (name) {\n    return name.toLowerCase().replace(/[\\s]/g, '_').replace(/[\\.']/g, '');\n  };\n  /**\n   * Append or select an item on a parent element.\n   * @method appendOrSelect\n   * @memberof utils\n   * @param {d3.selection} parent\n   * @param {String} selector\n   * @param {String} tag\n   * @returns {d3.selection}\n   */\n\n\n  utils.appendOrSelect = function (parent, selector, tag) {\n    tag = tag || selector;\n    var element = parent.select(selector);\n\n    if (element.empty()) {\n      element = parent.append(tag);\n    }\n\n    return element;\n  };\n  /**\n   * Return the number if the value is a number; else 0.\n   * @method safeNumber\n   * @memberof utils\n   * @param {Number|any} n\n   * @returns {Number}\n   */\n\n\n  utils.safeNumber = function (n) {\n    return utils.isNumber(+n) ? +n : 0;\n  };\n  /**\n   * Return true if both arrays are equal, if both array are null these are considered equal\n   * @method arraysEqual\n   * @memberof utils\n   * @param {Array|null} a1\n   * @param {Array|null} a2\n   * @returns {Boolean}\n   */\n\n\n  utils.arraysEqual = function (a1, a2) {\n    if (!a1 && !a2) {\n      return true;\n    }\n\n    if (!a1 || !a2) {\n      return false;\n    }\n\n    return a1.length === a2.length && // If elements are not integers/strings, we hope that it will match because of toString\n    // Test cases cover dates as well.\n    a1.every(function (elem, i) {\n      return elem.valueOf() === a2[i].valueOf();\n    });\n  }; // ******** Sunburst Chart ********\n\n\n  utils.allChildren = function (node) {\n    var paths = [];\n    paths.push(node.path);\n    console.log('currentNode', node);\n\n    if (node.children) {\n      for (var i = 0; i < node.children.length; i++) {\n        paths = paths.concat(utils.allChildren(node.children[i]));\n      }\n    }\n\n    return paths;\n  }; // builds a d3 Hierarchy from a collection\n  // TODO: turn this monster method something better.\n\n\n  utils.toHierarchy = function (list, accessor) {\n    var root = {\n      'key': 'root',\n      'children': []\n    };\n\n    for (var i = 0; i < list.length; i++) {\n      var data = list[i];\n      var parts = data.key;\n      var value = accessor(data);\n      var currentNode = root;\n\n      for (var j = 0; j < parts.length; j++) {\n        var currentPath = parts.slice(0, j + 1);\n        var children = currentNode.children;\n        var nodeName = parts[j];\n        var childNode = void 0;\n\n        if (j + 1 < parts.length) {\n          // Not yet at the end of the sequence; move down the tree.\n          childNode = findChild(children, nodeName); // If we don't already have a child node for this branch, create it.\n\n          if (childNode === void 0) {\n            childNode = {\n              'key': nodeName,\n              'children': [],\n              'path': currentPath\n            };\n            children.push(childNode);\n          }\n\n          currentNode = childNode;\n        } else {\n          // Reached the end of the sequence; create a leaf node.\n          childNode = {\n            'key': nodeName,\n            'value': value,\n            'data': data,\n            'path': currentPath\n          };\n          children.push(childNode);\n        }\n      }\n    }\n\n    return root;\n  };\n\n  function findChild(children, nodeName) {\n    for (var k = 0; k < children.length; k++) {\n      if (children[k].key === nodeName) {\n        return children[k];\n      }\n    }\n  }\n\n  utils.getAncestors = function (node) {\n    var path = [];\n    var current = node;\n\n    while (current.parent) {\n      path.unshift(current.name);\n      current = current.parent;\n    }\n\n    return path;\n  };\n\n  utils.arraysIdentical = function (a, b) {\n    var i = a.length;\n\n    if (i !== b.length) {\n      return false;\n    }\n\n    while (i--) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n  /**\n   * @namespace printers\n   * @type {{}}\n   */\n\n\n  var printers = {};\n  /**\n   * Converts a list of filters into a readable string.\n   * @method filters\n   * @memberof printers\n   * @param {Array<filters>} filters\n   * @returns {String}\n   */\n\n  printers.filters = function (filters) {\n    var s = '';\n\n    for (var i = 0; i < filters.length; ++i) {\n      if (i > 0) {\n        s += ', ';\n      }\n\n      s += printers.filter(filters[i]);\n    }\n\n    return s;\n  };\n  /**\n   * Converts a filter into a readable string.\n   * @method filter\n   * @memberof printers\n   * @param {filters|any|Array<any>} filter\n   * @returns {String}\n   */\n\n\n  printers.filter = function (filter) {\n    var s = '';\n\n    if (typeof filter !== 'undefined' && filter !== null) {\n      if (filter instanceof Array) {\n        if (filter.length >= 2) {\n          s = \"[\".concat(filter.map(function (e) {\n            return utils.printSingleValue(e);\n          }).join(' -> '), \"]\");\n        } else if (filter.length >= 1) {\n          s = utils.printSingleValue(filter[0]);\n        }\n      } else {\n        s = utils.printSingleValue(filter);\n      }\n    }\n\n    return s;\n  };\n  /**\n   * @namespace units\n   * @type {{}}\n   */\n\n\n  var units = {};\n  /**\n   * The default value for {@link CoordinateGridMixin#xUnits .xUnits} for the\n   * {@link CoordinateGridMixin Coordinate Grid Chart} and should\n   * be used when the x values are a sequence of integers.\n   * It is a function that counts the number of integers in the range supplied in its start and end parameters.\n   * @method integers\n   * @memberof units\n   * @see {@link CoordinateGridMixin#xUnits coordinateGridMixin.xUnits}\n   * @example\n   * chart.xUnits(units.integers) // already the default\n   * @param {Number} start\n   * @param {Number} end\n   * @returns {Number}\n   */\n\n  units.integers = function (start, end) {\n    return Math.abs(end - start);\n  };\n  /**\n   * This argument can be passed to the {@link CoordinateGridMixin#xUnits .xUnits} function of a\n   * coordinate grid chart to specify ordinal units for the x axis. Usually this parameter is used in\n   * combination with passing\n   * {@link https://github.com/d3/d3-scale/blob/master/README.md#ordinal-scales d3.scaleOrdinal}\n   * to {@link CoordinateGridMixin#x .x}.\n   *\n   * As of dc.js 3.0, this is purely a placeholder or magic value which causes the chart to go into ordinal mode; the\n   * function is not called.\n   * @method ordinal\n   * @memberof units\n   * @return {uncallable}\n   * @see {@link https://github.com/d3/d3-scale/blob/master/README.md#ordinal-scales d3.scaleOrdinal}\n   * @see {@link CoordinateGridMixin#xUnits coordinateGridMixin.xUnits}\n   * @see {@link CoordinateGridMixin#x coordinateGridMixin.x}\n   * @example\n   * chart.xUnits(units.ordinal)\n   *      .x(d3.scaleOrdinal())\n   */\n\n\n  units.ordinal = function () {\n    throw new Error('dc.units.ordinal should not be called - it is a placeholder');\n  };\n  /**\n   * @namespace fp\n   * @memberof units\n   * @type {{}}\n   */\n\n\n  units.fp = {};\n  /**\n   * This function generates an argument for the {@link CoordinateGridMixin Coordinate Grid Chart}\n   * {@link CoordinateGridMixin#xUnits .xUnits} function specifying that the x values are floating-point\n   * numbers with the given precision.\n   * The returned function determines how many values at the given precision will fit into the range\n   * supplied in its start and end parameters.\n   * @method precision\n   * @memberof units.fp\n   * @see {@link CoordinateGridMixin#xUnits coordinateGridMixin.xUnits}\n   * @example\n   * // specify values (and ticks) every 0.1 units\n   * chart.xUnits(units.fp.precision(0.1)\n   * // there are 500 units between 0.5 and 1 if the precision is 0.001\n   * var thousandths = units.fp.precision(0.001);\n   * thousandths(0.5, 1.0) // returns 500\n   * @param {Number} precision\n   * @returns {Function} start-end unit function\n   */\n\n  units.fp.precision = function (precision) {\n    var _f = function _f(s, e) {\n      var d = Math.abs((e - s) / _f.resolution);\n\n      if (utils.isNegligible(d - Math.floor(d))) {\n        return Math.floor(d);\n      } else {\n        return Math.ceil(d);\n      }\n    };\n\n    _f.resolution = precision;\n    return _f;\n  };\n\n  var _defaultFilterHandler = function _defaultFilterHandler(dimension, filters) {\n    if (filters.length === 0) {\n      dimension.filter(null);\n    } else if (filters.length === 1 && !filters[0].isFiltered) {\n      // single value and not a function-based filter\n      dimension.filterExact(filters[0]);\n    } else if (filters.length === 1 && filters[0].filterType === 'RangedFilter') {\n      // single range-based filter\n      dimension.filterRange(filters[0]);\n    } else {\n      dimension.filterFunction(function (d) {\n        for (var i = 0; i < filters.length; i++) {\n          var filter = filters[i];\n\n          if (filter.isFiltered) {\n            if (filter.isFiltered(d)) {\n              return true;\n            }\n          } else if (filter <= d && filter >= d) {\n            return true;\n          }\n        }\n\n        return false;\n      });\n    }\n\n    return filters;\n  };\n\n  var _defaultHasFilterHandler = function _defaultHasFilterHandler(filters, filter) {\n    if (filter === null || typeof filter === 'undefined') {\n      return filters.length > 0;\n    }\n\n    return filters.some(function (f) {\n      return filter <= f && filter >= f;\n    });\n  };\n\n  var _defaultRemoveFilterHandler = function _defaultRemoveFilterHandler(filters, filter) {\n    for (var i = 0; i < filters.length; i++) {\n      if (filters[i] <= filter && filters[i] >= filter) {\n        filters.splice(i, 1);\n        break;\n      }\n    }\n\n    return filters;\n  };\n\n  var _defaultAddFilterHandler = function _defaultAddFilterHandler(filters, filter) {\n    filters.push(filter);\n    return filters;\n  };\n\n  var _defaultResetFilterHandler = function _defaultResetFilterHandler(filters) {\n    return [];\n  };\n  /**\n   * `BaseMixin` is an abstract functional object representing a basic `dc` chart object\n   * for all chart and widget implementations. Methods from the {@link #BaseMixin BaseMixin} are inherited\n   * and available on all chart implementations in the `dc` library.\n   * @mixin BaseMixin\n   */\n\n\n  var BaseMixin = /*#__PURE__*/function () {\n    function BaseMixin() {\n      var _this = this;\n\n      _classCallCheck(this, BaseMixin);\n\n      this.__dcFlag__ = utils.uniqueId();\n      this._svgDescription = null;\n      this._keyboardAccessible = false;\n      this._dimension = undefined;\n      this._group = undefined;\n      this._anchor = undefined;\n      this._root = undefined;\n      this._svg = undefined;\n      this._isChild = undefined;\n      this._minWidth = 200;\n\n      this._defaultWidthCalc = function (element) {\n        var width = element && element.getBoundingClientRect && element.getBoundingClientRect().width;\n        return width && width > _this._minWidth ? width : _this._minWidth;\n      };\n\n      this._widthCalc = this._defaultWidthCalc;\n      this._minHeight = 200;\n\n      this._defaultHeightCalc = function (element) {\n        var height = element && element.getBoundingClientRect && element.getBoundingClientRect().height;\n        return height && height > _this._minHeight ? height : _this._minHeight;\n      };\n\n      this._heightCalc = this._defaultHeightCalc;\n      this._width = undefined;\n      this._height = undefined;\n      this._useViewBoxResizing = false;\n      this._keyAccessor = pluck('key');\n      this._valueAccessor = pluck('value');\n      this._label = pluck('key');\n      this._ordering = pluck('key');\n      this._renderLabel = false;\n\n      this._title = function (d) {\n        return \"\".concat(_this.keyAccessor()(d), \": \").concat(_this.valueAccessor()(d));\n      };\n\n      this._renderTitle = true;\n      this._controlsUseVisibility = false;\n      this._transitionDuration = 750;\n      this._transitionDelay = 0;\n      this._filterPrinter = printers.filters;\n      this._mandatoryAttributesList = ['dimension', 'group'];\n      this._chartGroup = constants.DEFAULT_CHART_GROUP;\n      this._listeners = d3Dispatch.dispatch('preRender', 'postRender', 'preRedraw', 'postRedraw', 'filtered', 'zoomed', 'renderlet', 'pretransition');\n      this._legend = undefined;\n      this._commitHandler = undefined;\n\n      this._defaultData = function (group) {\n        return group.all();\n      };\n\n      this._data = this._defaultData;\n      this._filters = [];\n      this._filterHandler = _defaultFilterHandler;\n      this._hasFilterHandler = _defaultHasFilterHandler;\n      this._removeFilterHandler = _defaultRemoveFilterHandler;\n      this._addFilterHandler = _defaultAddFilterHandler;\n      this._resetFilterHandler = _defaultResetFilterHandler;\n    }\n    /**\n     * Set or get the height attribute of a chart. The height is applied to the SVGElement generated by\n     * the chart when rendered (or re-rendered). If a value is given, then it will be used to calculate\n     * the new height and the chart returned for method chaining.  The value can either be a numeric, a\n     * function, or falsy. If no value is specified then the value of the current height attribute will\n     * be returned.\n     *\n     * By default, without an explicit height being given, the chart will select the width of its\n     * anchor element. If that isn't possible it defaults to 200 (provided by the\n     * {@link BaseMixin#minHeight minHeight} property). Setting the value falsy will return\n     * the chart to the default behavior.\n     * @see {@link BaseMixin#minHeight minHeight}\n     * @example\n     * // Default height\n     * chart.height(function (element) {\n     *     var height = element && element.getBoundingClientRect && element.getBoundingClientRect().height;\n     *     return (height && height > chart.minHeight()) ? height : chart.minHeight();\n     * });\n     *\n     * chart.height(250); // Set the chart's height to 250px;\n     * chart.height(function(anchor) { return doSomethingWith(anchor); }); // set the chart's height with a function\n     * chart.height(null); // reset the height to the default auto calculation\n     * @param {Number|Function} [height]\n     * @returns {Number|BaseMixin}\n     */\n\n\n    _createClass(BaseMixin, [{\n      key: \"height\",\n      value: function height(_height) {\n        if (!arguments.length) {\n          if (!utils.isNumber(this._height)) {\n            // only calculate once\n            this._height = this._heightCalc(this._root.node());\n          }\n\n          return this._height;\n        }\n\n        this._heightCalc = _height ? typeof _height === 'function' ? _height : utils.constant(_height) : this._defaultHeightCalc;\n        this._height = undefined;\n        return this;\n      }\n      /**\n       * Set or get the width attribute of a chart.\n       * @see {@link BaseMixin#height height}\n       * @see {@link BaseMixin#minWidth minWidth}\n       * @example\n       * // Default width\n       * chart.width(function (element) {\n       *     var width = element && element.getBoundingClientRect && element.getBoundingClientRect().width;\n       *     return (width && width > chart.minWidth()) ? width : chart.minWidth();\n       * });\n       * @param {Number|Function} [width]\n       * @returns {Number|BaseMixin}\n       */\n\n    }, {\n      key: \"width\",\n      value: function width(_width) {\n        if (!arguments.length) {\n          if (!utils.isNumber(this._width)) {\n            // only calculate once\n            this._width = this._widthCalc(this._root.node());\n          }\n\n          return this._width;\n        }\n\n        this._widthCalc = _width ? typeof _width === 'function' ? _width : utils.constant(_width) : this._defaultWidthCalc;\n        this._width = undefined;\n        return this;\n      }\n      /**\n       * Set or get the minimum width attribute of a chart. This only has effect when used with the default\n       * {@link BaseMixin#width width} function.\n       * @see {@link BaseMixin#width width}\n       * @param {Number} [minWidth=200]\n       * @returns {Number|BaseMixin}\n       */\n\n    }, {\n      key: \"minWidth\",\n      value: function minWidth(_minWidth) {\n        if (!arguments.length) {\n          return this._minWidth;\n        }\n\n        this._minWidth = _minWidth;\n        return this;\n      }\n      /**\n       * Set or get the minimum height attribute of a chart. This only has effect when used with the default\n       * {@link BaseMixin#height height} function.\n       * @see {@link BaseMixin#height height}\n       * @param {Number} [minHeight=200]\n       * @returns {Number|BaseMixin}\n       */\n\n    }, {\n      key: \"minHeight\",\n      value: function minHeight(_minHeight) {\n        if (!arguments.length) {\n          return this._minHeight;\n        }\n\n        this._minHeight = _minHeight;\n        return this;\n      }\n      /**\n       * Turn on/off using the SVG\n       * {@link https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox `viewBox` attribute}.\n       * When enabled, `viewBox` will be set on the svg root element instead of `width` and `height`.\n       * Requires that the chart aspect ratio be defined using chart.width(w) and chart.height(h).\n       *\n       * This will maintain the aspect ratio while enabling the chart to resize responsively to the\n       * space given to the chart using CSS. For example, the chart can use `width: 100%; height:\n       * 100%` or absolute positioning to resize to its parent div.\n       *\n       * Since the text will be sized as if the chart is drawn according to the width and height, and\n       * will be resized if the chart is any other size, you need to set the chart width and height so\n       * that the text looks good. In practice, 600x400 seems to work pretty well for most charts.\n       *\n       * You can see examples of this resizing strategy in the [Chart Resizing\n       * Examples](http://dc-js.github.io/dc.js/resizing/); just add `?resize=viewbox` to any of the\n       * one-chart examples to enable `useViewBoxResizing`.\n       * @param {Boolean} [useViewBoxResizing=false]\n       * @returns {Boolean|BaseMixin}\n       */\n\n    }, {\n      key: \"useViewBoxResizing\",\n      value: function useViewBoxResizing(_useViewBoxResizing) {\n        if (!arguments.length) {\n          return this._useViewBoxResizing;\n        }\n\n        this._useViewBoxResizing = _useViewBoxResizing;\n        return this;\n      }\n      /**\n       * **mandatory**\n       *\n       * Set or get the dimension attribute of a chart. In `dc`, a dimension can be any valid\n       * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#dimension crossfilter dimension}\n       *\n       * If a value is given, then it will be used as the new dimension. If no value is specified then\n       * the current dimension will be returned.\n       * @see {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#dimension crossfilter.dimension}\n       * @example\n       * var index = crossfilter([]);\n       * var dimension = index.dimension(pluck('key'));\n       * chart.dimension(dimension);\n       * @param {crossfilter.dimension} [dimension]\n       * @returns {crossfilter.dimension|BaseMixin}\n       */\n\n    }, {\n      key: \"dimension\",\n      value: function dimension(_dimension) {\n        if (!arguments.length) {\n          return this._dimension;\n        }\n\n        this._dimension = _dimension;\n        this.expireCache();\n        return this;\n      }\n      /**\n       * Set the data callback or retrieve the chart's data set. The data callback is passed the chart's\n       * group and by default will return\n       * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#group_all group.all}.\n       * This behavior may be modified to, for instance, return only the top 5 groups.\n       * @example\n       * // Default data function\n       * chart.data(function (group) { return group.all(); });\n       *\n       * chart.data(function (group) { return group.top(5); });\n       * @param {Function} [callback]\n       * @returns {*|BaseMixin}\n       */\n\n    }, {\n      key: \"data\",\n      value: function data(callback) {\n        if (!arguments.length) {\n          return this._data(this._group);\n        }\n\n        this._data = typeof callback === 'function' ? callback : utils.constant(callback);\n        this.expireCache();\n        return this;\n      }\n      /**\n       * **mandatory**\n       *\n       * Set or get the group attribute of a chart. In `dc` a group is a\n       * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#group-map-reduce crossfilter group}.\n       * Usually the group should be created from the particular dimension associated with the same chart. If a value is\n       * given, then it will be used as the new group.\n       *\n       * If no value specified then the current group will be returned.\n       * If `name` is specified then it will be used to generate legend label.\n       * @see {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#group-map-reduce crossfilter.group}\n       * @example\n       * var index = crossfilter([]);\n       * var dimension = index.dimension(pluck('key'));\n       * chart.dimension(dimension);\n       * chart.group(dimension.group().reduceSum());\n       * @param {crossfilter.group} [group]\n       * @param {String} [name]\n       * @returns {crossfilter.group|BaseMixin}\n       */\n\n    }, {\n      key: \"group\",\n      value: function group(_group, name) {\n        if (!arguments.length) {\n          return this._group;\n        }\n\n        this._group = _group;\n        this._groupName = name;\n        this.expireCache();\n        return this;\n      }\n      /**\n       * Get or set an accessor to order ordinal dimensions.  The chart uses\n       * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort Array.sort}\n       * to sort elements; this accessor returns the value to order on.\n       * @example\n       * // Default ordering accessor\n       * _chart.ordering(pluck('key'));\n       * @param {Function} [orderFunction]\n       * @returns {Function|BaseMixin}\n       */\n\n    }, {\n      key: \"ordering\",\n      value: function ordering(orderFunction) {\n        if (!arguments.length) {\n          return this._ordering;\n        }\n\n        this._ordering = orderFunction;\n        this.expireCache();\n        return this;\n      }\n    }, {\n      key: \"_computeOrderedGroups\",\n      value: function _computeOrderedGroups(data) {\n        var _this2 = this;\n\n        // clone the array before sorting, otherwise Array.sort sorts in-place\n        return Array.from(data).sort(function (a, b) {\n          return d3Array.ascending(_this2._ordering(a), _this2._ordering(b));\n        });\n      }\n      /**\n       * Clear all filters associated with this chart. The same effect can be achieved by calling\n       * {@link BaseMixin#filter chart.filter(null)}.\n       * @returns {BaseMixin}\n       */\n\n    }, {\n      key: \"filterAll\",\n      value: function filterAll() {\n        return this.filter(null);\n      }\n      /**\n       * Execute d3 single selection in the chart's scope using the given selector and return the d3\n       * selection.\n       *\n       * This function is **not chainable** since it does not return a chart instance; however the d3\n       * selection result can be chained to d3 function calls.\n       * @see {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3.select}\n       * @example\n       * // Has the same effect as d3.select('#chart-id').select(selector)\n       * chart.select(selector)\n       * @param {String} sel CSS selector string\n       * @returns {d3.selection}\n       */\n\n    }, {\n      key: \"select\",\n      value: function select(sel) {\n        return this._root.select(sel);\n      }\n      /**\n       * Execute in scope d3 selectAll using the given selector and return d3 selection result.\n       *\n       * This function is **not chainable** since it does not return a chart instance; however the d3\n       * selection result can be chained to d3 function calls.\n       * @see {@link https://github.com/d3/d3-selection/blob/master/README.md#selectAll d3.selectAll}\n       * @example\n       * // Has the same effect as d3.select('#chart-id').selectAll(selector)\n       * chart.selectAll(selector)\n       * @param {String} sel CSS selector string\n       * @returns {d3.selection}\n       */\n\n    }, {\n      key: \"selectAll\",\n      value: function selectAll(sel) {\n        return this._root ? this._root.selectAll(sel) : null;\n      }\n      /**\n       * Set the root SVGElement to either be an existing chart's root; or any valid [d3 single\n       * selector](https://github.com/d3/d3-selection/blob/master/README.md#selecting-elements) specifying a dom\n       * block element such as a div; or a dom element or d3 selection. Optionally registers the chart\n       * within the chartGroup. This class is called internally on chart initialization, but be called\n       * again to relocate the chart. However, it will orphan any previously created SVGElements.\n       * @param {anchorChart|anchorSelector|anchorNode} [parent]\n       * @param {String} [chartGroup]\n       * @returns {String|node|d3.selection|BaseMixin}\n       */\n\n    }, {\n      key: \"anchor\",\n      value: function anchor(parent, chartGroup) {\n        if (!arguments.length) {\n          return this._anchor;\n        }\n\n        if (instanceOfChart(parent)) {\n          this._anchor = parent.anchor();\n\n          if (this._anchor.children) {\n            // is _anchor a div?\n            this._anchor = \"#\".concat(parent.anchorName());\n          }\n\n          this._root = parent.root();\n          this._isChild = true;\n        } else if (parent) {\n          if (parent.select && parent.classed) {\n            // detect d3 selection\n            this._anchor = parent.node();\n          } else {\n            this._anchor = parent;\n          }\n\n          this._root = d3Selection.select(this._anchor);\n\n          this._root.classed(constants.CHART_CLASS, true);\n\n          registerChart(this, chartGroup);\n          this._isChild = false;\n        } else {\n          throw new BadArgumentException('parent must be defined');\n        }\n\n        this._chartGroup = chartGroup;\n        return this;\n      }\n      /**\n       * Returns the DOM id for the chart's anchored location.\n       * @returns {String}\n       */\n\n    }, {\n      key: \"anchorName\",\n      value: function anchorName() {\n        var a = this.anchor();\n\n        if (a && a.id) {\n          return a.id;\n        }\n\n        if (a && a.replace) {\n          return a.replace('#', '');\n        }\n\n        return \"dc-chart\".concat(this.chartID());\n      }\n      /**\n       * Returns the root element where a chart resides. Usually it will be the parent div element where\n       * the SVGElement was created. You can also pass in a new root element however this is usually handled by\n       * dc internally. Resetting the root element on a chart outside of dc internals may have\n       * unexpected consequences.\n       * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement HTMLElement}\n       * @param {HTMLElement} [rootElement]\n       * @returns {HTMLElement|BaseMixin}\n       */\n\n    }, {\n      key: \"root\",\n      value: function root(rootElement) {\n        if (!arguments.length) {\n          return this._root;\n        }\n\n        this._root = rootElement;\n        return this;\n      }\n      /**\n       * Returns the top SVGElement for this specific chart. You can also pass in a new SVGElement,\n       * however this is usually handled by dc internally. Resetting the SVGElement on a chart outside\n       * of dc internals may have unexpected consequences.\n       * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/SVGElement SVGElement}\n       * @param {SVGElement|d3.selection} [svgElement]\n       * @returns {SVGElement|d3.selection|BaseMixin}\n       */\n\n    }, {\n      key: \"svg\",\n      value: function svg(svgElement) {\n        if (!arguments.length) {\n          return this._svg;\n        }\n\n        this._svg = svgElement;\n        return this;\n      }\n      /**\n       * Remove the chart's SVGElements from the dom and recreate the container SVGElement.\n       * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/SVGElement SVGElement}\n       * @returns {SVGElement}\n       */\n\n    }, {\n      key: \"resetSvg\",\n      value: function resetSvg() {\n        this.select('svg').remove();\n        return this.generateSvg();\n      }\n    }, {\n      key: \"sizeSvg\",\n      value: function sizeSvg() {\n        if (this._svg) {\n          if (!this._useViewBoxResizing) {\n            this._svg.attr('width', this.width()).attr('height', this.height());\n          } else if (!this._svg.attr('viewBox')) {\n            this._svg.attr('viewBox', \"0 0 \".concat(this.width(), \" \").concat(this.height()));\n          }\n        }\n      }\n    }, {\n      key: \"generateSvg\",\n      value: function generateSvg() {\n        this._svg = this.root().append('svg');\n\n        if (this._svgDescription || this._keyboardAccessible) {\n          this._svg.append('desc').attr('id', \"desc-id-\".concat(this.__dcFlag__)).html(\"\".concat(this.svgDescription()));\n\n          this._svg.attr('tabindex', '0').attr('role', 'img').attr('aria-labelledby', \"desc-id-\".concat(this.__dcFlag__));\n        }\n\n        this.sizeSvg();\n        return this._svg;\n      }\n      /**\n       * Set or get description text for the entire SVG graphic. If set, will create a `<desc>` element as the first\n       * child of the SVG with the description text and also make the SVG focusable from keyboard.\n       * @param {String} [description]\n       * @returns {String|BaseMixin}\n       */\n\n    }, {\n      key: \"svgDescription\",\n      value: function svgDescription(description) {\n        if (!arguments.length) {\n          return this._svgDescription || this.constructor.name;\n        }\n\n        this._svgDescription = description;\n        return this;\n      }\n      /**\n       * If set, interactive chart elements like individual bars in a bar chart or symbols in a scatter plot\n       * will be focusable from keyboard and on pressing Enter or Space will behave as if clicked on.\n       * \n       * If `svgDescription` has not been explicitly set, will also set SVG description text to the class\n       * constructor name, like BarChart or HeatMap, and make the entire SVG focusable.\n       * @param {Boolean} [keyboardAccessible=false]\n       * @returns {Boolean|BarChart}\n       */\n\n    }, {\n      key: \"keyboardAccessible\",\n      value: function keyboardAccessible(_keyboardAccessible) {\n        if (!arguments.length) {\n          return this._keyboardAccessible;\n        }\n\n        this._keyboardAccessible = _keyboardAccessible;\n        return this;\n      }\n      /**\n       * Set or get the filter printer function. The filter printer function is used to generate human\n       * friendly text for filter value(s) associated with the chart instance. The text will get shown\n       * in the `.filter element; see {@link BaseMixin#turnOnControls turnOnControls}.\n       *\n       * By default dc charts use a default filter printer {@link printers.filters printers.filters}\n       * that provides simple printing support for both single value and ranged filters.\n       * @example\n       * // for a chart with an ordinal brush, print the filters in upper case\n       * chart.filterPrinter(function(filters) {\n       *   return filters.map(function(f) { return f.toUpperCase(); }).join(', ');\n       * });\n       * // for a chart with a range brush, print the filter as start and extent\n       * chart.filterPrinter(function(filters) {\n       *   return 'start ' + utils.printSingleValue(filters[0][0]) +\n       *     ' extent ' + utils.printSingleValue(filters[0][1] - filters[0][0]);\n       * });\n       * @param {Function} [filterPrinterFunction=printers.filters]\n       * @returns {Function|BaseMixin}\n       */\n\n    }, {\n      key: \"filterPrinter\",\n      value: function filterPrinter(filterPrinterFunction) {\n        if (!arguments.length) {\n          return this._filterPrinter;\n        }\n\n        this._filterPrinter = filterPrinterFunction;\n        return this;\n      }\n      /**\n       * If set, use the `visibility` attribute instead of the `display` attribute for showing/hiding\n       * chart reset and filter controls, for less disruption to the layout.\n       * @param {Boolean} [controlsUseVisibility=false]\n       * @returns {Boolean|BaseMixin}\n       */\n\n    }, {\n      key: \"controlsUseVisibility\",\n      value: function controlsUseVisibility(_controlsUseVisibility) {\n        if (!arguments.length) {\n          return this._controlsUseVisibility;\n        }\n\n        this._controlsUseVisibility = _controlsUseVisibility;\n        return this;\n      }\n      /**\n       * Turn on optional control elements within the root element. dc currently supports the\n       * following html control elements.\n       * * root.selectAll('.reset') - elements are turned on if the chart has an active filter. This type\n       * of control element is usually used to store a reset link to allow user to reset filter on a\n       * certain chart. This element will be turned off automatically if the filter is cleared.\n       * * root.selectAll('.filter') elements are turned on if the chart has an active filter. The text\n       * content of this element is then replaced with the current filter value using the filter printer\n       * function. This type of element will be turned off automatically if the filter is cleared.\n       * @returns {BaseMixin}\n       */\n\n    }, {\n      key: \"turnOnControls\",\n      value: function turnOnControls() {\n        if (this._root) {\n          var attribute = this.controlsUseVisibility() ? 'visibility' : 'display';\n          this.selectAll('.reset').style(attribute, null);\n          this.selectAll('.filter').text(this._filterPrinter(this.filters())).style(attribute, null);\n        }\n\n        return this;\n      }\n      /**\n       * Turn off optional control elements within the root element.\n       * @see {@link BaseMixin#turnOnControls turnOnControls}\n       * @returns {BaseMixin}\n       */\n\n    }, {\n      key: \"turnOffControls\",\n      value: function turnOffControls() {\n        if (this._root) {\n          var attribute = this.controlsUseVisibility() ? 'visibility' : 'display';\n          var value = this.controlsUseVisibility() ? 'hidden' : 'none';\n          this.selectAll('.reset').style(attribute, value);\n          this.selectAll('.filter').style(attribute, value).text(this.filter());\n        }\n\n        return this;\n      }\n      /**\n       * Set or get the animation transition duration (in milliseconds) for this chart instance.\n       * @param {Number} [duration=750]\n       * @returns {Number|BaseMixin}\n       */\n\n    }, {\n      key: \"transitionDuration\",\n      value: function transitionDuration(duration) {\n        if (!arguments.length) {\n          return this._transitionDuration;\n        }\n\n        this._transitionDuration = duration;\n        return this;\n      }\n      /**\n       * Set or get the animation transition delay (in milliseconds) for this chart instance.\n       * @param {Number} [delay=0]\n       * @returns {Number|BaseMixin}\n       */\n\n    }, {\n      key: \"transitionDelay\",\n      value: function transitionDelay(delay) {\n        if (!arguments.length) {\n          return this._transitionDelay;\n        }\n\n        this._transitionDelay = delay;\n        return this;\n      }\n    }, {\n      key: \"_mandatoryAttributes\",\n      value: function _mandatoryAttributes(_) {\n        if (!arguments.length) {\n          return this._mandatoryAttributesList;\n        }\n\n        this._mandatoryAttributesList = _;\n        return this;\n      }\n    }, {\n      key: \"checkForMandatoryAttributes\",\n      value: function checkForMandatoryAttributes(a) {\n        if (!this[a] || !this[a]()) {\n          throw new InvalidStateException(\"Mandatory attribute chart.\".concat(a, \" is missing on chart[#\").concat(this.anchorName(), \"]\"));\n        }\n      }\n      /**\n       * Invoking this method will force the chart to re-render everything from scratch. Generally it\n       * should only be used to render the chart for the first time on the page or if you want to make\n       * sure everything is redrawn from scratch instead of relying on the default incremental redrawing\n       * behaviour.\n       * @returns {BaseMixin}\n       */\n\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this3 = this;\n\n        this._height = this._width = undefined; // force recalculate\n\n        this._listeners.call('preRender', this, this);\n\n        if (this._mandatoryAttributesList) {\n          this._mandatoryAttributesList.forEach(function (e) {\n            return _this3.checkForMandatoryAttributes(e);\n          });\n        }\n\n        var result = this._doRender();\n\n        if (this._legend) {\n          this._legend.render();\n        }\n\n        this._activateRenderlets('postRender');\n\n        return result;\n      }\n    }, {\n      key: \"_makeKeyboardAccessible\",\n      value: function _makeKeyboardAccessible(onClickFunction) {\n        var _this4 = this;\n\n        for (var _len = arguments.length, onClickArgs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          onClickArgs[_key - 1] = arguments[_key];\n        }\n\n        // called from each chart module's render and redraw methods\n        var tabElements = this._svg.selectAll('.dc-tabbable').attr('tabindex', 0);\n\n        if (onClickFunction) {\n          tabElements.on('keydown', d3compat.eventHandler(function (d, event) {\n            // trigger only if d is an object undestood by KeyAccessor()\n            if (event.keyCode === 13 && typeof d === 'object') {\n              onClickFunction.call.apply(onClickFunction, [_this4, d].concat(onClickArgs));\n            } // special case for space key press - prevent scrolling\n\n\n            if (event.keyCode === 32 && typeof d === 'object') {\n              onClickFunction.call.apply(onClickFunction, [_this4, d].concat(onClickArgs));\n              event.preventDefault();\n            }\n          }));\n        }\n      }\n    }, {\n      key: \"_activateRenderlets\",\n      value: function _activateRenderlets(event) {\n        var _this5 = this;\n\n        this._listeners.call('pretransition', this, this);\n\n        if (this.transitionDuration() > 0 && this._svg) {\n          this._svg.transition().duration(this.transitionDuration()).delay(this.transitionDelay()).on('end', function () {\n            _this5._listeners.call('renderlet', _this5, _this5);\n\n            if (event) {\n              _this5._listeners.call(event, _this5, _this5);\n            }\n          });\n        } else {\n          this._listeners.call('renderlet', this, this);\n\n          if (event) {\n            this._listeners.call(event, this, this);\n          }\n        }\n      }\n      /**\n       * Calling redraw will cause the chart to re-render data changes incrementally. If there is no\n       * change in the underlying data dimension then calling this method will have no effect on the\n       * chart. Most chart interaction in dc will automatically trigger this method through internal\n       * events (in particular {@link redrawAll redrawAll}); therefore, you only need to\n       * manually invoke this function if data is manipulated outside of dc's control (for example if\n       * data is loaded in the background using\n       * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#crossfilter_add crossfilter.add}).\n       * @returns {BaseMixin}\n       */\n\n    }, {\n      key: \"redraw\",\n      value: function redraw() {\n        this.sizeSvg();\n\n        this._listeners.call('preRedraw', this, this);\n\n        var result = this._doRedraw();\n\n        if (this._legend) {\n          this._legend.render();\n        }\n\n        this._activateRenderlets('postRedraw');\n\n        return result;\n      }\n      /**\n       * Gets/sets the commit handler. If the chart has a commit handler, the handler will be called when\n       * the chart's filters have changed, in order to send the filter data asynchronously to a server.\n       *\n       * Unlike other functions in dc.js, the commit handler is asynchronous. It takes two arguments:\n       * a flag indicating whether this is a render (true) or a redraw (false), and a callback to be\n       * triggered once the commit is done. The callback has the standard node.js continuation signature\n       * with error first and result second.\n       * @param {Function} commitHandler\n       * @returns {BaseMixin}\n       */\n\n    }, {\n      key: \"commitHandler\",\n      value: function commitHandler(_commitHandler) {\n        if (!arguments.length) {\n          return this._commitHandler;\n        }\n\n        this._commitHandler = _commitHandler;\n        return this;\n      }\n      /**\n       * Redraws all charts in the same group as this chart, typically in reaction to a filter\n       * change. If the chart has a {@link BaseMixin.commitFilter commitHandler}, it will\n       * be executed and waited for.\n       * @returns {BaseMixin}\n       */\n\n    }, {\n      key: \"redrawGroup\",\n      value: function redrawGroup() {\n        var _this6 = this;\n\n        if (this._commitHandler) {\n          this._commitHandler(false, function (error, result) {\n            if (error) {\n              console.log(error);\n            } else {\n              redrawAll(_this6.chartGroup());\n            }\n          });\n        } else {\n          redrawAll(this.chartGroup());\n        }\n\n        return this;\n      }\n      /**\n       * Renders all charts in the same group as this chart. If the chart has a\n       * {@link BaseMixin.commitFilter commitHandler}, it will be executed and waited for\n       * @returns {BaseMixin}\n       */\n\n    }, {\n      key: \"renderGroup\",\n      value: function renderGroup() {\n        var _this7 = this;\n\n        if (this._commitHandler) {\n          this._commitHandler(false, function (error, result) {\n            if (error) {\n              console.log(error);\n            } else {\n              renderAll(_this7.chartGroup());\n            }\n          });\n        } else {\n          renderAll(this.chartGroup());\n        }\n\n        return this;\n      }\n    }, {\n      key: \"_invokeFilteredListener\",\n      value: function _invokeFilteredListener(f) {\n        if (f !== undefined) {\n          this._listeners.call('filtered', this, this, f);\n        }\n      }\n    }, {\n      key: \"_invokeZoomedListener\",\n      value: function _invokeZoomedListener() {\n        this._listeners.call('zoomed', this, this);\n      }\n      /**\n       * Set or get the has-filter handler. The has-filter handler is a function that checks to see if\n       * the chart's current filters (first argument) include a specific filter (second argument).  Using a custom has-filter handler allows\n       * you to change the way filters are checked for and replaced.\n       * @example\n       * // default has-filter handler\n       * chart.hasFilterHandler(function (filters, filter) {\n       *     if (filter === null || typeof(filter) === 'undefined') {\n       *         return filters.length > 0;\n       *     }\n       *     return filters.some(function (f) {\n       *         return filter <= f && filter >= f;\n       *     });\n       * });\n       *\n       * // custom filter handler (no-op)\n       * chart.hasFilterHandler(function(filters, filter) {\n       *     return false;\n       * });\n       * @param {Function} [hasFilterHandler]\n       * @returns {Function|BaseMixin}\n       */\n\n    }, {\n      key: \"hasFilterHandler\",\n      value: function hasFilterHandler(_hasFilterHandler) {\n        if (!arguments.length) {\n          return this._hasFilterHandler;\n        }\n\n        this._hasFilterHandler = _hasFilterHandler;\n        return this;\n      }\n      /**\n       * Check whether any active filter or a specific filter is associated with particular chart instance.\n       * This function is **not chainable**.\n       * @see {@link BaseMixin#hasFilterHandler hasFilterHandler}\n       * @param {*} [filter]\n       * @returns {Boolean}\n       */\n\n    }, {\n      key: \"hasFilter\",\n      value: function hasFilter(filter) {\n        return this._hasFilterHandler(this._filters, filter);\n      }\n      /**\n       * Set or get the remove filter handler. The remove filter handler is a function that removes a\n       * filter from the chart's current filters. Using a custom remove filter handler allows you to\n       * change how filters are removed or perform additional work when removing a filter, e.g. when\n       * using a filter server other than crossfilter.\n       *\n       * The handler should return a new or modified array as the result.\n       * @example\n       * // default remove filter handler\n       * chart.removeFilterHandler(function (filters, filter) {\n       *     for (var i = 0; i < filters.length; i++) {\n       *         if (filters[i] <= filter && filters[i] >= filter) {\n       *             filters.splice(i, 1);\n       *             break;\n       *         }\n       *     }\n       *     return filters;\n       * });\n       *\n       * // custom filter handler (no-op)\n       * chart.removeFilterHandler(function(filters, filter) {\n       *     return filters;\n       * });\n       * @param {Function} [removeFilterHandler]\n       * @returns {Function|BaseMixin}\n       */\n\n    }, {\n      key: \"removeFilterHandler\",\n      value: function removeFilterHandler(_removeFilterHandler) {\n        if (!arguments.length) {\n          return this._removeFilterHandler;\n        }\n\n        this._removeFilterHandler = _removeFilterHandler;\n        return this;\n      }\n      /**\n       * Set or get the add filter handler. The add filter handler is a function that adds a filter to\n       * the chart's filter list. Using a custom add filter handler allows you to change the way filters\n       * are added or perform additional work when adding a filter, e.g. when using a filter server other\n       * than crossfilter.\n       *\n       * The handler should return a new or modified array as the result.\n       * @example\n       * // default add filter handler\n       * chart.addFilterHandler(function (filters, filter) {\n       *     filters.push(filter);\n       *     return filters;\n       * });\n       *\n       * // custom filter handler (no-op)\n       * chart.addFilterHandler(function(filters, filter) {\n       *     return filters;\n       * });\n       * @param {Function} [addFilterHandler]\n       * @returns {Function|BaseMixin}\n       */\n\n    }, {\n      key: \"addFilterHandler\",\n      value: function addFilterHandler(_addFilterHandler) {\n        if (!arguments.length) {\n          return this._addFilterHandler;\n        }\n\n        this._addFilterHandler = _addFilterHandler;\n        return this;\n      }\n      /**\n       * Set or get the reset filter handler. The reset filter handler is a function that resets the\n       * chart's filter list by returning a new list. Using a custom reset filter handler allows you to\n       * change the way filters are reset, or perform additional work when resetting the filters,\n       * e.g. when using a filter server other than crossfilter.\n       *\n       * The handler should return a new or modified array as the result.\n       * @example\n       * // default remove filter handler\n       * function (filters) {\n       *     return [];\n       * }\n       *\n       * // custom filter handler (no-op)\n       * chart.resetFilterHandler(function(filters) {\n       *     return filters;\n       * });\n       * @param {Function} [resetFilterHandler]\n       * @returns {BaseMixin}\n       */\n\n    }, {\n      key: \"resetFilterHandler\",\n      value: function resetFilterHandler(_resetFilterHandler) {\n        if (!arguments.length) {\n          return this._resetFilterHandler;\n        }\n\n        this._resetFilterHandler = _resetFilterHandler;\n        return this;\n      }\n    }, {\n      key: \"applyFilters\",\n      value: function applyFilters(filters) {\n        if (this.dimension() && this.dimension().filter) {\n          var fs = this._filterHandler(this.dimension(), filters);\n\n          if (fs) {\n            filters = fs;\n          }\n        }\n\n        return filters;\n      }\n      /**\n       * Replace the chart filter. This is equivalent to calling `chart.filter(null).filter(filter)`\n       * but more efficient because the filter is only applied once.\n       *\n       * @param {*} [filter]\n       * @returns {BaseMixin}\n       */\n\n    }, {\n      key: \"replaceFilter\",\n      value: function replaceFilter(filter) {\n        this._filters = this._resetFilterHandler(this._filters);\n        this.filter(filter);\n        return this;\n      }\n      /**\n       * Filter the chart by the given parameter, or return the current filter if no input parameter\n       * is given.\n       *\n       * The filter parameter can take one of these forms:\n       * * A single value: the value will be toggled (added if it is not present in the current\n       * filters, removed if it is present)\n       * * An array containing a single array of values (`[[value,value,value]]`): each value is\n       * toggled\n       * * When appropriate for the chart, a {@link filters dc filter object} such as\n       *   * {@link filters.RangedFilter `filters.RangedFilter`} for the\n       * {@link CoordinateGridMixin CoordinateGridMixin} charts\n       *   * {@link filters.TwoDimensionalFilter `filters.TwoDimensionalFilter`} for the\n       * {@link HeatMap heat map}\n       *   * {@link filters.RangedTwoDimensionalFilter `filters.RangedTwoDimensionalFilter`}\n       * for the {@link ScatterPlot scatter plot}\n       * * `null`: the filter will be reset using the\n       * {@link BaseMixin#resetFilterHandler resetFilterHandler}\n       *\n       * Note that this is always a toggle (even when it doesn't make sense for the filter type). If\n       * you wish to replace the current filter, either call `chart.filter(null)` first - or it's more\n       * efficient to call {@link BaseMixin#replaceFilter `chart.replaceFilter(filter)`} instead.\n       *\n       * Each toggle is executed by checking if the value is already present using the\n       * {@link BaseMixin#hasFilterHandler hasFilterHandler}; if it is not present, it is added\n       * using the {@link BaseMixin#addFilterHandler addFilterHandler}; if it is already present,\n       * it is removed using the {@link BaseMixin#removeFilterHandler removeFilterHandler}.\n       *\n       * Once the filters array has been updated, the filters are applied to the\n       * crossfilter dimension, using the {@link BaseMixin#filterHandler filterHandler}.\n       *\n       * Once you have set the filters, call {@link BaseMixin#redrawGroup `chart.redrawGroup()`}\n       * (or {@link redrawAll `redrawAll()`}) to redraw the chart's group.\n       * @see {@link BaseMixin#addFilterHandler addFilterHandler}\n       * @see {@link BaseMixin#removeFilterHandler removeFilterHandler}\n       * @see {@link BaseMixin#resetFilterHandler resetFilterHandler}\n       * @see {@link BaseMixin#filterHandler filterHandler}\n       * @example\n       * // filter by a single string\n       * chart.filter('Sunday');\n       * // filter by a single age\n       * chart.filter(18);\n       * // filter by a set of states\n       * chart.filter([['MA', 'TX', 'ND', 'WA']]);\n       * // filter by range -- note the use of filters.RangedFilter, which is different\n       * // from the syntax for filtering a crossfilter dimension directly, dimension.filter([15,20])\n       * chart.filter(filters.RangedFilter(15,20));\n       * @param {*} [filter]\n       * @returns {BaseMixin}\n       */\n\n    }, {\n      key: \"filter\",\n      value: function filter(_filter) {\n        var _this8 = this;\n\n        if (!arguments.length) {\n          return this._filters.length > 0 ? this._filters[0] : null;\n        }\n\n        var filters = this._filters;\n\n        if (_filter instanceof Array && _filter[0] instanceof Array && !_filter.isFiltered) {\n          // toggle each filter\n          _filter[0].forEach(function (f) {\n            if (_this8._hasFilterHandler(filters, f)) {\n              filters = _this8._removeFilterHandler(filters, f);\n            } else {\n              filters = _this8._addFilterHandler(filters, f);\n            }\n          });\n        } else if (_filter === null) {\n          filters = this._resetFilterHandler(filters);\n        } else {\n          if (this._hasFilterHandler(filters, _filter)) {\n            filters = this._removeFilterHandler(filters, _filter);\n          } else {\n            filters = this._addFilterHandler(filters, _filter);\n          }\n        }\n\n        this._filters = this.applyFilters(filters);\n\n        this._invokeFilteredListener(_filter);\n\n        if (this._root !== null && this.hasFilter()) {\n          this.turnOnControls();\n        } else {\n          this.turnOffControls();\n        }\n\n        return this;\n      }\n      /**\n       * Returns all current filters. This method does not perform defensive cloning of the internal\n       * filter array before returning, therefore any modification of the returned array will effect the\n       * chart's internal filter storage.\n       * @returns {Array<*>}\n       */\n\n    }, {\n      key: \"filters\",\n      value: function filters() {\n        return this._filters;\n      }\n    }, {\n      key: \"highlightSelected\",\n      value: function highlightSelected(e) {\n        d3Selection.select(e).classed(constants.SELECTED_CLASS, true);\n        d3Selection.select(e).classed(constants.DESELECTED_CLASS, false);\n      }\n    }, {\n      key: \"fadeDeselected\",\n      value: function fadeDeselected(e) {\n        d3Selection.select(e).classed(constants.SELECTED_CLASS, false);\n        d3Selection.select(e).classed(constants.DESELECTED_CLASS, true);\n      }\n    }, {\n      key: \"resetHighlight\",\n      value: function resetHighlight(e) {\n        d3Selection.select(e).classed(constants.SELECTED_CLASS, false);\n        d3Selection.select(e).classed(constants.DESELECTED_CLASS, false);\n      }\n      /**\n       * This function is passed to d3 as the onClick handler for each chart. The default behavior is to\n       * filter on the clicked datum (passed to the callback) and redraw the chart group.\n       *\n       * This function can be replaced in order to change the click behavior (but first look at\n       * @example\n       * var oldHandler = chart.onClick;\n       * chart.onClick = function(datum) {\n       *   // use datum.\n       * @param {*} datum\n       * @return {undefined}\n       */\n\n    }, {\n      key: \"onClick\",\n      value: function onClick(datum) {\n        var _this9 = this;\n\n        var filter = this.keyAccessor()(datum);\n        events.trigger(function () {\n          _this9.filter(filter);\n\n          _this9.redrawGroup();\n        });\n      }\n      /**\n       * Set or get the filter handler. The filter handler is a function that performs the filter action\n       * on a specific dimension. Using a custom filter handler allows you to perform additional logic\n       * before or after filtering.\n       * @see {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#dimension_filter crossfilter.dimension.filter}\n       * @example\n       * // the default filter handler handles all possible cases for the charts in dc.js\n       * // you can replace it with something more specialized for your own chart\n       * chart.filterHandler(function (dimension, filters) {\n       *     if (filters.length === 0) {\n       *         // the empty case (no filtering)\n       *         dimension.filter(null);\n       *     } else if (filters.length === 1 && !filters[0].isFiltered) {\n       *         // single value and not a function-based filter\n       *         dimension.filterExact(filters[0]);\n       *     } else if (filters.length === 1 && filters[0].filterType === 'RangedFilter') {\n       *         // single range-based filter\n       *         dimension.filterRange(filters[0]);\n       *     } else {\n       *         // an array of values, or an array of filter objects\n       *         dimension.filterFunction(function (d) {\n       *             for (var i = 0; i < filters.length; i++) {\n       *                 var filter = filters[i];\n       *                 if (filter.isFiltered && filter.isFiltered(d)) {\n       *                     return true;\n       *                 } else if (filter <= d && filter >= d) {\n       *                     return true;\n       *                 }\n       *             }\n       *             return false;\n       *         });\n       *     }\n       *     return filters;\n       * });\n       *\n       * // custom filter handler\n       * chart.filterHandler(function(dimension, filter){\n       *     var newFilter = filter + 10;\n       *     dimension.filter(newFilter);\n       *     return newFilter; // set the actual filter value to the new value\n       * });\n       * @param {Function} [filterHandler]\n       * @returns {Function|BaseMixin}\n       */\n\n    }, {\n      key: \"filterHandler\",\n      value: function filterHandler(_filterHandler) {\n        if (!arguments.length) {\n          return this._filterHandler;\n        }\n\n        this._filterHandler = _filterHandler;\n        return this;\n      } // abstract function stub\n\n    }, {\n      key: \"_doRender\",\n      value: function _doRender() {\n        // do nothing in base, should be overridden by sub-function\n        return this;\n      }\n    }, {\n      key: \"_doRedraw\",\n      value: function _doRedraw() {\n        // do nothing in base, should be overridden by sub-function\n        return this;\n      }\n    }, {\n      key: \"legendables\",\n      value: function legendables() {\n        // do nothing in base, should be overridden by sub-function\n        return [];\n      }\n    }, {\n      key: \"legendHighlight\",\n      value: function legendHighlight() {// do nothing in base, should be overridden by sub-function\n      }\n    }, {\n      key: \"legendReset\",\n      value: function legendReset() {// do nothing in base, should be overridden by sub-function\n      }\n    }, {\n      key: \"legendToggle\",\n      value: function legendToggle() {// do nothing in base, should be overriden by sub-function\n      }\n    }, {\n      key: \"isLegendableHidden\",\n      value: function isLegendableHidden() {\n        // do nothing in base, should be overridden by sub-function\n        return false;\n      }\n      /**\n       * Set or get the key accessor function. The key accessor function is used to retrieve the key\n       * value from the crossfilter group. Key values are used differently in different charts, for\n       * example keys correspond to slices in a pie chart and x axis positions in a grid coordinate chart.\n       * @example\n       * // default key accessor\n       * chart.keyAccessor(function(d) { return d.key; });\n       * // custom key accessor for a multi-value crossfilter reduction\n       * chart.keyAccessor(function(p) { return p.value.absGain; });\n       * @param {Function} [keyAccessor]\n       * @returns {Function|BaseMixin}\n       */\n\n    }, {\n      key: \"keyAccessor\",\n      value: function keyAccessor(_keyAccessor) {\n        if (!arguments.length) {\n          return this._keyAccessor;\n        }\n\n        this._keyAccessor = _keyAccessor;\n        return this;\n      }\n      /**\n       * Set or get the value accessor function. The value accessor function is used to retrieve the\n       * value from the crossfilter group. Group values are used differently in different charts, for\n       * example values correspond to slice sizes in a pie chart and y axis positions in a grid\n       * coordinate chart.\n       * @example\n       * // default value accessor\n       * chart.valueAccessor(function(d) { return d.value; });\n       * // custom value accessor for a multi-value crossfilter reduction\n       * chart.valueAccessor(function(p) { return p.value.percentageGain; });\n       * @param {Function} [valueAccessor]\n       * @returns {Function|BaseMixin}\n       */\n\n    }, {\n      key: \"valueAccessor\",\n      value: function valueAccessor(_valueAccessor) {\n        if (!arguments.length) {\n          return this._valueAccessor;\n        }\n\n        this._valueAccessor = _valueAccessor;\n        return this;\n      }\n      /**\n       * Set or get the label function. The chart class will use this function to render labels for each\n       * child element in the chart, e.g. slices in a pie chart or bubbles in a bubble chart. Not every\n       * chart supports the label function, for example line chart does not use this function\n       * at all. By default, enables labels; pass false for the second parameter if this is not desired.\n       * @example\n       * // default label function just return the key\n       * chart.label(function(d) { return d.key; });\n       * // label function has access to the standard d3 data binding and can get quite complicated\n       * chart.label(function(d) { return d.data.key + '(' + Math.floor(d.data.value / all.value() * 100) + '%)'; });\n       * @param {Function} [labelFunction]\n       * @param {Boolean} [enableLabels=true]\n       * @returns {Function|BaseMixin}\n       */\n\n    }, {\n      key: \"label\",\n      value: function label(labelFunction, enableLabels) {\n        if (!arguments.length) {\n          return this._label;\n        }\n\n        this._label = labelFunction;\n\n        if (enableLabels === undefined || enableLabels) {\n          this._renderLabel = true;\n        }\n\n        return this;\n      }\n      /**\n       * Turn on/off label rendering\n       * @param {Boolean} [renderLabel=false]\n       * @returns {Boolean|BaseMixin}\n       */\n\n    }, {\n      key: \"renderLabel\",\n      value: function renderLabel(_renderLabel) {\n        if (!arguments.length) {\n          return this._renderLabel;\n        }\n\n        this._renderLabel = _renderLabel;\n        return this;\n      }\n      /**\n       * Set or get the title function. The chart class will use this function to render the SVGElement title\n       * (usually interpreted by browser as tooltips) for each child element in the chart, e.g. a slice\n       * in a pie chart or a bubble in a bubble chart. Almost every chart supports the title function;\n       * however in grid coordinate charts you need to turn off the brush in order to see titles, because\n       * otherwise the brush layer will block tooltip triggering.\n       * @example\n       * // default title function shows \"key: value\"\n       * chart.title(function(d) { return d.key + ': ' + d.value; });\n       * // title function has access to the standard d3 data binding and can get quite complicated\n       * chart.title(function(p) {\n       *    return p.key.getFullYear()\n       *        + '\\n'\n       *        + 'Index Gain: ' + numberFormat(p.value.absGain) + '\\n'\n       *        + 'Index Gain in Percentage: ' + numberFormat(p.value.percentageGain) + '%\\n'\n       *        + 'Fluctuation / Index Ratio: ' + numberFormat(p.value.fluctuationPercentage) + '%';\n       * });\n       * @param {Function} [titleFunction]\n       * @returns {Function|BaseMixin}\n       */\n\n    }, {\n      key: \"title\",\n      value: function title(titleFunction) {\n        if (!arguments.length) {\n          return this._title;\n        }\n\n        this._title = titleFunction;\n        return this;\n      }\n      /**\n       * Turn on/off title rendering, or return the state of the render title flag if no arguments are\n       * given.\n       * @param {Boolean} [renderTitle=true]\n       * @returns {Boolean|BaseMixin}\n       */\n\n    }, {\n      key: \"renderTitle\",\n      value: function renderTitle(_renderTitle) {\n        if (!arguments.length) {\n          return this._renderTitle;\n        }\n\n        this._renderTitle = _renderTitle;\n        return this;\n      }\n      /**\n       * Get or set the chart group to which this chart belongs. Chart groups are rendered or redrawn\n       * together since it is expected they share the same underlying crossfilter data set.\n       * @param {String} [chartGroup]\n       * @returns {String|BaseMixin}\n       */\n\n    }, {\n      key: \"chartGroup\",\n      value: function chartGroup(_chartGroup) {\n        if (!arguments.length) {\n          return this._chartGroup;\n        }\n\n        if (!this._isChild) {\n          deregisterChart(this, this._chartGroup);\n        }\n\n        this._chartGroup = _chartGroup;\n\n        if (!this._isChild) {\n          registerChart(this, this._chartGroup);\n        }\n\n        return this;\n      }\n      /**\n       * Expire the internal chart cache. dc charts cache some data internally on a per chart basis to\n       * speed up rendering and avoid unnecessary calculation; however it might be useful to clear the\n       * cache if you have changed state which will affect rendering.  For example, if you invoke\n       * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#crossfilter_add crossfilter.add}\n       * function or reset group or dimension after rendering, it is a good idea to\n       * clear the cache to make sure charts are rendered properly.\n       * @returns {BaseMixin}\n       */\n\n    }, {\n      key: \"expireCache\",\n      value: function expireCache() {\n        // do nothing in base, should be overridden by sub-function\n        return this;\n      }\n      /**\n       * Attach a Legend widget to this chart. The legend widget will automatically draw legend labels\n       * based on the color setting and names associated with each group.\n       * @example\n       * chart.legend(new Legend().x(400).y(10).itemHeight(13).gap(5))\n       * @param {Legend} [legend]\n       * @returns {Legend|BaseMixin}\n       */\n\n    }, {\n      key: \"legend\",\n      value: function legend(_legend) {\n        if (!arguments.length) {\n          return this._legend;\n        }\n\n        this._legend = _legend;\n\n        this._legend.parent(this);\n\n        return this;\n      }\n      /**\n       * Returns the internal numeric ID of the chart.\n       * @returns {String}\n       */\n\n    }, {\n      key: \"chartID\",\n      value: function chartID() {\n        return this.__dcFlag__;\n      }\n      /**\n       * Set chart options using a configuration object. Each key in the object will cause the method of\n       * the same name to be called with the value to set that attribute for the chart.\n       * @example\n       * chart.options({dimension: myDimension, group: myGroup});\n       * @param {{}} opts\n       * @returns {BaseMixin}\n       */\n\n    }, {\n      key: \"options\",\n      value: function options(opts) {\n        var applyOptions = ['anchor', 'group', 'xAxisLabel', 'yAxisLabel', 'stack', 'title', 'point', 'getColor', 'overlayGeoJson'];\n\n        for (var o in opts) {\n          if (typeof this[o] === 'function') {\n            if (opts[o] instanceof Array && applyOptions.indexOf(o) !== -1) {\n              this[o].apply(this, opts[o]);\n            } else {\n              this[o].call(this, opts[o]);\n            }\n          } else {\n            logger.debug(\"Not a valid option setter name: \".concat(o));\n          }\n        }\n\n        return this;\n      }\n      /**\n       * All dc chart instance supports the following listeners.\n       * Supports the following events:\n       * * `renderlet` - This listener function will be invoked after transitions after redraw and render. Replaces the\n       * deprecated {@link BaseMixin#renderlet renderlet} method.\n       * * `pretransition` - Like `.on('renderlet', ...)` but the event is fired before transitions start.\n       * * `preRender` - This listener function will be invoked before chart rendering.\n       * * `postRender` - This listener function will be invoked after chart finish rendering including\n       * all renderlets' logic.\n       * * `preRedraw` - This listener function will be invoked before chart redrawing.\n       * * `postRedraw` - This listener function will be invoked after chart finish redrawing\n       * including all renderlets' logic.\n       * * `filtered` - This listener function will be invoked after a filter is applied, added or removed.\n       * * `zoomed` - This listener function will be invoked after a zoom is triggered.\n       * @see {@link https://github.com/d3/d3-dispatch/blob/master/README.md#dispatch_on d3.dispatch.on}\n       * @example\n       * .on('renderlet', function(chart, filter){...})\n       * .on('pretransition', function(chart, filter){...})\n       * .on('preRender', function(chart){...})\n       * .on('postRender', function(chart){...})\n       * .on('preRedraw', function(chart){...})\n       * .on('postRedraw', function(chart){...})\n       * .on('filtered', function(chart, filter){...})\n       * .on('zoomed', function(chart, filter){...})\n       * @param {String} event\n       * @param {Function} listener\n       * @returns {BaseMixin}\n       */\n\n    }, {\n      key: \"on\",\n      value: function on(event, listener) {\n        this._listeners.on(event, listener);\n\n        return this;\n      }\n      /**\n       * A renderlet is similar to an event listener on rendering event. Multiple renderlets can be added\n       * to an individual chart.  Each time a chart is rerendered or redrawn the renderlets are invoked\n       * right after the chart finishes its transitions, giving you a way to modify the SVGElements.\n       * Renderlet functions take the chart instance as the only input parameter and you can\n       * use the dc API or use raw d3 to achieve pretty much any effect.\n       *\n       * Use {@link BaseMixin#on on} with a 'renderlet' prefix.\n       * Generates a random key for the renderlet, which makes it hard to remove.\n       * @deprecated chart.renderlet has been deprecated. Please use chart.on(\"renderlet.<renderletKey>\", renderletFunction)\n       * @example\n       * // do this instead of .renderlet(function(chart) { ... })\n       * chart.on(\"renderlet\", function(chart){\n       *     // mix of dc API and d3 manipulation\n       *     chart.select('g.y').style('display', 'none');\n       *     // its a closure so you can also access other chart variable available in the closure scope\n       *     moveChart.filter(chart.filter());\n       * });\n       * @param {Function} renderletFunction\n       * @returns {BaseMixin}\n       */\n\n    }, {\n      key: \"renderlet\",\n      value: function renderlet(renderletFunction) {\n        logger.warnOnce('chart.renderlet has been deprecated. Please use chart.on(\"renderlet.<renderletKey>\", renderletFunction)');\n        this.on(\"renderlet.\".concat(utils.uniqueId()), renderletFunction);\n        return this;\n      }\n    }]);\n\n    return BaseMixin;\n  }();\n\n  var baseMixin = function baseMixin() {\n    return new BaseMixin();\n  };\n  /**\n   * The Color Mixin is an abstract chart functional class providing universal coloring support\n   * as a mix-in for any concrete chart implementation.\n   * @mixin ColorMixin\n   * @param {Object} Base\n   * @returns {ColorMixin}\n   */\n\n\n  var ColorMixin = function ColorMixin(Base) {\n    return /*#__PURE__*/function (_Base) {\n      _inherits(_class, _Base);\n\n      var _super3 = _createSuper(_class);\n\n      function _class() {\n        var _this10;\n\n        _classCallCheck(this, _class);\n\n        _this10 = _super3.call(this);\n        _this10._colors = d3Scale.scaleOrdinal(config.defaultColors());\n\n        _this10._colorAccessor = function (d) {\n          return _this10.keyAccessor()(d);\n        };\n\n        _this10._colorCalculator = undefined;\n        {\n          var chart = _assertThisInitialized(_this10); // ES6: this method is called very differently from stack-mixin and derived charts\n          // Removing and placing it as a member method is tricky\n\n          /**\n               * Get the color for the datum d and counter i. This is used internally by charts to retrieve a color.\n               * @method getColor\n               * @memberof ColorMixin\n               * @instance\n               * @param {*} d\n               * @param {Number} [i]\n               * @returns {String}\n               */\n\n\n          chart.getColor = function (d, i) {\n            return chart._colorCalculator ? chart._colorCalculator.call(this, d, i) : chart._colors(chart._colorAccessor.call(this, d, i));\n          };\n        }\n        return _this10;\n      }\n      /**\n           * Set the domain by determining the min and max values as retrieved by\n           * {@link ColorMixin#colorAccessor .colorAccessor} over the chart's dataset.\n           * @memberof ColorMixin\n           * @instance\n           * @returns {ColorMixin}\n           */\n\n\n      _createClass(_class, [{\n        key: \"calculateColorDomain\",\n        value: function calculateColorDomain() {\n          var newDomain = [d3Array.min(this.data(), this.colorAccessor()), d3Array.max(this.data(), this.colorAccessor())];\n\n          this._colors.domain(newDomain);\n\n          return this;\n        }\n        /**\n             * Retrieve current color scale or set a new color scale. This methods accepts any function that\n             * operates like a d3 scale.\n             * @memberof ColorMixin\n             * @instance\n             * @see {@link https://github.com/d3/d3-scale/blob/master/README.md d3.scale}\n             * @example\n             * // alternate categorical scale\n             * chart.colors(d3.scale.category20b());\n             * // ordinal scale\n             * chart.colors(d3.scaleOrdinal().range(['red','green','blue']));\n             * // convenience method, the same as above\n             * chart.ordinalColors(['red','green','blue']);\n             * // set a linear scale\n             * chart.linearColors([\"#4575b4\", \"#ffffbf\", \"#a50026\"]);\n             * @param {d3.scale} [colorScale=d3.scaleOrdinal(d3.schemeCategory20c)]\n             * @returns {d3.scale|ColorMixin}\n             */\n\n      }, {\n        key: \"colors\",\n        value: function colors(colorScale) {\n          if (!arguments.length) {\n            return this._colors;\n          }\n\n          if (colorScale instanceof Array) {\n            this._colors = d3Scale.scaleQuantize().range(colorScale); // deprecated legacy support, note: this fails for ordinal domains\n          } else {\n            this._colors = typeof colorScale === 'function' ? colorScale : utils.constant(colorScale);\n          }\n\n          return this;\n        }\n        /**\n             * Convenience method to set the color scale to\n             * {@link https://github.com/d3/d3-scale/blob/master/README.md#ordinal-scales d3.scaleOrdinal} with\n             * range `r`.\n             * @memberof ColorMixin\n             * @instance\n             * @param {Array<String>} r\n             * @returns {ColorMixin}\n             */\n\n      }, {\n        key: \"ordinalColors\",\n        value: function ordinalColors(r) {\n          return this.colors(d3Scale.scaleOrdinal().range(r));\n        }\n        /**\n             * Convenience method to set the color scale to an Hcl interpolated linear scale with range `r`.\n             * @memberof ColorMixin\n             * @instance\n             * @param {Array<Number>} r\n             * @returns {ColorMixin}\n             */\n\n      }, {\n        key: \"linearColors\",\n        value: function linearColors(r) {\n          return this.colors(d3Scale.scaleLinear().range(r).interpolate(d3Interpolate.interpolateHcl));\n        }\n        /**\n             * Set or the get color accessor function. This function will be used to map a data point in a\n             * crossfilter group to a color value on the color scale. The default function uses the key\n             * accessor.\n             * @memberof ColorMixin\n             * @instance\n             * @example\n             * // default index based color accessor\n             * .colorAccessor(function (d, i){return i;})\n             * // color accessor for a multi-value crossfilter reduction\n             * .colorAccessor(function (d){return d.value.absGain;})\n             * @param {Function} [colorAccessor]\n             * @returns {Function|ColorMixin}\n             */\n\n      }, {\n        key: \"colorAccessor\",\n        value: function colorAccessor(_colorAccessor) {\n          if (!arguments.length) {\n            return this._colorAccessor;\n          }\n\n          this._colorAccessor = _colorAccessor;\n          return this;\n        }\n        /**\n             * Set or get the current domain for the color mapping function. The domain must be supplied as an\n             * array.\n             *\n             * Note: previously this method accepted a callback function. Instead you may use a custom scale\n             * set by {@link ColorMixin#colors .colors}.\n             * @memberof ColorMixin\n             * @instance\n             * @param {Array<String>} [domain]\n             * @returns {Array<String>|ColorMixin}\n             */\n\n      }, {\n        key: \"colorDomain\",\n        value: function colorDomain(domain) {\n          if (!arguments.length) {\n            return this._colors.domain();\n          }\n\n          this._colors.domain(domain);\n\n          return this;\n        }\n        /**\n             * Overrides the color selection algorithm, replacing it with a simple function.\n             *\n             * Normally colors will be determined by calling the `colorAccessor` to get a value, and then passing that\n             * value through the `colorScale`.\n             *\n             * But sometimes it is difficult to get a color scale to produce the desired effect. The `colorCalculator`\n             * takes the datum and index and returns a color directly.\n             * @memberof ColorMixin\n             * @instance\n             * @param {*} [colorCalculator]\n             * @returns {Function|ColorMixin}\n             */\n\n      }, {\n        key: \"colorCalculator\",\n        value: function colorCalculator(_colorCalculator) {\n          if (!arguments.length) {\n            return this._colorCalculator || this.getColor;\n          }\n\n          this._colorCalculator = _colorCalculator;\n          return this;\n        }\n      }]);\n\n      return _class;\n    }(Base);\n  };\n  /**\n   * This Mixin provides reusable functionalities for any chart that needs to visualize data using bubbles.\n   * @mixin BubbleMixin\n   * @mixes ColorMixin\n   * @param {Object} Base\n   * @returns {BubbleMixin}\n   */\n\n\n  var BubbleMixin = function BubbleMixin(Base) {\n    return /*#__PURE__*/function (_ColorMixin) {\n      _inherits(_class2, _ColorMixin);\n\n      var _super4 = _createSuper(_class2);\n\n      function _class2() {\n        var _this11;\n\n        _classCallCheck(this, _class2);\n\n        _this11 = _super4.call(this);\n        _this11._maxBubbleRelativeSize = 0.3;\n        _this11._minRadiusWithLabel = 10;\n        _this11._sortBubbleSize = false;\n        _this11._elasticRadius = false;\n        _this11._excludeElasticZero = true; // These cane be used by derived classes as well, so member status\n\n        _this11.BUBBLE_NODE_CLASS = 'node';\n        _this11.BUBBLE_CLASS = 'bubble';\n        _this11.MIN_RADIUS = 10;\n\n        _this11.renderLabel(true);\n\n        _this11.data(function (group) {\n          var data = group.all();\n\n          if (_this11._keyboardAccessible) {\n            // sort based on the x value (key)\n            data.sort(function (a, b) {\n              return d3Array.ascending(_this11.keyAccessor()(a), _this11.keyAccessor()(b));\n            });\n          }\n\n          if (_this11._sortBubbleSize) {\n            // sort descending so smaller bubbles are on top\n            var radiusAccessor = _this11.radiusValueAccessor();\n\n            data.sort(function (a, b) {\n              return d3Array.descending(radiusAccessor(a), radiusAccessor(b));\n            });\n          }\n\n          return data;\n        });\n\n        _this11._r = d3Scale.scaleLinear().domain([0, 100]);\n        return _this11;\n      }\n\n      _createClass(_class2, [{\n        key: \"_rValueAccessor\",\n        value: function _rValueAccessor(d) {\n          return d.r;\n        }\n        /**\n             * Get or set the bubble radius scale. By default the bubble chart uses\n             * {@link https://github.com/d3/d3-scale/blob/master/README.md#scaleLinear d3.scaleLinear().domain([0, 100])}\n             * as its radius scale.\n             * @memberof BubbleMixin\n             * @instance\n             * @see {@link https://github.com/d3/d3-scale/blob/master/README.md d3.scale}\n             * @param {d3.scale} [bubbleRadiusScale=d3.scaleLinear().domain([0, 100])]\n             * @returns {d3.scale|BubbleMixin}\n             */\n\n      }, {\n        key: \"r\",\n        value: function r(bubbleRadiusScale) {\n          if (!arguments.length) {\n            return this._r;\n          }\n\n          this._r = bubbleRadiusScale;\n          return this;\n        }\n        /**\n             * Turn on or off the elastic bubble radius feature, or return the value of the flag. If this\n             * feature is turned on, then bubble radii will be automatically rescaled to fit the chart better.\n             * @memberof BubbleMixin\n             * @instance\n             * @param {Boolean} [elasticRadius=false]\n             * @returns {Boolean|BubbleChart}\n             */\n\n      }, {\n        key: \"elasticRadius\",\n        value: function elasticRadius(_elasticRadius) {\n          if (!arguments.length) {\n            return this._elasticRadius;\n          }\n\n          this._elasticRadius = _elasticRadius;\n          return this;\n        }\n      }, {\n        key: \"calculateRadiusDomain\",\n        value: function calculateRadiusDomain() {\n          if (this._elasticRadius) {\n            this.r().domain([this.rMin(), this.rMax()]);\n          }\n        }\n        /**\n             * Get or set the radius value accessor function. If set, the radius value accessor function will\n             * be used to retrieve a data value for each bubble. The data retrieved then will be mapped using\n             * the r scale to the actual bubble radius. This allows you to encode a data dimension using bubble\n             * size.\n             * @memberof BubbleMixin\n             * @instance\n             * @param {Function} [radiusValueAccessor]\n             * @returns {Function|BubbleMixin}\n             */\n\n      }, {\n        key: \"radiusValueAccessor\",\n        value: function radiusValueAccessor(_radiusValueAccessor) {\n          if (!arguments.length) {\n            return this._rValueAccessor;\n          }\n\n          this._rValueAccessor = _radiusValueAccessor;\n          return this;\n        }\n      }, {\n        key: \"rMin\",\n        value: function rMin() {\n          var values = this.data().map(this.radiusValueAccessor());\n\n          if (this._excludeElasticZero) {\n            values = values.filter(function (value) {\n              return value > 0;\n            });\n          }\n\n          return d3Array.min(values);\n        }\n      }, {\n        key: \"rMax\",\n        value: function rMax() {\n          var _this12 = this;\n\n          return d3Array.max(this.data(), function (e) {\n            return _this12.radiusValueAccessor()(e);\n          });\n        }\n      }, {\n        key: \"bubbleR\",\n        value: function bubbleR(d) {\n          var value = this.radiusValueAccessor()(d);\n          var r = this.r()(value);\n\n          if (isNaN(r) || value <= 0) {\n            r = 0;\n          }\n\n          return r;\n        }\n      }, {\n        key: \"_labelFunction\",\n        value: function _labelFunction(d) {\n          return this.label()(d);\n        }\n      }, {\n        key: \"_shouldLabel\",\n        value: function _shouldLabel(d) {\n          return this.bubbleR(d) > this._minRadiusWithLabel;\n        }\n      }, {\n        key: \"_labelOpacity\",\n        value: function _labelOpacity(d) {\n          return this._shouldLabel(d) ? 1 : 0;\n        }\n      }, {\n        key: \"_labelPointerEvent\",\n        value: function _labelPointerEvent(d) {\n          return this._shouldLabel(d) ? 'all' : 'none';\n        }\n      }, {\n        key: \"_doRenderLabel\",\n        value: function _doRenderLabel(bubbleGEnter) {\n          var _this13 = this;\n\n          if (this.renderLabel()) {\n            var label = bubbleGEnter.select('text');\n\n            if (label.empty()) {\n              label = bubbleGEnter.append('text').attr('text-anchor', 'middle').attr('dy', '.3em').on('click', d3compat.eventHandler(function (d) {\n                return _this13.onClick(d);\n              }));\n            }\n\n            label.attr('opacity', 0).attr('pointer-events', function (d) {\n              return _this13._labelPointerEvent(d);\n            }).text(function (d) {\n              return _this13._labelFunction(d);\n            });\n            transition(label, this.transitionDuration(), this.transitionDelay()).attr('opacity', function (d) {\n              return _this13._labelOpacity(d);\n            });\n          }\n        }\n      }, {\n        key: \"doUpdateLabels\",\n        value: function doUpdateLabels(bubbleGEnter) {\n          var _this14 = this;\n\n          if (this.renderLabel()) {\n            var labels = bubbleGEnter.select('text').attr('pointer-events', function (d) {\n              return _this14._labelPointerEvent(d);\n            }).text(function (d) {\n              return _this14._labelFunction(d);\n            });\n            transition(labels, this.transitionDuration(), this.transitionDelay()).attr('opacity', function (d) {\n              return _this14._labelOpacity(d);\n            });\n          }\n        }\n      }, {\n        key: \"_titleFunction\",\n        value: function _titleFunction(d) {\n          return this.title()(d);\n        }\n      }, {\n        key: \"_doRenderTitles\",\n        value: function _doRenderTitles(g) {\n          var _this15 = this;\n\n          if (this.renderTitle()) {\n            var title = g.select('title');\n\n            if (title.empty()) {\n              g.append('title').text(function (d) {\n                return _this15._titleFunction(d);\n              });\n            }\n          }\n        }\n      }, {\n        key: \"doUpdateTitles\",\n        value: function doUpdateTitles(g) {\n          var _this16 = this;\n\n          if (this.renderTitle()) {\n            g.select('title').text(function (d) {\n              return _this16._titleFunction(d);\n            });\n          }\n        }\n        /**\n             * Turn on or off the bubble sorting feature, or return the value of the flag. If enabled,\n             * bubbles will be sorted by their radius, with smaller bubbles in front.\n             * @memberof BubbleChart\n             * @instance\n             * @param {Boolean} [sortBubbleSize=false]\n             * @returns {Boolean|BubbleChart}\n             */\n\n      }, {\n        key: \"sortBubbleSize\",\n        value: function sortBubbleSize(_sortBubbleSize) {\n          if (!arguments.length) {\n            return this._sortBubbleSize;\n          }\n\n          this._sortBubbleSize = _sortBubbleSize;\n          return this;\n        }\n        /**\n             * Get or set the minimum radius. This will be used to initialize the radius scale's range.\n             * @memberof BubbleMixin\n             * @instance\n             * @param {Number} [radius=10]\n             * @returns {Number|BubbleMixin}\n             */\n\n      }, {\n        key: \"minRadius\",\n        value: function minRadius(radius) {\n          if (!arguments.length) {\n            return this.MIN_RADIUS;\n          }\n\n          this.MIN_RADIUS = radius;\n          return this;\n        }\n        /**\n             * Get or set the minimum radius for label rendering. If a bubble's radius is less than this value\n             * then no label will be rendered.\n             * @memberof BubbleMixin\n             * @instance\n             * @param {Number} [radius=10]\n             * @returns {Number|BubbleMixin}\n             */\n\n      }, {\n        key: \"minRadiusWithLabel\",\n        value: function minRadiusWithLabel(radius) {\n          if (!arguments.length) {\n            return this._minRadiusWithLabel;\n          }\n\n          this._minRadiusWithLabel = radius;\n          return this;\n        }\n        /**\n             * Get or set the maximum relative size of a bubble to the length of x axis. This value is useful\n             * when the difference in radius between bubbles is too great.\n             * @memberof BubbleMixin\n             * @instance\n             * @param {Number} [relativeSize=0.3]\n             * @returns {Number|BubbleMixin}\n             */\n\n      }, {\n        key: \"maxBubbleRelativeSize\",\n        value: function maxBubbleRelativeSize(relativeSize) {\n          if (!arguments.length) {\n            return this._maxBubbleRelativeSize;\n          }\n\n          this._maxBubbleRelativeSize = relativeSize;\n          return this;\n        }\n        /**\n         * Should the chart exclude zero when calculating elastic bubble radius?\n         * @memberof BubbleMixin\n         * @instance\n         * @param  {Boolean} [excludeZero=true]\n         * @returns {Boolean|BubbleMixin}\n         */\n\n      }, {\n        key: \"excludeElasticZero\",\n        value: function excludeElasticZero(excludeZero) {\n          if (!arguments.length) {\n            return this._excludeElasticZero;\n          }\n\n          this._excludeElasticZero = excludeZero;\n          return this;\n        }\n      }, {\n        key: \"fadeDeselectedArea\",\n        value: function fadeDeselectedArea(selection) {\n          if (this.hasFilter()) {\n            var chart = this;\n            this.selectAll(\"g.\".concat(chart.BUBBLE_NODE_CLASS)).each(function (d) {\n              if (chart.isSelectedNode(d)) {\n                chart.highlightSelected(this);\n              } else {\n                chart.fadeDeselected(this);\n              }\n            });\n          } else {\n            var _chart = this;\n\n            this.selectAll(\"g.\".concat(_chart.BUBBLE_NODE_CLASS)).each(function () {\n              _chart.resetHighlight(this);\n            });\n          }\n        }\n      }, {\n        key: \"isSelectedNode\",\n        value: function isSelectedNode(d) {\n          return this.hasFilter(d.key);\n        }\n      }, {\n        key: \"onClick\",\n        value: function onClick(d) {\n          var _this17 = this;\n\n          var filter = d.key;\n          events.trigger(function () {\n            _this17.filter(filter);\n\n            _this17.redrawGroup();\n          });\n        }\n      }]);\n\n      return _class2;\n    }(ColorMixin(Base));\n  };\n  /**\n   * Cap is a mixin that groups small data elements below a _cap_ into an *others* grouping for both the\n   * Row and Pie Charts.\n   *\n   * The top ordered elements in the group up to the cap amount will be kept in the chart, and the rest\n   * will be replaced with an *others* element, with value equal to the sum of the replaced values. The\n   * keys of the elements below the cap limit are recorded in order to filter by those keys when the\n   * others* element is clicked.\n   * @mixin CapMixin\n   * @param {Object} Base\n   * @returns {CapMixin}\n   */\n\n\n  var CapMixin = function CapMixin(Base) {\n    return /*#__PURE__*/function (_Base2) {\n      _inherits(_class3, _Base2);\n\n      var _super5 = _createSuper(_class3);\n\n      function _class3() {\n        var _this18;\n\n        _classCallCheck(this, _class3);\n\n        _this18 = _super5.call(this);\n        _this18._cap = Infinity;\n        _this18._takeFront = true;\n        _this18._othersLabel = 'Others';\n\n        _this18._othersGrouper = function (topItems, restItems) {\n          var restItemsSum = d3Array.sum(restItems, _this18.valueAccessor()),\n              restKeys = restItems.map(_this18.keyAccessor());\n\n          if (restItemsSum > 0) {\n            return topItems.concat([{\n              others: restKeys,\n              key: _this18.othersLabel(),\n              value: restItemsSum\n            }]);\n          }\n\n          return topItems;\n        }; // emulate old group.top(N) ordering\n\n\n        _this18.ordering(function (kv) {\n          return -kv.value;\n        }); // return N \"top\" groups, where N is the cap, sorted by baseMixin.ordering\n        // whether top means front or back depends on takeFront\n\n\n        _this18.data(function (group) {\n          if (_this18._cap === Infinity) {\n            return _this18._computeOrderedGroups(group.all());\n          } else {\n            var items = group.all(),\n                rest;\n            items = _this18._computeOrderedGroups(items); // sort by baseMixin.ordering\n\n            if (_this18._cap) {\n              if (_this18._takeFront) {\n                rest = items.slice(_this18._cap);\n                items = items.slice(0, _this18._cap);\n              } else {\n                var start = Math.max(0, items.length - _this18._cap);\n                rest = items.slice(0, start);\n                items = items.slice(start);\n              }\n            }\n\n            if (_this18._othersGrouper) {\n              return _this18._othersGrouper(items, rest);\n            }\n\n            return items;\n          }\n        });\n\n        return _this18;\n      }\n\n      _createClass(_class3, [{\n        key: \"cappedKeyAccessor\",\n        value: function cappedKeyAccessor(d, i) {\n          if (d.others) {\n            return d.key;\n          }\n\n          return this.keyAccessor()(d, i);\n        }\n      }, {\n        key: \"cappedValueAccessor\",\n        value: function cappedValueAccessor(d, i) {\n          if (d.others) {\n            return d.value;\n          }\n\n          return this.valueAccessor()(d, i);\n        }\n        /**\n             * Get or set the count of elements to that will be included in the cap. If there is an\n             * {@link CapMixin#othersGrouper othersGrouper}, any further elements will be combined in an\n             * extra element with its name determined by {@link CapMixin#othersLabel othersLabel}.\n             *\n             * As of dc.js 2.1 and onward, the capped charts use\n             * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#group_all group.all()}\n             * and {@link BaseMixin#ordering BaseMixin.ordering()} to determine the order of\n             * elements. Then `cap` and {@link CapMixin#takeFront takeFront} determine how many elements\n             * to keep, from which end of the resulting array.\n             *\n             * **Migration note:** Up through dc.js 2.0.*, capping used\n             * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#group_top group.top(N)},\n             * which selects the largest items according to\n             * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#group_order group.order()}.\n             * The chart then sorted the items according to {@link BaseMixin#ordering baseMixin.ordering()}.\n             * So the two values essentially had to agree, but if the `group.order()` was incorrect (it's\n             * easy to forget about), the wrong rows or slices would be displayed, in the correct order.\n             *\n             * If your chart previously relied on `group.order()`, use `chart.ordering()` instead. As of\n             * 2.1.5, the ordering defaults to sorting from greatest to least like `group.top(N)` did.\n             *\n             * If you want to cap by one ordering but sort by another, you can still do this by\n             * specifying your own {@link BaseMixin#data `.data()`} callback. For details, see the example\n             * {@link https://dc-js.github.io/dc.js/examples/cap-and-sort-differently.html Cap and Sort Differently}.\n             * @memberof CapMixin\n             * @instance\n             * @param {Number} [count=Infinity]\n             * @returns {Number|CapMixin}\n             */\n\n      }, {\n        key: \"cap\",\n        value: function cap(count) {\n          if (!arguments.length) {\n            return this._cap;\n          }\n\n          this._cap = count;\n          return this;\n        }\n        /**\n             * Get or set the direction of capping. If set, the chart takes the first\n             * {@link CapMixin#cap cap} elements from the sorted array of elements; otherwise\n             * it takes the last `cap` elements.\n             * @memberof CapMixin\n             * @instance\n             * @param {Boolean} [takeFront=true]\n             * @returns {Boolean|CapMixin}\n             */\n\n      }, {\n        key: \"takeFront\",\n        value: function takeFront(_takeFront) {\n          if (!arguments.length) {\n            return this._takeFront;\n          }\n\n          this._takeFront = _takeFront;\n          return this;\n        }\n        /**\n             * Get or set the label for *Others* slice when slices cap is specified.\n             * @memberof CapMixin\n             * @instance\n             * @param {String} [label=\"Others\"]\n             * @returns {String|CapMixin}\n             */\n\n      }, {\n        key: \"othersLabel\",\n        value: function othersLabel(label) {\n          if (!arguments.length) {\n            return this._othersLabel;\n          }\n\n          this._othersLabel = label;\n          return this;\n        }\n        /**\n             * Get or set the grouper function that will perform the insertion of data for the *Others* slice\n             * if the slices cap is specified. If set to a falsy value, no others will be added.\n             *\n             * The grouper function takes an array of included (\"top\") items, and an array of the rest of\n             * the items. By default the grouper function computes the sum of the rest.\n             * @memberof CapMixin\n             * @instance\n             * @example\n             * // Do not show others\n             * chart.othersGrouper(null);\n             * // Default others grouper\n             * chart.othersGrouper(function (topItems, restItems) {\n             *     var restItemsSum = d3.sum(restItems, _chart.valueAccessor()),\n             *         restKeys = restItems.map(_chart.keyAccessor());\n             *     if (restItemsSum > 0) {\n             *         return topItems.concat([{\n             *             others: restKeys,\n             *             key: _chart.othersLabel(),\n             *             value: restItemsSum\n             *         }]);\n             *     }\n             *     return topItems;\n             * });\n             * @param {Function} [grouperFunction]\n             * @returns {Function|CapMixin}\n             */\n\n      }, {\n        key: \"othersGrouper\",\n        value: function othersGrouper(grouperFunction) {\n          if (!arguments.length) {\n            return this._othersGrouper;\n          }\n\n          this._othersGrouper = grouperFunction;\n          return this;\n        }\n      }, {\n        key: \"onClick\",\n        value: function onClick(d) {\n          if (d.others) {\n            this.filter([d.others]);\n          }\n\n          _get(_getPrototypeOf(_class3.prototype), \"onClick\", this).call(this, d);\n        }\n      }]);\n\n      return _class3;\n    }(Base);\n  };\n  /**\n   * Margin is a mixin that provides margin utility functions for both the Row Chart and Coordinate Grid\n   * Charts.\n   * @mixin MarginMixin\n   * @param {Object} Base\n   * @returns {MarginMixin}\n   */\n\n\n  var MarginMixin = /*#__PURE__*/function (_BaseMixin) {\n    _inherits(MarginMixin, _BaseMixin);\n\n    var _super6 = _createSuper(MarginMixin);\n\n    function MarginMixin() {\n      var _this19;\n\n      _classCallCheck(this, MarginMixin);\n\n      _this19 = _super6.call(this);\n      _this19._margin = {\n        top: 10,\n        right: 50,\n        bottom: 30,\n        left: 30\n      };\n      return _this19;\n    }\n    /**\n     * Get or set the margins for a particular coordinate grid chart instance. The margins is stored as\n     * an associative Javascript array.\n     * @memberof MarginMixin\n     * @instance\n     * @example\n     * var leftMargin = chart.margins().left; // 30 by default\n     * chart.margins().left = 50;\n     * leftMargin = chart.margins().left; // now 50\n     * @param {{top: Number, right: Number, left: Number, bottom: Number}} [margins={top: 10, right: 50, bottom: 30, left: 30}]\n     * @returns {{top: Number, right: Number, left: Number, bottom: Number}|MarginMixin}\n     */\n\n\n    _createClass(MarginMixin, [{\n      key: \"margins\",\n      value: function margins(_margins) {\n        if (!arguments.length) {\n          return this._margin;\n        }\n\n        this._margin = _margins;\n        return this;\n      }\n      /**\n       * Effective width of the chart excluding margins (in pixels).\n       *\n       * @returns {number}\n       */\n\n    }, {\n      key: \"effectiveWidth\",\n      value: function effectiveWidth() {\n        return this.width() - this.margins().left - this.margins().right;\n      }\n      /**\n       * Effective height of the chart excluding margins (in pixels).\n       *\n       * @returns {number}\n       */\n\n    }, {\n      key: \"effectiveHeight\",\n      value: function effectiveHeight() {\n        return this.height() - this.margins().top - this.margins().bottom;\n      }\n    }]);\n\n    return MarginMixin;\n  }(BaseMixin);\n\n  var GRID_LINE_CLASS = 'grid-line';\n  var HORIZONTAL_CLASS = 'horizontal';\n  var VERTICAL_CLASS = 'vertical';\n  var Y_AXIS_LABEL_CLASS = 'y-axis-label';\n  var X_AXIS_LABEL_CLASS = 'x-axis-label';\n  var CUSTOM_BRUSH_HANDLE_CLASS = 'custom-brush-handle';\n  var DEFAULT_AXIS_LABEL_PADDING = 12;\n  /**\n   * Coordinate Grid is an abstract base chart designed to support a number of coordinate grid based\n   * concrete chart types, e.g. bar chart, line chart, and bubble chart.\n   * @mixin CoordinateGridMixin\n   * @mixes ColorMixin\n   * @mixes MarginMixin\n   */\n\n  var CoordinateGridMixin = /*#__PURE__*/function (_ColorMixin2) {\n    _inherits(CoordinateGridMixin, _ColorMixin2);\n\n    var _super7 = _createSuper(CoordinateGridMixin);\n\n    function CoordinateGridMixin() {\n      var _this20;\n\n      _classCallCheck(this, CoordinateGridMixin);\n\n      _this20 = _super7.call(this);\n\n      _this20.colors(d3Scale.scaleOrdinal(d3ScaleChromatic.schemeCategory10));\n\n      _this20._mandatoryAttributes().push('x');\n\n      _this20._parent = undefined;\n      _this20._g = undefined;\n      _this20._chartBodyG = undefined;\n      _this20._x = undefined;\n      _this20._origX = undefined; // Will hold original scale in case of zoom\n\n      _this20._xOriginalDomain = undefined;\n      _this20._xAxis = null;\n      _this20._xUnits = units.integers;\n      _this20._xAxisPadding = 0;\n      _this20._xAxisPaddingUnit = d3Time.timeDay;\n      _this20._xElasticity = false;\n      _this20._xAxisLabel = undefined;\n      _this20._xAxisLabelPadding = 0;\n      _this20._lastXDomain = undefined;\n      _this20._y = undefined;\n      _this20._yAxis = null;\n      _this20._yAxisPadding = 0;\n      _this20._yElasticity = false;\n      _this20._yAxisLabel = undefined;\n      _this20._yAxisLabelPadding = 0;\n      _this20._brush = d3Brush.brushX();\n      _this20._gBrush = undefined;\n      _this20._brushOn = true;\n      _this20._parentBrushOn = false;\n      _this20._round = undefined;\n      _this20._ignoreBrushEvents = false; // ignore when carrying out programmatic brush operations\n\n      _this20._renderHorizontalGridLine = false;\n      _this20._renderVerticalGridLine = false;\n      _this20._resizing = false;\n      _this20._unitCount = undefined;\n      _this20._zoomScale = [1, Infinity];\n      _this20._zoomOutRestrict = true;\n      _this20._zoom = d3Zoom.zoom().on('zoom', d3compat.eventHandler(function (d, evt) {\n        return _this20._onZoom(evt);\n      }));\n      _this20._nullZoom = d3Zoom.zoom().on('zoom', null);\n      _this20._hasBeenMouseZoomable = false;\n      _this20._ignoreZoomEvents = false; // ignore when carrying out programmatic zoom operations\n\n      _this20._rangeChart = undefined;\n      _this20._focusChart = undefined;\n      _this20._mouseZoomable = false;\n      _this20._clipPadding = 0;\n      _this20._fOuterRangeBandPadding = 0.5;\n      _this20._fRangeBandPadding = 0;\n      _this20._useRightYAxis = false;\n      _this20._useTopXAxis = false;\n      return _this20;\n    }\n    /**\n     * When changing the domain of the x or y scale, it is necessary to tell the chart to recalculate\n     * and redraw the axes. (`.rescale()` is called automatically when the x or y scale is replaced\n     * with {@link CoordinateGridMixin+x .x()} or {@link CoordinateGridMixin#y .y()}, and has\n     * no effect on elastic scales.)\n     * @returns {CoordinateGridMixin}\n     */\n\n\n    _createClass(CoordinateGridMixin, [{\n      key: \"rescale\",\n      value: function rescale() {\n        this._unitCount = undefined;\n        this._resizing = true;\n        return this;\n      }\n    }, {\n      key: \"resizing\",\n      value: function resizing(_resizing) {\n        if (!arguments.length) {\n          return this._resizing;\n        }\n\n        this._resizing = _resizing;\n        return this;\n      }\n      /**\n       * Get or set the range selection chart associated with this instance. Setting the range selection\n       * chart using this function will automatically update its selection brush when the current chart\n       * zooms in. In return the given range chart will also automatically attach this chart as its focus\n       * chart hence zoom in when range brush updates.\n       *\n       * Usually the range and focus charts will share a dimension. The range chart will set the zoom\n       * boundaries for the focus chart, so its dimension values must be compatible with the domain of\n       * the focus chart.\n       *\n       * See the [Nasdaq 100 Index](http://dc-js.github.com/dc.js/) example for this effect in action.\n       * @param {CoordinateGridMixin} [rangeChart]\n       * @returns {CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"rangeChart\",\n      value: function rangeChart(_rangeChart) {\n        if (!arguments.length) {\n          return this._rangeChart;\n        }\n\n        this._rangeChart = _rangeChart;\n\n        this._rangeChart.focusChart(this);\n\n        return this;\n      }\n      /**\n       * Get or set the scale extent for mouse zooms.\n       * @param {Array<Number|Date>} [extent=[1, Infinity]]\n       * @returns {Array<Number|Date>|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"zoomScale\",\n      value: function zoomScale(extent) {\n        if (!arguments.length) {\n          return this._zoomScale;\n        }\n\n        this._zoomScale = extent;\n        return this;\n      }\n      /**\n       * Get or set the zoom restriction for the chart. If true limits the zoom to origional domain of the chart.\n       * @param {Boolean} [zoomOutRestrict=true]\n       * @returns {Boolean|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"zoomOutRestrict\",\n      value: function zoomOutRestrict(_zoomOutRestrict) {\n        if (!arguments.length) {\n          return this._zoomOutRestrict;\n        }\n\n        this._zoomOutRestrict = _zoomOutRestrict;\n        return this;\n      }\n    }, {\n      key: \"_generateG\",\n      value: function _generateG(parent) {\n        if (parent === undefined) {\n          this._parent = this.svg();\n        } else {\n          this._parent = parent;\n        }\n\n        var href = window.location.href.split('#')[0];\n        this._g = this._parent.append('g');\n        this._chartBodyG = this._g.append('g').attr('class', 'chart-body').attr('transform', \"translate(\".concat(this.margins().left, \", \").concat(this.margins().top, \")\")).attr('clip-path', \"url(\".concat(href, \"#\").concat(this._getClipPathId(), \")\"));\n        return this._g;\n      }\n      /**\n       * Get or set the root g element. This method is usually used to retrieve the g element in order to\n       * overlay custom svg drawing programatically. **Caution**: The root g element is usually generated\n       * by dc.js internals, and resetting it might produce unpredictable result.\n       * @param {SVGElement} [gElement]\n       * @returns {SVGElement|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"g\",\n      value: function g(gElement) {\n        if (!arguments.length) {\n          return this._g;\n        }\n\n        this._g = gElement;\n        return this;\n      }\n      /**\n       * Set or get mouse zoom capability flag (default: false). When turned on the chart will be\n       * zoomable using the mouse wheel. If the range selector chart is attached zooming will also update\n       * the range selection brush on the associated range selector chart.\n       * @param {Boolean} [mouseZoomable=false]\n       * @returns {Boolean|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"mouseZoomable\",\n      value: function mouseZoomable(_mouseZoomable) {\n        if (!arguments.length) {\n          return this._mouseZoomable;\n        }\n\n        this._mouseZoomable = _mouseZoomable;\n        return this;\n      }\n      /**\n       * Retrieve the svg group for the chart body.\n       * @param {SVGElement} [chartBodyG]\n       * @returns {SVGElement}\n       */\n\n    }, {\n      key: \"chartBodyG\",\n      value: function chartBodyG(_chartBodyG) {\n        if (!arguments.length) {\n          return this._chartBodyG;\n        }\n\n        this._chartBodyG = _chartBodyG;\n        return this;\n      }\n      /**\n       * **mandatory**\n       *\n       * Get or set the x scale. The x scale can be any d3\n       * {@link https://github.com/d3/d3-scale/blob/master/README.md d3.scale} or\n       * {@link https://github.com/d3/d3-scale/blob/master/README.md#ordinal-scales ordinal scale}\n       * @see {@link https://github.com/d3/d3-scale/blob/master/README.md d3.scale}\n       * @example\n       * // set x to a linear scale\n       * chart.x(d3.scaleLinear().domain([-2500, 2500]))\n       * // set x to a time scale to generate histogram\n       * chart.x(d3.scaleTime().domain([new Date(1985, 0, 1), new Date(2012, 11, 31)]))\n       * @param {d3.scale} [xScale]\n       * @returns {d3.scale|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"x\",\n      value: function x(xScale) {\n        if (!arguments.length) {\n          return this._x;\n        }\n\n        this._x = xScale;\n        this._xOriginalDomain = this._x.domain();\n        this.rescale();\n        return this;\n      }\n    }, {\n      key: \"xOriginalDomain\",\n      value: function xOriginalDomain() {\n        return this._xOriginalDomain;\n      }\n      /**\n       * Set or get the xUnits function. The coordinate grid chart uses the xUnits function to calculate\n       * the number of data projections on the x axis such as the number of bars for a bar chart or the\n       * number of dots for a line chart.\n       *\n       * This function is expected to return a Javascript array of all data points on the x axis, or\n       * the number of points on the axis. d3 time range functions [d3.timeDays, d3.timeMonths, and\n       * d3.timeYears](https://github.com/d3/d3-time/blob/master/README.md#intervals) are all valid\n       * xUnits functions.\n       *\n       * dc.js also provides a few units function, see the {@link units Units Namespace} for\n       * a list of built-in units functions.\n       *\n       * Note that as of dc.js 3.0, `units.ordinal` is not a real function, because it is not\n       * possible to define this function compliant with the d3 range functions. It was already a\n       * magic value which caused charts to behave differently, and now it is completely so.\n       * @example\n       * // set x units to count days\n       * chart.xUnits(d3.timeDays);\n       * // set x units to count months\n       * chart.xUnits(d3.timeMonths);\n       *\n       * // A custom xUnits function can be used as long as it follows the following interface:\n       * // units in integer\n       * function(start, end) {\n       *      // simply calculates how many integers in the domain\n       *      return Math.abs(end - start);\n       * }\n       *\n       * // fixed units\n       * function(start, end) {\n       *      // be aware using fixed units will disable the focus/zoom ability on the chart\n       *      return 1000;\n       * }\n       * @param {Function} [xUnits=units.integers]\n       * @returns {Function|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"xUnits\",\n      value: function xUnits(_xUnits) {\n        if (!arguments.length) {\n          return this._xUnits;\n        }\n\n        this._xUnits = _xUnits;\n        return this;\n      }\n      /**\n       * Set or get the x axis used by a particular coordinate grid chart instance. This function is most\n       * useful when x axis customization is required. The x axis in dc.js is an instance of a\n       * {@link https://github.com/d3/d3-axis/blob/master/README.md#axisBottom d3 bottom axis object};\n       * therefore it supports any valid d3 axisBottom manipulation.\n       *\n       * **Caution**: The x axis is usually generated internally by dc; resetting it may cause\n       * unexpected results. Note also that when used as a getter, this function is not chainable:\n       * it returns the axis, not the chart,\n       * {@link https://github.com/dc-js/dc.js/wiki/FAQ#why-does-everything-break-after-a-call-to-xaxis-or-yaxis\n           * so attempting to call chart functions after calling `.xAxis()` will fail}.\n       * @see {@link https://github.com/d3/d3-axis/blob/master/README.md#axisBottom d3.axisBottom}\n       * @example\n       * // customize x axis tick format\n       * chart.xAxis().tickFormat(function(v) {return v + '%';});\n       * // customize x axis tick values\n       * chart.xAxis().tickValues([0, 100, 200, 300]);\n       * @param {d3.axis} [xAxis=d3.axisBottom()]\n       * @returns {d3.axis|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"xAxis\",\n      value: function xAxis(_xAxis) {\n        if (!arguments.length) {\n          if (!this._xAxis) {\n            this._xAxis = this._createXAxis();\n          }\n\n          return this._xAxis;\n        }\n\n        this._xAxis = _xAxis;\n        return this;\n      }\n      /**\n       * Turn on/off elastic x axis behavior. If x axis elasticity is turned on, then the grid chart will\n       * attempt to recalculate the x axis range whenever a redraw event is triggered.\n       * @param {Boolean} [elasticX=false]\n       * @returns {Boolean|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"elasticX\",\n      value: function elasticX(_elasticX) {\n        if (!arguments.length) {\n          return this._xElasticity;\n        }\n\n        this._xElasticity = _elasticX;\n        return this;\n      }\n      /**\n       * Set or get x axis padding for the elastic x axis. The padding will be added to both end of the x\n       * axis if elasticX is turned on; otherwise it is ignored.\n       *\n       * Padding can be an integer or percentage in string (e.g. '10%'). Padding can be applied to\n       * number or date x axes.  When padding a date axis, an integer represents number of units being padded\n       * and a percentage string will be treated the same as an integer. The unit will be determined by the\n       * xAxisPaddingUnit variable.\n       * @param {Number|String} [padding=0]\n       * @returns {Number|String|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"xAxisPadding\",\n      value: function xAxisPadding(padding) {\n        if (!arguments.length) {\n          return this._xAxisPadding;\n        }\n\n        this._xAxisPadding = padding;\n        return this;\n      }\n      /**\n       * Set or get x axis padding unit for the elastic x axis. The padding unit will determine which unit to\n       * use when applying xAxis padding if elasticX is turned on and if x-axis uses a time dimension;\n       * otherwise it is ignored.\n       *\n       * The padding unit should be a\n       * [d3 time interval](https://github.com/d3/d3-time/blob/master/README.md#self._interval).\n       * For backward compatibility with dc.js 2.0, it can also be the name of a d3 time interval\n       * ('day', 'hour', etc). Available arguments are the\n       * [d3 time intervals](https://github.com/d3/d3-time/blob/master/README.md#intervals d3.timeInterval).\n       * @param {String} [unit=d3.timeDay]\n       * @returns {String|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"xAxisPaddingUnit\",\n      value: function xAxisPaddingUnit(unit) {\n        if (!arguments.length) {\n          return this._xAxisPaddingUnit;\n        }\n\n        this._xAxisPaddingUnit = unit;\n        return this;\n      }\n      /**\n       * Returns the number of units displayed on the x axis. If the x axis is ordinal (`xUnits` is\n       * `units.ordinal`), this is the number of items in the domain of the x scale. Otherwise, the\n       * x unit count is calculated using the {@link CoordinateGridMixin#xUnits xUnits} function.\n       * @returns {Number}\n       */\n\n    }, {\n      key: \"xUnitCount\",\n      value: function xUnitCount() {\n        if (this._unitCount === undefined) {\n          if (this.isOrdinal()) {\n            // In this case it number of items in domain\n            this._unitCount = this.x().domain().length;\n          } else {\n            this._unitCount = this.xUnits()(this.x().domain()[0], this.x().domain()[1]); // Sometimes xUnits() may return an array while sometimes directly the count\n\n            if (this._unitCount instanceof Array) {\n              this._unitCount = this._unitCount.length;\n            }\n          }\n        }\n\n        return this._unitCount;\n      }\n      /**\n       * Gets or sets whether the chart should be drawn with a right axis instead of a left axis. When\n       * used with a chart in a composite chart, allows both left and right Y axes to be shown on a\n       * chart.\n       * @param {Boolean} [useRightYAxis=false]\n       * @returns {Boolean|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"useRightYAxis\",\n      value: function useRightYAxis(_useRightYAxis) {\n        if (!arguments.length) {\n          return this._useRightYAxis;\n        } // We need to warn if value is changing after self._yAxis was created\n\n\n        if (this._useRightYAxis !== _useRightYAxis && this._yAxis) {\n          logger.warn('Value of useRightYAxis has been altered, after yAxis was created. ' + 'You might get unexpected yAxis behavior. ' + 'Make calls to useRightYAxis sooner in your chart creation process.');\n        }\n\n        this._useRightYAxis = _useRightYAxis;\n        return this;\n      }\n      /**\n       * Gets or sets whether the chart should be drawn with a top axis instead of a bottom axis. When\n       * used with a chart in a composite chart, allows both top and bottom X axes to be shown on a\n       * chart.\n       * @param {Boolean} [useTopXAxis=false]\n       * @returns {Boolean|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"useTopXAxis\",\n      value: function useTopXAxis(_useTopXAxis) {\n        if (!arguments.length) {\n          return this._useTopXAxis;\n        } // We need to warn if value is changing after self._yAxis was created\n\n\n        if (this._useTopXAxis !== _useTopXAxis && this._xAxis) {\n          logger.warn('Value of useTopXAxis has been altered, after xAxis was created. ' + 'You might get unexpected yAxis behavior. ' + 'Make calls to useTopXAxis sooner in your chart creation process.');\n        }\n\n        this._useTopXAxis = _useTopXAxis;\n        return this;\n      }\n      /**\n       * Returns true if the chart is using ordinal xUnits ({@link units.ordinal units.ordinal}, or false\n       * otherwise. Most charts behave differently with ordinal data and use the result of this method to\n       * trigger the appropriate logic.\n       * @returns {Boolean}\n       */\n\n    }, {\n      key: \"isOrdinal\",\n      value: function isOrdinal() {\n        return this.xUnits() === units.ordinal;\n      }\n    }, {\n      key: \"_useOuterPadding\",\n      value: function _useOuterPadding() {\n        return true;\n      }\n    }, {\n      key: \"_ordinalXDomain\",\n      value: function _ordinalXDomain() {\n        var groups = this._computeOrderedGroups(this.data());\n\n        return groups.map(this.keyAccessor());\n      }\n    }, {\n      key: \"_createXAxis\",\n      value: function _createXAxis() {\n        return this._useTopXAxis ? d3Axis.axisTop() : d3Axis.axisBottom();\n      } // eslint-disable-next-line complexity\n\n    }, {\n      key: \"_prepareXAxis\",\n      value: function _prepareXAxis(g, render) {\n        if (!this.isOrdinal()) {\n          if (this.elasticX()) {\n            this._x.domain([this.xAxisMin(), this.xAxisMax()]);\n          }\n        } else {\n          // self._chart.isOrdinal()\n          // D3v4 - Ordinal charts would need scaleBand\n          // bandwidth is a method in scaleBand\n          // (https://github.com/d3/d3-scale/blob/master/README.md#scaleBand)\n          if (!this._x.bandwidth) {\n            // If self._x is not a scaleBand create a new scale and\n            // copy the original domain to the new scale\n            logger.warn('For compatibility with d3v4+, dc.js d3.0 ordinal bar/line/bubble charts need ' + 'd3.scaleBand() for the x scale, instead of d3.scaleOrdinal(). ' + 'Replacing .x() with a d3.scaleBand with the same domain - ' + 'make the same change in your code to avoid this warning!');\n            this._x = d3Scale.scaleBand().domain(this._x.domain());\n          }\n\n          if (this.elasticX() || this._x.domain().length === 0) {\n            this._x.domain(this._ordinalXDomain());\n          }\n        } // has the domain changed?\n\n\n        var xdom = this._x.domain();\n\n        if (render || !utils.arraysEqual(this._lastXDomain, xdom)) {\n          this.rescale();\n        }\n\n        this._lastXDomain = xdom; // please can't we always use rangeBands for bar charts?\n\n        if (this.isOrdinal()) {\n          this._x.range([0, this.xAxisLength()]).paddingInner(this._fRangeBandPadding).paddingOuter(this._useOuterPadding() ? this._fOuterRangeBandPadding : 0);\n        } else {\n          this._x.range([0, this.xAxisLength()]);\n        }\n\n        if (!this._xAxis) {\n          this._xAxis = this._createXAxis();\n        }\n\n        this._xAxis = this._xAxis.scale(this.x());\n\n        this._renderVerticalGridLines(g);\n      }\n    }, {\n      key: \"renderXAxis\",\n      value: function renderXAxis(g) {\n        var axisXG = g.select('g.x');\n\n        if (axisXG.empty()) {\n          axisXG = g.append('g').attr('class', 'axis x').attr('transform', \"translate(\".concat(this.margins().left, \",\").concat(this._xAxisY(), \")\"));\n        }\n\n        var axisXLab = g.select(\"text.\".concat(X_AXIS_LABEL_CLASS));\n        var axisXLabY = this._useTopXAxis ? this._xAxisLabelPadding : this.height() - this._xAxisLabelPadding;\n\n        if (axisXLab.empty() && this.xAxisLabel()) {\n          axisXLab = g.append('text').attr('class', X_AXIS_LABEL_CLASS).attr('transform', \"translate(\".concat(this.margins().left + this.xAxisLength() / 2, \",\").concat(axisXLabY, \")\")).attr('text-anchor', 'middle');\n        }\n\n        if (this.xAxisLabel() && axisXLab.text() !== this.xAxisLabel()) {\n          axisXLab.text(this.xAxisLabel());\n        }\n\n        transition(axisXG, this.transitionDuration(), this.transitionDelay()).attr('transform', \"translate(\".concat(this.margins().left, \",\").concat(this._xAxisY(), \")\")).call(this._xAxis);\n        transition(axisXLab, this.transitionDuration(), this.transitionDelay()).attr('transform', \"translate(\".concat(this.margins().left + this.xAxisLength() / 2, \",\").concat(axisXLabY, \")\"));\n      }\n    }, {\n      key: \"_renderVerticalGridLines\",\n      value: function _renderVerticalGridLines(g) {\n        var _this21 = this;\n\n        var gridLineG = g.select(\"g.\".concat(VERTICAL_CLASS));\n\n        if (this._renderVerticalGridLine) {\n          if (gridLineG.empty()) {\n            gridLineG = g.insert('g', ':first-child').attr('class', \"\".concat(GRID_LINE_CLASS, \" \").concat(VERTICAL_CLASS)).attr('transform', \"translate(\".concat(this.margins().left, \",\").concat(this.margins().top, \")\"));\n          }\n\n          var ticks = this._xAxis.tickValues() ? this._xAxis.tickValues() : typeof this._x.ticks === 'function' ? this._x.ticks.apply(this._x, this._xAxis.tickArguments()) : this._x.domain();\n          var lines = gridLineG.selectAll('line').data(ticks); // enter\n\n          var linesGEnter = lines.enter().append('line').attr('x1', function (d) {\n            return _this21._x(d);\n          }).attr('y1', this._xAxisY() - this.margins().top).attr('x2', function (d) {\n            return _this21._x(d);\n          }).attr('y2', 0).attr('opacity', 0);\n          transition(linesGEnter, this.transitionDuration(), this.transitionDelay()).attr('opacity', 0.5); // update\n\n          transition(lines, this.transitionDuration(), this.transitionDelay()).attr('x1', function (d) {\n            return _this21._x(d);\n          }).attr('y1', this._xAxisY() - this.margins().top).attr('x2', function (d) {\n            return _this21._x(d);\n          }).attr('y2', 0); // exit\n\n          lines.exit().remove();\n        } else {\n          gridLineG.selectAll('line').remove();\n        }\n      }\n    }, {\n      key: \"_xAxisY\",\n      value: function _xAxisY() {\n        return this._useTopXAxis ? this.margins().top : this.height() - this.margins().bottom;\n      }\n    }, {\n      key: \"xAxisLength\",\n      value: function xAxisLength() {\n        return this.effectiveWidth();\n      }\n      /**\n       * Set or get the x axis label. If setting the label, you may optionally include additional padding to\n       * the margin to make room for the label. By default the padded is set to 12 to accomodate the text height.\n       * @param {String} [labelText]\n       * @param {Number} [padding=12]\n       * @returns {String}\n       */\n\n    }, {\n      key: \"xAxisLabel\",\n      value: function xAxisLabel(labelText, padding) {\n        if (!arguments.length) {\n          return this._xAxisLabel;\n        }\n\n        this._xAxisLabel = labelText;\n        this.margins().bottom -= this._xAxisLabelPadding;\n        this._xAxisLabelPadding = padding === undefined ? DEFAULT_AXIS_LABEL_PADDING : padding;\n        this.margins().bottom += this._xAxisLabelPadding;\n        return this;\n      }\n    }, {\n      key: \"_createYAxis\",\n      value: function _createYAxis() {\n        return this._useRightYAxis ? d3Axis.axisRight() : d3Axis.axisLeft();\n      }\n    }, {\n      key: \"_prepareYAxis\",\n      value: function _prepareYAxis(g) {\n        if (this._y === undefined || this.elasticY()) {\n          if (this._y === undefined) {\n            this._y = d3Scale.scaleLinear();\n          }\n\n          var _min = this.yAxisMin() || 0;\n\n          var _max = this.yAxisMax() || 0;\n\n          this._y.domain([_min, _max]).rangeRound([this.yAxisHeight(), 0]);\n        }\n\n        this._y.range([this.yAxisHeight(), 0]);\n\n        if (!this._yAxis) {\n          this._yAxis = this._createYAxis();\n        }\n\n        this._yAxis.scale(this._y);\n\n        this._renderHorizontalGridLinesForAxis(g, this._y, this._yAxis);\n      }\n    }, {\n      key: \"renderYAxisLabel\",\n      value: function renderYAxisLabel(axisClass, text, rotation, labelXPosition) {\n        labelXPosition = labelXPosition || this._yAxisLabelPadding;\n        var axisYLab = this.g().select(\"text.\".concat(Y_AXIS_LABEL_CLASS, \".\").concat(axisClass, \"-label\"));\n        var labelYPosition = this.margins().top + this.yAxisHeight() / 2;\n\n        if (axisYLab.empty() && text) {\n          axisYLab = this.g().append('text').attr('transform', \"translate(\".concat(labelXPosition, \",\").concat(labelYPosition, \"),rotate(\").concat(rotation, \")\")).attr('class', \"\".concat(Y_AXIS_LABEL_CLASS, \" \").concat(axisClass, \"-label\")).attr('text-anchor', 'middle').text(text);\n        }\n\n        if (text && axisYLab.text() !== text) {\n          axisYLab.text(text);\n        }\n\n        transition(axisYLab, this.transitionDuration(), this.transitionDelay()).attr('transform', \"translate(\".concat(labelXPosition, \",\").concat(labelYPosition, \"),rotate(\").concat(rotation, \")\"));\n      }\n    }, {\n      key: \"renderYAxisAt\",\n      value: function renderYAxisAt(axisClass, axis, position) {\n        var axisYG = this.g().select(\"g.\".concat(axisClass));\n\n        if (axisYG.empty()) {\n          axisYG = this.g().append('g').attr('class', \"axis \".concat(axisClass)).attr('transform', \"translate(\".concat(position, \",\").concat(this.margins().top, \")\"));\n        }\n\n        transition(axisYG, this.transitionDuration(), this.transitionDelay()).attr('transform', \"translate(\".concat(position, \",\").concat(this.margins().top, \")\")).call(axis);\n      }\n    }, {\n      key: \"renderYAxis\",\n      value: function renderYAxis() {\n        var axisPosition = this._useRightYAxis ? this.width() - this.margins().right : this._yAxisX();\n        this.renderYAxisAt('y', this._yAxis, axisPosition);\n        var labelPosition = this._useRightYAxis ? this.width() - this._yAxisLabelPadding : this._yAxisLabelPadding;\n        var rotation = this._useRightYAxis ? 90 : -90;\n        this.renderYAxisLabel('y', this.yAxisLabel(), rotation, labelPosition);\n      }\n    }, {\n      key: \"_renderHorizontalGridLinesForAxis\",\n      value: function _renderHorizontalGridLinesForAxis(g, scale, axis) {\n        var gridLineG = g.select(\"g.\".concat(HORIZONTAL_CLASS));\n\n        if (this._renderHorizontalGridLine) {\n          // see https://github.com/d3/d3-axis/blob/master/src/axis.js#L48\n          var ticks = axis.tickValues() ? axis.tickValues() : scale.ticks ? scale.ticks.apply(scale, axis.tickArguments()) : scale.domain();\n\n          if (gridLineG.empty()) {\n            gridLineG = g.insert('g', ':first-child').attr('class', \"\".concat(GRID_LINE_CLASS, \" \").concat(HORIZONTAL_CLASS)).attr('transform', \"translate(\".concat(this.margins().left, \",\").concat(this.margins().top, \")\"));\n          }\n\n          var lines = gridLineG.selectAll('line').data(ticks); // enter\n\n          var linesGEnter = lines.enter().append('line').attr('x1', 1).attr('y1', function (d) {\n            return scale(d);\n          }).attr('x2', this.xAxisLength()).attr('y2', function (d) {\n            return scale(d);\n          }).attr('opacity', 0);\n          transition(linesGEnter, this.transitionDuration(), this.transitionDelay()).attr('opacity', 0.5); // update\n\n          transition(lines, this.transitionDuration(), this.transitionDelay()).attr('x1', 1).attr('y1', function (d) {\n            return scale(d);\n          }).attr('x2', this.xAxisLength()).attr('y2', function (d) {\n            return scale(d);\n          }); // exit\n\n          lines.exit().remove();\n        } else {\n          gridLineG.selectAll('line').remove();\n        }\n      }\n    }, {\n      key: \"_yAxisX\",\n      value: function _yAxisX() {\n        return this.useRightYAxis() ? this.width() - this.margins().right : this.margins().left;\n      }\n      /**\n       * Set or get the y axis label. If setting the label, you may optionally include additional padding\n       * to the margin to make room for the label. By default the padding is set to 12 to accommodate the\n       * text height.\n       * @param {String} [labelText]\n       * @param {Number} [padding=12]\n       * @returns {String|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"yAxisLabel\",\n      value: function yAxisLabel(labelText, padding) {\n        if (!arguments.length) {\n          return this._yAxisLabel;\n        }\n\n        this._yAxisLabel = labelText;\n        this.margins().left -= this._yAxisLabelPadding;\n        this._yAxisLabelPadding = padding === undefined ? DEFAULT_AXIS_LABEL_PADDING : padding;\n        this.margins().left += this._yAxisLabelPadding;\n        return this;\n      }\n      /**\n       * Get or set the y scale. The y scale is typically automatically determined by the chart implementation.\n       * @see {@link https://github.com/d3/d3-scale/blob/master/README.md d3.scale}\n       * @param {d3.scale} [yScale]\n       * @returns {d3.scale|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"y\",\n      value: function y(yScale) {\n        if (!arguments.length) {\n          return this._y;\n        }\n\n        this._y = yScale;\n        this.rescale();\n        return this;\n      }\n      /**\n       * Set or get the y axis used by the coordinate grid chart instance. This function is most useful\n       * when y axis customization is required. Depending on `useRightYAxis` the y axis in dc.js is an instance of\n       * either [d3.axisLeft](https://github.com/d3/d3-axis/blob/master/README.md#axisLeft) or\n       * [d3.axisRight](https://github.com/d3/d3-axis/blob/master/README.md#axisRight); therefore it supports any\n       * valid d3 axis manipulation.\n       *\n       * **Caution**: The y axis is usually generated internally by dc; resetting it may cause\n       * unexpected results.  Note also that when used as a getter, this function is not chainable: it\n       * returns the axis, not the chart,\n       * {@link https://github.com/dc-js/dc.js/wiki/FAQ#why-does-everything-break-after-a-call-to-xaxis-or-yaxis\n           * so attempting to call chart functions after calling `.yAxis()` will fail}.\n       * In addition, depending on whether you are going to use the axis on left or right\n       * you need to appropriately pass [d3.axisLeft](https://github.com/d3/d3-axis/blob/master/README.md#axisLeft)\n       * or [d3.axisRight](https://github.com/d3/d3-axis/blob/master/README.md#axisRight)\n       * @see {@link https://github.com/d3/d3-axis/blob/master/README.md d3.axis}\n       * @example\n       * // customize y axis tick format\n       * chart.yAxis().tickFormat(function(v) {return v + '%';});\n       * // customize y axis tick values\n       * chart.yAxis().tickValues([0, 100, 200, 300]);\n       * @param {d3.axisLeft|d3.axisRight} [yAxis]\n       * @returns {d3.axisLeft|d3.axisRight|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"yAxis\",\n      value: function yAxis(_yAxis) {\n        if (!arguments.length) {\n          if (!this._yAxis) {\n            this._yAxis = this._createYAxis();\n          }\n\n          return this._yAxis;\n        }\n\n        this._yAxis = _yAxis;\n        return this;\n      }\n      /**\n       * Turn on/off elastic y axis behavior. If y axis elasticity is turned on, then the grid chart will\n       * attempt to recalculate the y axis range whenever a redraw event is triggered.\n       * @param {Boolean} [elasticY=false]\n       * @returns {Boolean|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"elasticY\",\n      value: function elasticY(_elasticY) {\n        if (!arguments.length) {\n          return this._yElasticity;\n        }\n\n        this._yElasticity = _elasticY;\n        return this;\n      }\n      /**\n       * Turn on/off horizontal grid lines.\n       * @param {Boolean} [renderHorizontalGridLines=false]\n       * @returns {Boolean|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"renderHorizontalGridLines\",\n      value: function renderHorizontalGridLines(_renderHorizontalGridLines) {\n        if (!arguments.length) {\n          return this._renderHorizontalGridLine;\n        }\n\n        this._renderHorizontalGridLine = _renderHorizontalGridLines;\n        return this;\n      }\n      /**\n       * Turn on/off vertical grid lines.\n       * @param {Boolean} [renderVerticalGridLines=false]\n       * @returns {Boolean|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"renderVerticalGridLines\",\n      value: function renderVerticalGridLines(_renderVerticalGridLines2) {\n        if (!arguments.length) {\n          return this._renderVerticalGridLine;\n        }\n\n        this._renderVerticalGridLine = _renderVerticalGridLines2;\n        return this;\n      }\n      /**\n       * Calculates the minimum x value to display in the chart. Includes xAxisPadding if set.\n       * @returns {*}\n       */\n\n    }, {\n      key: \"xAxisMin\",\n      value: function xAxisMin() {\n        var _this22 = this;\n\n        var m = d3Array.min(this.data(), function (e) {\n          return _this22.keyAccessor()(e);\n        });\n        return utils.subtract(m, this._xAxisPadding, this._xAxisPaddingUnit);\n      }\n      /**\n       * Calculates the maximum x value to display in the chart. Includes xAxisPadding if set.\n       * @returns {*}\n       */\n\n    }, {\n      key: \"xAxisMax\",\n      value: function xAxisMax() {\n        var _this23 = this;\n\n        var m = d3Array.max(this.data(), function (e) {\n          return _this23.keyAccessor()(e);\n        });\n        return utils.add(m, this._xAxisPadding, this._xAxisPaddingUnit);\n      }\n      /**\n       * Calculates the minimum y value to display in the chart. Includes yAxisPadding if set.\n       * @returns {*}\n       */\n\n    }, {\n      key: \"yAxisMin\",\n      value: function yAxisMin() {\n        var _this24 = this;\n\n        var m = d3Array.min(this.data(), function (e) {\n          return _this24.valueAccessor()(e);\n        });\n        return utils.subtract(m, this._yAxisPadding);\n      }\n      /**\n       * Calculates the maximum y value to display in the chart. Includes yAxisPadding if set.\n       * @returns {*}\n       */\n\n    }, {\n      key: \"yAxisMax\",\n      value: function yAxisMax() {\n        var _this25 = this;\n\n        var m = d3Array.max(this.data(), function (e) {\n          return _this25.valueAccessor()(e);\n        });\n        return utils.add(m, this._yAxisPadding);\n      }\n      /**\n       * Set or get y axis padding for the elastic y axis. The padding will be added to the top and\n       * bottom of the y axis if elasticY is turned on; otherwise it is ignored.\n       *\n       * Padding can be an integer or percentage in string (e.g. '10%'). Padding can be applied to\n       * number or date axes. When padding a date axis, an integer represents number of days being padded\n       * and a percentage string will be treated the same as an integer.\n       * @param {Number|String} [padding=0]\n       * @returns {Number|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"yAxisPadding\",\n      value: function yAxisPadding(padding) {\n        if (!arguments.length) {\n          return this._yAxisPadding;\n        }\n\n        this._yAxisPadding = padding;\n        return this;\n      }\n    }, {\n      key: \"yAxisHeight\",\n      value: function yAxisHeight() {\n        return this.effectiveHeight();\n      }\n      /**\n       * Set or get the rounding function used to quantize the selection when brushing is enabled.\n       * @example\n       * // set x unit round to by month, this will make sure range selection brush will\n       * // select whole months\n       * chart.round(d3.timeMonth.round);\n       * @param {Function} [round]\n       * @returns {Function|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"round\",\n      value: function round(_round) {\n        if (!arguments.length) {\n          return this._round;\n        }\n\n        this._round = _round;\n        return this;\n      }\n    }, {\n      key: \"_rangeBandPadding\",\n      value: function _rangeBandPadding(_) {\n        if (!arguments.length) {\n          return this._fRangeBandPadding;\n        }\n\n        this._fRangeBandPadding = _;\n        return this;\n      }\n    }, {\n      key: \"_outerRangeBandPadding\",\n      value: function _outerRangeBandPadding(_) {\n        if (!arguments.length) {\n          return this._fOuterRangeBandPadding;\n        }\n\n        this._fOuterRangeBandPadding = _;\n        return this;\n      }\n    }, {\n      key: \"filter\",\n      value: function filter(_) {\n        if (!arguments.length) {\n          return _get(_getPrototypeOf(CoordinateGridMixin.prototype), \"filter\", this).call(this);\n        }\n\n        _get(_getPrototypeOf(CoordinateGridMixin.prototype), \"filter\", this).call(this, _);\n\n        this.redrawBrush(_, false);\n        return this;\n      }\n      /**\n       * Get or set the brush. Brush must be an instance of d3 brushes\n       * https://github.com/d3/d3-brush/blob/master/README.md\n       * You will use this only if you are writing a new chart type that supports brushing.\n       *\n       * **Caution**: dc creates and manages brushes internally. Go through and understand the source code\n       * if you want to pass a new brush object. Even if you are only using the getter,\n       * the brush object may not behave the way you expect.\n       *\n       * @param {d3.brush} [_]\n       * @returns {d3.brush|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"brush\",\n      value: function brush(_) {\n        if (!arguments.length) {\n          return this._brush;\n        }\n\n        this._brush = _;\n        return this;\n      }\n    }, {\n      key: \"renderBrush\",\n      value: function renderBrush(g, doTransition) {\n        var _this26 = this;\n\n        if (this._brushOn) {\n          this._brush.on('start brush end', d3compat.eventHandler(function (d, evt) {\n            return _this26._brushing(evt);\n          })); // To retrieve selection we need self._gBrush\n\n\n          this._gBrush = g.append('g').attr('class', 'brush').attr('transform', \"translate(\".concat(this.margins().left, \",\").concat(this.margins().top, \")\"));\n          this.setBrushExtents();\n          this.createBrushHandlePaths(this._gBrush, doTransition);\n          this.redrawBrush(this.filter(), doTransition);\n        }\n      }\n    }, {\n      key: \"createBrushHandlePaths\",\n      value: function createBrushHandlePaths(gBrush) {\n        var _this27 = this;\n\n        var brushHandles = gBrush.selectAll(\"path.\".concat(CUSTOM_BRUSH_HANDLE_CLASS)).data([{\n          type: 'w'\n        }, {\n          type: 'e'\n        }]);\n        brushHandles = brushHandles.enter().append('path').attr('class', CUSTOM_BRUSH_HANDLE_CLASS).merge(brushHandles);\n        brushHandles.attr('d', function (d) {\n          return _this27.resizeHandlePath(d);\n        });\n      }\n    }, {\n      key: \"extendBrush\",\n      value: function extendBrush(brushSelection) {\n        if (brushSelection && this.round()) {\n          brushSelection[0] = this.round()(brushSelection[0]);\n          brushSelection[1] = this.round()(brushSelection[1]);\n        }\n\n        return brushSelection;\n      }\n    }, {\n      key: \"brushIsEmpty\",\n      value: function brushIsEmpty(brushSelection) {\n        return !brushSelection || brushSelection[1] <= brushSelection[0];\n      }\n    }, {\n      key: \"_brushing\",\n      value: function _brushing(evt) {\n        var _this28 = this;\n\n        if (this._ignoreBrushEvents) {\n          return;\n        }\n\n        var brushSelection = evt.selection;\n\n        if (brushSelection) {\n          brushSelection = brushSelection.map(this.x().invert);\n        }\n\n        brushSelection = this.extendBrush(brushSelection);\n        this.redrawBrush(brushSelection, false);\n        var rangedFilter = this.brushIsEmpty(brushSelection) ? null : filters.RangedFilter(brushSelection[0], brushSelection[1]);\n        events.trigger(function () {\n          _this28.applyBrushSelection(rangedFilter);\n        }, constants.EVENT_DELAY);\n      } // This can be overridden in a derived chart. For example Composite chart overrides it\n\n    }, {\n      key: \"applyBrushSelection\",\n      value: function applyBrushSelection(rangedFilter) {\n        this.replaceFilter(rangedFilter);\n        this.redrawGroup();\n      }\n    }, {\n      key: \"_withoutBrushEvents\",\n      value: function _withoutBrushEvents(closure) {\n        var oldValue = this._ignoreBrushEvents;\n        this._ignoreBrushEvents = true;\n\n        try {\n          closure();\n        } finally {\n          this._ignoreBrushEvents = oldValue;\n        }\n      }\n    }, {\n      key: \"setBrushExtents\",\n      value: function setBrushExtents(doTransition) {\n        var _this29 = this;\n\n        this._withoutBrushEvents(function () {\n          // Set boundaries of the brush, must set it before applying to self._gBrush\n          _this29._brush.extent([[0, 0], [_this29.effectiveWidth(), _this29.effectiveHeight()]]);\n        });\n\n        this._gBrush.call(this._brush);\n      }\n    }, {\n      key: \"redrawBrush\",\n      value: function redrawBrush(brushSelection, doTransition) {\n        var _this30 = this;\n\n        if (this._brushOn && this._gBrush) {\n          if (this._resizing) {\n            this.setBrushExtents(doTransition);\n          }\n\n          if (!brushSelection) {\n            this._withoutBrushEvents(function () {\n              _this30._gBrush.call(_this30._brush.move, null);\n            });\n\n            this._gBrush.selectAll(\"path.\".concat(CUSTOM_BRUSH_HANDLE_CLASS)).attr('display', 'none');\n          } else {\n            var scaledSelection = [this._x(brushSelection[0]), this._x(brushSelection[1])];\n            var gBrush = optionalTransition(doTransition, this.transitionDuration(), this.transitionDelay())(this._gBrush);\n\n            this._withoutBrushEvents(function () {\n              gBrush.call(_this30._brush.move, scaledSelection);\n            });\n\n            gBrush.selectAll(\"path.\".concat(CUSTOM_BRUSH_HANDLE_CLASS)).attr('display', null).attr('transform', function (d, i) {\n              return \"translate(\".concat(_this30._x(brushSelection[i]), \", 0)\");\n            }).attr('d', function (d) {\n              return _this30.resizeHandlePath(d);\n            });\n          }\n        }\n\n        this.fadeDeselectedArea(brushSelection);\n      }\n    }, {\n      key: \"fadeDeselectedArea\",\n      value: function fadeDeselectedArea(brushSelection) {// do nothing, sub-chart should override this function\n      } // borrowed from Crossfilter example\n\n    }, {\n      key: \"resizeHandlePath\",\n      value: function resizeHandlePath(d) {\n        d = d.type;\n        var e = +(d === 'e'),\n            x = e ? 1 : -1,\n            y = this.effectiveHeight() / 3;\n        return \"M\".concat(0.5 * x, \",\").concat(y, \"A6,6 0 0 \").concat(e, \" \").concat(6.5 * x, \",\").concat(y + 6, \"V\").concat(2 * y - 6, \"A6,6 0 0 \").concat(e, \" \").concat(0.5 * x, \",\").concat(2 * y, \"Z\") + \"M\".concat(2.5 * x, \",\").concat(y + 8, \"V\").concat(2 * y - 8, \"M\").concat(4.5 * x, \",\").concat(y + 8, \"V\").concat(2 * y - 8);\n      }\n    }, {\n      key: \"_getClipPathId\",\n      value: function _getClipPathId() {\n        return \"\".concat(this.anchorName().replace(/[ .#=\\[\\]\"]/g, '-'), \"-clip\");\n      }\n      /**\n       * Get or set the padding in pixels for the clip path. Once set padding will be applied evenly to\n       * the top, left, right, and bottom when the clip path is generated. If set to zero, the clip area\n       * will be exactly the chart body area minus the margins.\n       * @param {Number} [padding=5]\n       * @returns {Number|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"clipPadding\",\n      value: function clipPadding(padding) {\n        if (!arguments.length) {\n          return this._clipPadding;\n        }\n\n        this._clipPadding = padding;\n        return this;\n      }\n    }, {\n      key: \"_generateClipPath\",\n      value: function _generateClipPath() {\n        var defs = utils.appendOrSelect(this._parent, 'defs'); // cannot select <clippath> elements; bug in WebKit, must select by id\n        // https://groups.google.com/forum/#!topic/d3-js/6EpAzQ2gU9I\n\n        var id = this._getClipPathId();\n\n        var chartBodyClip = utils.appendOrSelect(defs, \"#\".concat(id), 'clipPath').attr('id', id);\n        var padding = this._clipPadding * 2;\n        utils.appendOrSelect(chartBodyClip, 'rect').attr('width', this.xAxisLength() + padding).attr('height', this.yAxisHeight() + padding).attr('transform', \"translate(-\".concat(this._clipPadding, \", -\").concat(this._clipPadding, \")\"));\n      }\n    }, {\n      key: \"_preprocessData\",\n      value: function _preprocessData() {}\n    }, {\n      key: \"_doRender\",\n      value: function _doRender() {\n        this.resetSvg();\n\n        this._preprocessData();\n\n        this._generateG();\n\n        this._generateClipPath();\n\n        this._drawChart(true);\n\n        this._configureMouseZoom();\n\n        return this;\n      }\n    }, {\n      key: \"_doRedraw\",\n      value: function _doRedraw() {\n        this._preprocessData();\n\n        this._drawChart(false);\n\n        this._generateClipPath();\n\n        return this;\n      }\n    }, {\n      key: \"_drawChart\",\n      value: function _drawChart(render) {\n        if (this.isOrdinal()) {\n          this._brushOn = false;\n        }\n\n        this._prepareXAxis(this.g(), render);\n\n        this._prepareYAxis(this.g());\n\n        this.plotData();\n\n        if (this.elasticX() || this._resizing || render) {\n          this.renderXAxis(this.g());\n        }\n\n        if (this.elasticY() || this._resizing || render) {\n          this.renderYAxis(this.g());\n        }\n\n        if (render) {\n          this.renderBrush(this.g(), false);\n        } else {\n          // Animate the brush only while resizing\n          this.redrawBrush(this.filter(), this._resizing);\n        }\n\n        this.fadeDeselectedArea(this.filter());\n        this.resizing(false);\n      }\n    }, {\n      key: \"_configureMouseZoom\",\n      value: function _configureMouseZoom() {\n        // Save a copy of original x scale\n        this._origX = this._x.copy();\n\n        if (this._mouseZoomable) {\n          this._enableMouseZoom();\n        } else if (this._hasBeenMouseZoomable) {\n          this._disableMouseZoom();\n        }\n      }\n    }, {\n      key: \"_enableMouseZoom\",\n      value: function _enableMouseZoom() {\n        this._hasBeenMouseZoomable = true;\n        var extent = [[0, 0], [this.effectiveWidth(), this.effectiveHeight()]];\n\n        this._zoom.scaleExtent(this._zoomScale).extent(extent).duration(this.transitionDuration());\n\n        if (this._zoomOutRestrict) {\n          // Ensure minimum zoomScale is at least 1\n          var zoomScaleMin = Math.max(this._zoomScale[0], 1);\n\n          this._zoom.translateExtent(extent).scaleExtent([zoomScaleMin, this._zoomScale[1]]);\n        }\n\n        this.root().call(this._zoom); // Tell D3 zoom our current zoom/pan status\n\n        this._updateD3zoomTransform();\n      }\n    }, {\n      key: \"_disableMouseZoom\",\n      value: function _disableMouseZoom() {\n        this.root().call(this._nullZoom);\n      }\n    }, {\n      key: \"_zoomHandler\",\n      value: function _zoomHandler(newDomain, noRaiseEvents) {\n        var _this31 = this;\n\n        var domFilter;\n\n        if (this._hasRangeSelected(newDomain)) {\n          this.x().domain(newDomain);\n          domFilter = filters.RangedFilter(newDomain[0], newDomain[1]);\n        } else {\n          this.x().domain(this._xOriginalDomain);\n          domFilter = null;\n        }\n\n        this.replaceFilter(domFilter);\n        this.rescale();\n        this.redraw();\n\n        if (!noRaiseEvents) {\n          if (this._rangeChart && !utils.arraysEqual(this.filter(), this._rangeChart.filter())) {\n            events.trigger(function () {\n              _this31._rangeChart.replaceFilter(domFilter);\n\n              _this31._rangeChart.redraw();\n            });\n          }\n\n          this._invokeZoomedListener();\n\n          events.trigger(function () {\n            _this31.redrawGroup();\n          }, constants.EVENT_DELAY);\n        }\n      } // event.transform.rescaleX(self._origX).domain() should give back newDomain\n\n    }, {\n      key: \"_domainToZoomTransform\",\n      value: function _domainToZoomTransform(newDomain, origDomain, xScale) {\n        var k = (origDomain[1] - origDomain[0]) / (newDomain[1] - newDomain[0]);\n        var xt = -1 * xScale(newDomain[0]);\n        return d3Zoom.zoomIdentity.scale(k).translate(xt, 0);\n      } // If we changing zoom status (for example by calling focus), tell D3 zoom about it\n\n    }, {\n      key: \"_updateD3zoomTransform\",\n      value: function _updateD3zoomTransform() {\n        var _this32 = this;\n\n        if (this._zoom) {\n          this._withoutZoomEvents(function () {\n            _this32._zoom.transform(_this32.root(), _this32._domainToZoomTransform(_this32.x().domain(), _this32._xOriginalDomain, _this32._origX));\n          });\n        }\n      }\n    }, {\n      key: \"_withoutZoomEvents\",\n      value: function _withoutZoomEvents(closure) {\n        var oldValue = this._ignoreZoomEvents;\n        this._ignoreZoomEvents = true;\n\n        try {\n          closure();\n        } finally {\n          this._ignoreZoomEvents = oldValue;\n        }\n      }\n    }, {\n      key: \"_onZoom\",\n      value: function _onZoom(evt) {\n        // ignore zoom events if it was caused by a programmatic change\n        if (this._ignoreZoomEvents) {\n          return;\n        }\n\n        var newDomain = evt.transform.rescaleX(this._origX).domain();\n        this.focus(newDomain, false);\n      }\n    }, {\n      key: \"_checkExtents\",\n      value: function _checkExtents(ext, outerLimits) {\n        if (!ext || ext.length !== 2 || !outerLimits || outerLimits.length !== 2) {\n          return ext;\n        }\n\n        if (ext[0] > outerLimits[1] || ext[1] < outerLimits[0]) {\n          console.warn('Could not intersect extents, will reset');\n        } // Math.max does not work (as the values may be dates as well)\n\n\n        return [ext[0] > outerLimits[0] ? ext[0] : outerLimits[0], ext[1] < outerLimits[1] ? ext[1] : outerLimits[1]];\n      }\n      /**\n       * Zoom this chart to focus on the given range. The given range should be an array containing only\n       * 2 elements (`[start, end]`) defining a range in the x domain. If the range is not given or set\n       * to null, then the zoom will be reset. _For focus to work elasticX has to be turned off;\n       * otherwise focus will be ignored.\n       *\n       * To avoid ping-pong volley of events between a pair of range and focus charts please set\n       * `noRaiseEvents` to `true`. In that case it will update this chart but will not fire `zoom` event\n       * and not try to update back the associated range chart.\n       * If you are calling it manually - typically you will leave it to `false` (the default).\n       *\n       * @example\n       * chart.on('renderlet', function(chart) {\n       *     // smooth the rendering through event throttling\n       *     events.trigger(function(){\n       *          // focus some other chart to the range selected by user on this chart\n       *          someOtherChart.focus(chart.filter());\n       *     });\n       * })\n       * @param {Array<Number>} [range]\n       * @param {Boolean} [noRaiseEvents = false]\n       * @return {undefined}\n       */\n\n    }, {\n      key: \"focus\",\n      value: function focus(range, noRaiseEvents) {\n        if (this._zoomOutRestrict) {\n          // ensure range is within self._xOriginalDomain\n          range = this._checkExtents(range, this._xOriginalDomain); // If it has an associated range chart ensure range is within domain of that rangeChart\n\n          if (this._rangeChart) {\n            range = this._checkExtents(range, this._rangeChart.x().domain());\n          }\n        }\n\n        this._zoomHandler(range, noRaiseEvents);\n\n        this._updateD3zoomTransform();\n      }\n    }, {\n      key: \"refocused\",\n      value: function refocused() {\n        return !utils.arraysEqual(this.x().domain(), this._xOriginalDomain);\n      }\n    }, {\n      key: \"focusChart\",\n      value: function focusChart(c) {\n        var _this33 = this;\n\n        if (!arguments.length) {\n          return this._focusChart;\n        }\n\n        this._focusChart = c;\n        this.on('filtered.dcjs-range-chart', function (chart) {\n          if (!chart.filter()) {\n            events.trigger(function () {\n              _this33._focusChart.x().domain(_this33._focusChart.xOriginalDomain(), true);\n            });\n          } else if (!utils.arraysEqual(chart.filter(), _this33._focusChart.filter())) {\n            events.trigger(function () {\n              _this33._focusChart.focus(chart.filter(), true);\n            });\n          }\n        });\n        return this;\n      }\n      /**\n       * Turn on/off the brush-based range filter. When brushing is on then user can drag the mouse\n       * across a chart with a quantitative scale to perform range filtering based on the extent of the\n       * brush, or click on the bars of an ordinal bar chart or slices of a pie chart to filter and\n       * un-filter them. However turning on the brush filter will disable other interactive elements on\n       * the chart such as highlighting, tool tips, and reference lines. Zooming will still be possible\n       * if enabled, but only via scrolling (panning will be disabled.)\n       * @param {Boolean} [brushOn=true]\n       * @returns {Boolean|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"brushOn\",\n      value: function brushOn(_brushOn) {\n        if (!arguments.length) {\n          return this._brushOn;\n        }\n\n        this._brushOn = _brushOn;\n        return this;\n      }\n      /**\n       * This will be internally used by composite chart onto children. Please go not invoke directly.\n       *\n       * @protected\n       * @param {Boolean} [brushOn=false]\n       * @returns {Boolean|CoordinateGridMixin}\n       */\n\n    }, {\n      key: \"parentBrushOn\",\n      value: function parentBrushOn(brushOn) {\n        if (!arguments.length) {\n          return this._parentBrushOn;\n        }\n\n        this._parentBrushOn = brushOn;\n        return this;\n      } // Get the SVG rendered brush\n\n    }, {\n      key: \"gBrush\",\n      value: function gBrush() {\n        return this._gBrush;\n      }\n    }, {\n      key: \"_hasRangeSelected\",\n      value: function _hasRangeSelected(range) {\n        return range instanceof Array && range.length > 1;\n      }\n    }]);\n\n    return CoordinateGridMixin;\n  }(ColorMixin(MarginMixin)); // https://github.com/d3/d3-plugins/blob/master/box/box.js\n\n\n  var d3Box = function d3Box() {\n    var width = 1;\n    var height = 1;\n    var duration = 0;\n    var delay = 0;\n    var domain = null;\n    var value = Number;\n    var whiskers = boxWhiskers;\n    var quartiles = boxQuartiles;\n    var tickFormat = null; // Enhanced attributes\n\n    var renderDataPoints = false;\n    var dataRadius = 3;\n    var dataOpacity = 0.3;\n    var dataWidthPortion = 0.8;\n    var renderTitle = false;\n    var showOutliers = true;\n    var boldOutlier = false; // For each small multiple…\n\n    function box(g) {\n      g.each(function (data, index) {\n        data = data.map(value).sort(d3Array.ascending);\n\n        var _g = d3Selection.select(this);\n\n        var n = data.length;\n        var min;\n        var max; // Leave if there are no items.\n\n        if (n === 0) {\n          return;\n        } // Compute quartiles. Must return exactly 3 elements.\n\n\n        var quartileData = data.quartiles = quartiles(data); // Compute whiskers. Must return exactly 2 elements, or null.\n\n        var whiskerIndices = whiskers && whiskers.call(this, data, index),\n            whiskerData = whiskerIndices && whiskerIndices.map(function (_i) {\n          return data[_i];\n        }); // Compute outliers. If no whiskers are specified, all data are 'outliers'.\n        // We compute the outliers as indices, so that we can join across transitions!\n\n        var outlierIndices = whiskerIndices ? d3Array.range(0, whiskerIndices[0]).concat(d3Array.range(whiskerIndices[1] + 1, n)) : d3Array.range(n); // Determine the maximum value based on if outliers are shown\n\n        if (showOutliers) {\n          min = data[0];\n          max = data[n - 1];\n        } else {\n          min = data[whiskerIndices[0]];\n          max = data[whiskerIndices[1]];\n        }\n\n        var pointIndices = d3Array.range(whiskerIndices[0], whiskerIndices[1] + 1); // Compute the new x-scale.\n\n        var x1 = d3Scale.scaleLinear().domain(domain && domain.call(this, data, index) || [min, max]).range([height, 0]); // Retrieve the old x-scale, if this is an update.\n\n        var x0 = this.__chart__ || d3Scale.scaleLinear().domain([0, Infinity]).range(x1.range()); // Stash the new scale.\n\n        this.__chart__ = x1; // Note: the box, median, and box tick elements are fixed in number,\n        // so we only have to handle enter and update. In contrast, the outliers\n        // and other elements are variable, so we need to exit them! Variable\n        // elements also fade in and out.\n        // Update center line: the vertical line spanning the whiskers.\n\n        var center = _g.selectAll('line.center').data(whiskerData ? [whiskerData] : []);\n\n        center.enter().insert('line', 'rect').attr('class', 'center').attr('x1', width / 2).attr('y1', function (d) {\n          return x0(d[0]);\n        }).attr('x2', width / 2).attr('y2', function (d) {\n          return x0(d[1]);\n        }).style('opacity', 1e-6).transition().duration(duration).delay(delay).style('opacity', 1).attr('y1', function (d) {\n          return x1(d[0]);\n        }).attr('y2', function (d) {\n          return x1(d[1]);\n        });\n        center.transition().duration(duration).delay(delay).style('opacity', 1).attr('x1', width / 2).attr('x2', width / 2).attr('y1', function (d) {\n          return x1(d[0]);\n        }).attr('y2', function (d) {\n          return x1(d[1]);\n        });\n        center.exit().transition().duration(duration).delay(delay).style('opacity', 1e-6).attr('y1', function (d) {\n          return x1(d[0]);\n        }).attr('y2', function (d) {\n          return x1(d[1]);\n        }).remove(); // Update innerquartile box.\n\n        var _box = _g.selectAll('rect.box').data([quartileData]);\n\n        _box.enter().append('rect').attr('class', 'box').attr('x', 0).attr('y', function (d) {\n          return x0(d[2]);\n        }).attr('width', width).attr('height', function (d) {\n          return x0(d[0]) - x0(d[2]);\n        }).style('fill-opacity', renderDataPoints ? 0.1 : 1).transition().duration(duration).delay(delay).attr('y', function (d) {\n          return x1(d[2]);\n        }).attr('height', function (d) {\n          return x1(d[0]) - x1(d[2]);\n        });\n\n        _box.transition().duration(duration).delay(delay).attr('width', width).attr('y', function (d) {\n          return x1(d[2]);\n        }).attr('height', function (d) {\n          return x1(d[0]) - x1(d[2]);\n        }); // Update median line.\n\n\n        var medianLine = _g.selectAll('line.median').data([quartileData[1]]);\n\n        medianLine.enter().append('line').attr('class', 'median').attr('x1', 0).attr('y1', x0).attr('x2', width).attr('y2', x0).transition().duration(duration).delay(delay).attr('y1', x1).attr('y2', x1);\n        medianLine.transition().duration(duration).delay(delay).attr('x1', 0).attr('x2', width).attr('y1', x1).attr('y2', x1); // Update whiskers.\n\n        var whisker = _g.selectAll('line.whisker').data(whiskerData || []);\n\n        whisker.enter().insert('line', 'circle, text').attr('class', 'whisker').attr('x1', 0).attr('y1', x0).attr('x2', width).attr('y2', x0).style('opacity', 1e-6).transition().duration(duration).delay(delay).attr('y1', x1).attr('y2', x1).style('opacity', 1);\n        whisker.transition().duration(duration).delay(delay).attr('x1', 0).attr('x2', width).attr('y1', x1).attr('y2', x1).style('opacity', 1);\n        whisker.exit().transition().duration(duration).delay(delay).attr('y1', x1).attr('y2', x1).style('opacity', 1e-6).remove(); // Update outliers.\n\n        if (showOutliers) {\n          var outlierClass = boldOutlier ? 'outlierBold' : 'outlier';\n          var outlierSize = boldOutlier ? 3 : 5;\n          var outlierX = boldOutlier ? function () {\n            return Math.floor(Math.random() * (width * dataWidthPortion) + 1 + (width - width * dataWidthPortion) / 2);\n          } : function () {\n            return width / 2;\n          };\n\n          var outlier = _g.selectAll(\"circle.\".concat(outlierClass)).data(outlierIndices, Number);\n\n          outlier.enter().insert('circle', 'text').attr('class', outlierClass).attr('r', outlierSize).attr('cx', outlierX).attr('cy', function (i) {\n            return x0(data[i]);\n          }).style('opacity', 1e-6).transition().duration(duration).delay(delay).attr('cy', function (i) {\n            return x1(data[i]);\n          }).style('opacity', 0.6);\n\n          if (renderTitle) {\n            outlier.selectAll('title').remove();\n            outlier.append('title').text(function (i) {\n              return data[i];\n            });\n          }\n\n          outlier.transition().duration(duration).delay(delay).attr('cx', outlierX).attr('cy', function (i) {\n            return x1(data[i]);\n          }).style('opacity', 0.6);\n          outlier.exit().transition().duration(duration).delay(delay).attr('cy', 0) //function (i) { return x1(d[i]); })\n          .style('opacity', 1e-6).remove();\n        } // Update Values\n\n\n        if (renderDataPoints) {\n          var point = _g.selectAll('circle.data').data(pointIndices);\n\n          point.enter().insert('circle', 'text').attr('class', 'data').attr('r', dataRadius).attr('cx', function () {\n            return Math.floor(Math.random() * (width * dataWidthPortion) + 1 + (width - width * dataWidthPortion) / 2);\n          }).attr('cy', function (i) {\n            return x0(data[i]);\n          }).style('opacity', 1e-6).transition().duration(duration).delay(delay).attr('cy', function (i) {\n            return x1(data[i]);\n          }).style('opacity', dataOpacity);\n\n          if (renderTitle) {\n            point.selectAll('title').remove();\n            point.append('title').text(function (i) {\n              return data[i];\n            });\n          }\n\n          point.transition().duration(duration).delay(delay).attr('cx', function () {\n            return Math.floor(Math.random() * (width * dataWidthPortion) + 1 + (width - width * dataWidthPortion) / 2);\n          }).attr('cy', function (i) {\n            return x1(data[i]);\n          }).style('opacity', dataOpacity);\n          point.exit().transition().duration(duration).delay(delay).attr('cy', 0).style('opacity', 1e-6).remove();\n        } // Compute the tick format.\n\n\n        var format = tickFormat || x1.tickFormat(8); // Update box ticks.\n\n        var boxTick = _g.selectAll('text.box').data(quartileData);\n\n        boxTick.enter().append('text').attr('class', 'box').attr('dy', '.3em').attr('dx', function (d, i) {\n          return i & 1 ? 6 : -6;\n        }).attr('x', function (d, i) {\n          return i & 1 ? width : 0;\n        }).attr('y', x0).attr('text-anchor', function (d, i) {\n          return i & 1 ? 'start' : 'end';\n        }).text(format).transition().duration(duration).delay(delay).attr('y', x1);\n        boxTick.transition().duration(duration).delay(delay).text(format).attr('x', function (d, i) {\n          return i & 1 ? width : 0;\n        }).attr('y', x1); // Update whisker ticks. These are handled separately from the box\n        // ticks because they may or may not exist, and we want don't want\n        // to join box ticks pre-transition with whisker ticks post-.\n\n        var whiskerTick = _g.selectAll('text.whisker').data(whiskerData || []);\n\n        whiskerTick.enter().append('text').attr('class', 'whisker').attr('dy', '.3em').attr('dx', 6).attr('x', width).attr('y', x0).text(format).style('opacity', 1e-6).transition().duration(duration).delay(delay).attr('y', x1).style('opacity', 1);\n        whiskerTick.transition().duration(duration).delay(delay).text(format).attr('x', width).attr('y', x1).style('opacity', 1);\n        whiskerTick.exit().transition().duration(duration).delay(delay).attr('y', x1).style('opacity', 1e-6).remove(); // Remove temporary quartiles element from within data array.\n\n        delete data.quartiles;\n      });\n      d3Timer.timerFlush();\n    }\n\n    box.width = function (x) {\n      if (!arguments.length) {\n        return width;\n      }\n\n      width = x;\n      return box;\n    };\n\n    box.height = function (x) {\n      if (!arguments.length) {\n        return height;\n      }\n\n      height = x;\n      return box;\n    };\n\n    box.tickFormat = function (x) {\n      if (!arguments.length) {\n        return tickFormat;\n      }\n\n      tickFormat = x;\n      return box;\n    };\n\n    box.showOutliers = function (x) {\n      if (!arguments.length) {\n        return showOutliers;\n      }\n\n      showOutliers = x;\n      return box;\n    };\n\n    box.boldOutlier = function (x) {\n      if (!arguments.length) {\n        return boldOutlier;\n      }\n\n      boldOutlier = x;\n      return box;\n    };\n\n    box.renderDataPoints = function (x) {\n      if (!arguments.length) {\n        return renderDataPoints;\n      }\n\n      renderDataPoints = x;\n      return box;\n    };\n\n    box.renderTitle = function (x) {\n      if (!arguments.length) {\n        return renderTitle;\n      }\n\n      renderTitle = x;\n      return box;\n    };\n\n    box.dataOpacity = function (x) {\n      if (!arguments.length) {\n        return dataOpacity;\n      }\n\n      dataOpacity = x;\n      return box;\n    };\n\n    box.dataWidthPortion = function (x) {\n      if (!arguments.length) {\n        return dataWidthPortion;\n      }\n\n      dataWidthPortion = x;\n      return box;\n    };\n\n    box.duration = function (x) {\n      if (!arguments.length) {\n        return duration;\n      }\n\n      duration = x;\n      return box;\n    };\n\n    box.domain = function (x) {\n      if (!arguments.length) {\n        return domain;\n      }\n\n      domain = x === null ? x : typeof x === 'function' ? x : utils.constant(x);\n      return box;\n    };\n\n    box.value = function (x) {\n      if (!arguments.length) {\n        return value;\n      }\n\n      value = x;\n      return box;\n    };\n\n    box.whiskers = function (x) {\n      if (!arguments.length) {\n        return whiskers;\n      }\n\n      whiskers = x;\n      return box;\n    };\n\n    box.quartiles = function (x) {\n      if (!arguments.length) {\n        return quartiles;\n      }\n\n      quartiles = x;\n      return box;\n    };\n\n    return box;\n  };\n\n  function boxWhiskers(d) {\n    return [0, d.length - 1];\n  }\n\n  function boxQuartiles(d) {\n    return [d3Array.quantile(d, 0.25), d3Array.quantile(d, 0.5), d3Array.quantile(d, 0.75)];\n  }\n  /**\n   * Stack Mixin is an mixin that provides cross-chart support of stackability using d3.stack.\n   * @mixin StackMixin\n   * @mixes CoordinateGridMixin\n   */\n\n\n  var StackMixin = /*#__PURE__*/function (_CoordinateGridMixin) {\n    _inherits(StackMixin, _CoordinateGridMixin);\n\n    var _super8 = _createSuper(StackMixin);\n\n    function StackMixin() {\n      var _this34;\n\n      _classCallCheck(this, StackMixin);\n\n      _this34 = _super8.call(this);\n      _this34._stackLayout = d3Shape.stack();\n      _this34._stack = [];\n      _this34._titles = {};\n      _this34._hidableStacks = false;\n      _this34._evadeDomainFilter = false;\n\n      _this34.data(function () {\n        var layers = _this34._stack.filter(_this34._visibility);\n\n        if (!layers.length) {\n          return [];\n        }\n\n        layers.forEach(function (l, i) {\n          return _this34._prepareValues(l, i);\n        });\n        var v4data = layers[0].values.map(function (v, i) {\n          var col = {\n            x: v.x\n          };\n          layers.forEach(function (layer) {\n            col[layer.name] = layer.values[i].y;\n          });\n          return col;\n        });\n        var keys = layers.map(function (layer) {\n          return layer.name;\n        });\n\n        var v4result = _this34.stackLayout().keys(keys)(v4data);\n\n        v4result.forEach(function (series, i) {\n          series.forEach(function (ys, j) {\n            layers[i].values[j].y0 = ys[0];\n            layers[i].values[j].y1 = ys[1];\n          });\n        });\n        return layers;\n      });\n\n      _this34.colorAccessor(function (d) {\n        return this.layer || this.name || d.name || d.layer;\n      });\n\n      return _this34;\n    }\n\n    _createClass(StackMixin, [{\n      key: \"_prepareValues\",\n      value: function _prepareValues(layer, layerIdx) {\n        var _this35 = this;\n\n        var valAccessor = layer.accessor || this.valueAccessor();\n        layer.name = String(layer.name || layerIdx);\n        var allValues = layer.group.all().map(function (d, i) {\n          return {\n            x: _this35.keyAccessor()(d, i),\n            y: layer.hidden ? null : valAccessor(d, i),\n            data: d,\n            layer: layer.name,\n            hidden: layer.hidden\n          };\n        });\n        layer.domainValues = allValues.filter(function (l) {\n          return _this35._domainFilter()(l);\n        });\n        layer.values = this.evadeDomainFilter() ? allValues : layer.domainValues;\n      }\n    }, {\n      key: \"_domainFilter\",\n      value: function _domainFilter() {\n        if (!this.x()) {\n          return utils.constant(true);\n        }\n\n        var xDomain = this.x().domain();\n\n        if (this.isOrdinal()) {\n          // TODO #416\n          //var domainSet = d3.set(xDomain);\n          return function () {\n            return true;\n          } //domainSet.has(p.x);\n          ;\n        }\n\n        if (this.elasticX()) {\n          return function () {\n            return true;\n          };\n        }\n\n        return function (p) {\n          return p.x >= xDomain[0] && p.x <= xDomain[xDomain.length - 1];\n        };\n      }\n      /**\n       * Stack a new crossfilter group onto this chart with an optional custom value accessor. All stacks\n       * in the same chart will share the same key accessor and therefore the same set of keys.\n       *\n       * For example, in a stacked bar chart, the bars of each stack will be positioned using the same set\n       * of keys on the x axis, while stacked vertically. If name is specified then it will be used to\n       * generate the legend label.\n       * @see {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#group-map-reduce crossfilter.group}\n       * @example\n       * // stack group using default accessor\n       * chart.stack(valueSumGroup)\n       * // stack group using custom accessor\n       * .stack(avgByDayGroup, function(d){return d.value.avgByDay;});\n       * @param {crossfilter.group} group\n       * @param {String} [name]\n       * @param {Function} [accessor]\n       * @returns {Array<{group: crossfilter.group, name: String, accessor: Function}>|StackMixin}\n       */\n\n    }, {\n      key: \"stack\",\n      value: function stack(group, name, accessor) {\n        if (!arguments.length) {\n          return this._stack;\n        }\n\n        if (arguments.length <= 2) {\n          accessor = name;\n        }\n\n        var layer = {\n          group: group\n        };\n\n        if (typeof name === 'string') {\n          layer.name = name;\n        }\n\n        if (typeof accessor === 'function') {\n          layer.accessor = accessor;\n        }\n\n        this._stack.push(layer);\n\n        return this;\n      }\n    }, {\n      key: \"group\",\n      value: function group(g, n, f) {\n        if (!arguments.length) {\n          return _get(_getPrototypeOf(StackMixin.prototype), \"group\", this).call(this);\n        }\n\n        this._stack = [];\n        this._titles = {};\n        this.stack(g, n);\n\n        if (f) {\n          this.valueAccessor(f);\n        }\n\n        return _get(_getPrototypeOf(StackMixin.prototype), \"group\", this).call(this, g, n);\n      }\n      /**\n       * Allow named stacks to be hidden or shown by clicking on legend items.\n       * This does not affect the behavior of hideStack or showStack.\n       * @param {Boolean} [hidableStacks=false]\n       * @returns {Boolean|StackMixin}\n       */\n\n    }, {\n      key: \"hidableStacks\",\n      value: function hidableStacks(_hidableStacks) {\n        if (!arguments.length) {\n          return this._hidableStacks;\n        }\n\n        this._hidableStacks = _hidableStacks;\n        return this;\n      }\n    }, {\n      key: \"_findLayerByName\",\n      value: function _findLayerByName(n) {\n        var i = this._stack.map(pluck('name')).indexOf(n);\n\n        return this._stack[i];\n      }\n      /**\n       * Hide all stacks on the chart with the given name.\n       * The chart must be re-rendered for this change to appear.\n       * @param {String} stackName\n       * @returns {StackMixin}\n       */\n\n    }, {\n      key: \"hideStack\",\n      value: function hideStack(stackName) {\n        var layer = this._findLayerByName(stackName);\n\n        if (layer) {\n          layer.hidden = true;\n        }\n\n        return this;\n      }\n      /**\n       * Show all stacks on the chart with the given name.\n       * The chart must be re-rendered for this change to appear.\n       * @param {String} stackName\n       * @returns {StackMixin}\n       */\n\n    }, {\n      key: \"showStack\",\n      value: function showStack(stackName) {\n        var layer = this._findLayerByName(stackName);\n\n        if (layer) {\n          layer.hidden = false;\n        }\n\n        return this;\n      }\n    }, {\n      key: \"getValueAccessorByIndex\",\n      value: function getValueAccessorByIndex(index) {\n        return this._stack[index].accessor || this.valueAccessor();\n      }\n    }, {\n      key: \"yAxisMin\",\n      value: function yAxisMin() {\n        var m = d3Array.min(this._flattenStack(), function (p) {\n          return p.y < 0 ? p.y + p.y0 : p.y0;\n        });\n        return utils.subtract(m, this.yAxisPadding());\n      }\n    }, {\n      key: \"yAxisMax\",\n      value: function yAxisMax() {\n        var m = d3Array.max(this._flattenStack(), function (p) {\n          return p.y > 0 ? p.y + p.y0 : p.y0;\n        });\n        return utils.add(m, this.yAxisPadding());\n      }\n    }, {\n      key: \"_flattenStack\",\n      value: function _flattenStack() {\n        var _ref2;\n\n        // A round about way to achieve flatMap\n        // When target browsers support flatMap, just replace map -> flatMap, no concat needed\n        var values = this.data().map(function (layer) {\n          return layer.domainValues;\n        });\n        return (_ref2 = []).concat.apply(_ref2, _toConsumableArray(values));\n      }\n    }, {\n      key: \"xAxisMin\",\n      value: function xAxisMin() {\n        var m = d3Array.min(this._flattenStack(), pluck('x'));\n        return utils.subtract(m, this.xAxisPadding(), this.xAxisPaddingUnit());\n      }\n    }, {\n      key: \"xAxisMax\",\n      value: function xAxisMax() {\n        var m = d3Array.max(this._flattenStack(), pluck('x'));\n        return utils.add(m, this.xAxisPadding(), this.xAxisPaddingUnit());\n      }\n      /**\n       * Set or get the title function. Chart class will use this function to render svg title (usually interpreted by\n       * browser as tooltips) for each child element in the chart, i.e. a slice in a pie chart or a bubble in a bubble chart.\n       * Almost every chart supports title function however in grid coordinate chart you need to turn off brush in order to\n       * use title otherwise the brush layer will block tooltip trigger.\n       *\n       * If the first argument is a stack name, the title function will get or set the title for that stack. If stackName\n       * is not provided, the first stack is implied.\n       * @example\n       * // set a title function on 'first stack'\n       * chart.title('first stack', function(d) { return d.key + ': ' + d.value; });\n       * // get a title function from 'second stack'\n       * var secondTitleFunction = chart.title('second stack');\n       * @param {String} [stackName]\n       * @param {Function} [titleAccessor]\n       * @returns {String|StackMixin}\n       */\n\n    }, {\n      key: \"title\",\n      value: function title(stackName, titleAccessor) {\n        if (!stackName) {\n          return _get(_getPrototypeOf(StackMixin.prototype), \"title\", this).call(this);\n        }\n\n        if (typeof stackName === 'function') {\n          return _get(_getPrototypeOf(StackMixin.prototype), \"title\", this).call(this, stackName);\n        }\n\n        if (stackName === this._groupName && typeof titleAccessor === 'function') {\n          return _get(_getPrototypeOf(StackMixin.prototype), \"title\", this).call(this, titleAccessor);\n        }\n\n        if (typeof titleAccessor !== 'function') {\n          return this._titles[stackName] || _get(_getPrototypeOf(StackMixin.prototype), \"title\", this).call(this);\n        }\n\n        this._titles[stackName] = titleAccessor;\n        return this;\n      }\n      /**\n       * Gets or sets the stack layout algorithm, which computes a baseline for each stack and\n       * propagates it to the next.\n       * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Stack-Layout.md d3.stackD3v3}\n       * @param {Function} [_stack=d3.stackD3v3]\n       * @returns {Function|StackMixin}\n       */\n\n    }, {\n      key: \"stackLayout\",\n      value: function stackLayout(_stack) {\n        if (!arguments.length) {\n          return this._stackLayout;\n        }\n\n        this._stackLayout = _stack;\n        return this;\n      }\n      /**\n       * Since dc.js 2.0, there has been {@link https://github.com/dc-js/dc.js/issues/949 an issue}\n       * where points are filtered to the current domain. While this is a useful optimization, it is\n       * incorrectly implemented: the next point outside the domain is required in order to draw lines\n       * that are clipped to the bounds, as well as bars that are partly clipped.\n       *\n       * A fix will be included in dc.js 2.1.x, but a workaround is needed for dc.js 2.0 and until\n       * that fix is published, so set this flag to skip any filtering of points.\n       *\n       * Once the bug is fixed, this flag will have no effect, and it will be deprecated.\n       * @param {Boolean} [evadeDomainFilter=false]\n       * @returns {Boolean|StackMixin}\n       */\n\n    }, {\n      key: \"evadeDomainFilter\",\n      value: function evadeDomainFilter(_evadeDomainFilter) {\n        if (!arguments.length) {\n          return this._evadeDomainFilter;\n        }\n\n        this._evadeDomainFilter = _evadeDomainFilter;\n        return this;\n      }\n    }, {\n      key: \"_visibility\",\n      value: function _visibility(l) {\n        return !l.hidden;\n      }\n    }, {\n      key: \"_ordinalXDomain\",\n      value: function _ordinalXDomain() {\n        var flat = this._flattenStack().map(pluck('data'));\n\n        var ordered = this._computeOrderedGroups(flat);\n\n        return ordered.map(this.keyAccessor());\n      }\n    }, {\n      key: \"legendables\",\n      value: function legendables() {\n        var _this36 = this;\n\n        return this._stack.map(function (layer, i) {\n          return {\n            chart: _this36,\n            name: layer.name,\n            hidden: layer.hidden || false,\n            color: _this36.getColor.call(layer, layer.values, i)\n          };\n        });\n      }\n    }, {\n      key: \"isLegendableHidden\",\n      value: function isLegendableHidden(d) {\n        var layer = this._findLayerByName(d.name);\n\n        return layer ? layer.hidden : false;\n      }\n    }, {\n      key: \"legendToggle\",\n      value: function legendToggle(d) {\n        if (this._hidableStacks) {\n          if (this.isLegendableHidden(d)) {\n            this.showStack(d.name);\n          } else {\n            this.hideStack(d.name);\n          } //_chart.redraw();\n\n\n          this.renderGroup();\n        }\n      }\n    }]);\n\n    return StackMixin;\n  }(CoordinateGridMixin);\n\n  var MIN_BAR_WIDTH = 1;\n  var DEFAULT_GAP_BETWEEN_BARS = 2;\n  var LABEL_PADDING = 3;\n  /**\n   * Concrete bar chart/histogram implementation.\n   *\n   * Examples:\n   * - {@link http://dc-js.github.com/dc.js/ Nasdaq 100 Index}\n   * - {@link http://dc-js.github.com/dc.js/crime/index.html Canadian City Crime Stats}\n   * @mixes StackMixin\n   */\n\n  var BarChart = /*#__PURE__*/function (_StackMixin) {\n    _inherits(BarChart, _StackMixin);\n\n    var _super9 = _createSuper(BarChart);\n\n    /**\n     * Create a Bar Chart\n     * @example\n     * // create a bar chart under #chart-container1 element using the default global chart group\n     * var chart1 = new BarChart('#chart-container1');\n     * // create a bar chart under #chart-container2 element using chart group A\n     * var chart2 = new BarChart('#chart-container2', 'chartGroupA');\n     * // create a sub-chart under a composite parent chart\n     * var chart3 = new BarChart(compositeChart);\n     * @param {String|node|d3.selection|CompositeChart} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector}\n     * specifying a dom block element such as a div; or a dom element or d3 selection.  If the bar\n     * chart is a sub-chart in a {@link CompositeChart Composite Chart} then pass in the parent\n     * composite chart instance instead.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function BarChart(parent, chartGroup) {\n      var _this37;\n\n      _classCallCheck(this, BarChart);\n\n      _this37 = _super9.call(this);\n      _this37._gap = DEFAULT_GAP_BETWEEN_BARS;\n      _this37._centerBar = false;\n      _this37._alwaysUseRounding = false;\n      _this37._barWidth = undefined;\n\n      _this37.label(function (d) {\n        return utils.printSingleValue(d.y0 + d.y);\n      }, false);\n\n      _this37.anchor(parent, chartGroup);\n\n      return _this37;\n    }\n    /**\n     * Get or set the outer padding on an ordinal bar chart. This setting has no effect on non-ordinal charts.\n     * Will pad the width by `padding * barWidth` on each side of the chart.\n     * @param {Number} [padding=0.5]\n     * @returns {Number|BarChart}\n     */\n\n\n    _createClass(BarChart, [{\n      key: \"outerPadding\",\n      value: function outerPadding(padding) {\n        if (!arguments.length) {\n          return this._outerRangeBandPadding();\n        }\n\n        return this._outerRangeBandPadding(padding);\n      }\n    }, {\n      key: \"rescale\",\n      value: function rescale() {\n        _get(_getPrototypeOf(BarChart.prototype), \"rescale\", this).call(this);\n\n        this._barWidth = undefined;\n        return this;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        if (this.round() && this._centerBar && !this._alwaysUseRounding) {\n          logger.warn('By default, brush rounding is disabled if bars are centered. ' + 'See dc.js bar chart API documentation for details.');\n        }\n\n        return _get(_getPrototypeOf(BarChart.prototype), \"render\", this).call(this);\n      }\n    }, {\n      key: \"plotData\",\n      value: function plotData() {\n        var layers = this.chartBodyG().selectAll('g.stack').data(this.data());\n\n        this._calculateBarWidth();\n\n        layers = layers.enter().append('g').attr('class', function (d, i) {\n          return \"stack _\".concat(i);\n        }).merge(layers);\n        var last = layers.size() - 1;\n        {\n          var chart = this;\n          layers.each(function (d, i) {\n            var layer = d3Selection.select(this);\n\n            chart._renderBars(layer, i, d);\n\n            if (chart.renderLabel() && last === i) {\n              chart._renderLabels(layer, i, d);\n            }\n          });\n        }\n      }\n    }, {\n      key: \"_barHeight\",\n      value: function _barHeight(d) {\n        return utils.safeNumber(Math.abs(this.y()(d.y + d.y0) - this.y()(d.y0)));\n      }\n    }, {\n      key: \"_labelXPos\",\n      value: function _labelXPos(d) {\n        var x = this.x()(d.x);\n\n        if (!this._centerBar) {\n          x += this._barWidth / 2;\n        }\n\n        if (this.isOrdinal() && this._gap !== undefined) {\n          x += this._gap / 2;\n        }\n\n        return utils.safeNumber(x);\n      }\n    }, {\n      key: \"_labelYPos\",\n      value: function _labelYPos(d) {\n        var y = this.y()(d.y + d.y0);\n\n        if (d.y < 0) {\n          y -= this._barHeight(d);\n        }\n\n        return utils.safeNumber(y - LABEL_PADDING);\n      }\n    }, {\n      key: \"_renderLabels\",\n      value: function _renderLabels(layer, layerIndex, data) {\n        var _this38 = this;\n\n        var labels = layer.selectAll('text.barLabel').data(data.values, pluck('x'));\n        var labelsEnterUpdate = labels.enter().append('text').attr('class', 'barLabel').attr('text-anchor', 'middle').attr('x', function (d) {\n          return _this38._labelXPos(d);\n        }).attr('y', function (d) {\n          return _this38._labelYPos(d);\n        }).merge(labels);\n\n        if (this.isOrdinal()) {\n          labelsEnterUpdate.on('click', d3compat.eventHandler(function (d) {\n            return _this38.onClick(d);\n          }));\n          labelsEnterUpdate.attr('cursor', 'pointer');\n        }\n\n        transition(labelsEnterUpdate, this.transitionDuration(), this.transitionDelay()).attr('x', function (d) {\n          return _this38._labelXPos(d);\n        }).attr('y', function (d) {\n          return _this38._labelYPos(d);\n        }).text(function (d) {\n          return _this38.label()(d);\n        });\n        transition(labels.exit(), this.transitionDuration(), this.transitionDelay()).attr('height', 0).remove();\n      }\n    }, {\n      key: \"_barXPos\",\n      value: function _barXPos(d) {\n        var x = this.x()(d.x);\n\n        if (this._centerBar) {\n          x -= this._barWidth / 2;\n        }\n\n        if (this.isOrdinal() && this._gap !== undefined) {\n          x += this._gap / 2;\n        }\n\n        return utils.safeNumber(x);\n      }\n    }, {\n      key: \"_renderBars\",\n      value: function _renderBars(layer, layerIndex, data) {\n        var _this39 = this;\n\n        var bars = layer.selectAll('rect.bar').data(data.values, pluck('x'));\n        var enter = bars.enter().append('rect').attr('class', 'bar').classed('dc-tabbable', this._keyboardAccessible).attr('fill', pluck('data', this.getColor)).attr('x', function (d) {\n          return _this39._barXPos(d);\n        }).attr('y', this.yAxisHeight()).attr('height', 0);\n        var barsEnterUpdate = enter.merge(bars);\n\n        if (this.renderTitle()) {\n          enter.append('title').text(pluck('data', this.title(data.name)));\n        }\n\n        if (this.isOrdinal()) {\n          barsEnterUpdate.on('click', d3compat.eventHandler(function (d) {\n            return _this39.onClick(d);\n          }));\n        }\n\n        if (this._keyboardAccessible) {\n          this._makeKeyboardAccessible(this.onClick);\n        }\n\n        transition(barsEnterUpdate, this.transitionDuration(), this.transitionDelay()).attr('x', function (d) {\n          return _this39._barXPos(d);\n        }).attr('y', function (d) {\n          var y = _this39.y()(d.y + d.y0);\n\n          if (d.y < 0) {\n            y -= _this39._barHeight(d);\n          }\n\n          return utils.safeNumber(y);\n        }).attr('width', this._barWidth).attr('height', function (d) {\n          return _this39._barHeight(d);\n        }).attr('fill', pluck('data', this.getColor)).select('title').text(pluck('data', this.title(data.name)));\n        transition(bars.exit(), this.transitionDuration(), this.transitionDelay()).attr('x', function (d) {\n          return _this39.x()(d.x);\n        }).attr('width', this._barWidth * 0.9).remove();\n      }\n    }, {\n      key: \"_calculateBarWidth\",\n      value: function _calculateBarWidth() {\n        if (this._barWidth === undefined) {\n          var numberOfBars = this.xUnitCount(); // please can't we always use rangeBands for bar charts?\n\n          if (this.isOrdinal() && this._gap === undefined) {\n            this._barWidth = Math.floor(this.x().bandwidth());\n          } else if (this._gap) {\n            this._barWidth = Math.floor((this.xAxisLength() - (numberOfBars - 1) * this._gap) / numberOfBars);\n          } else {\n            this._barWidth = Math.floor(this.xAxisLength() / (1 + this.barPadding()) / numberOfBars);\n          }\n\n          if (this._barWidth === Infinity || isNaN(this._barWidth) || this._barWidth < MIN_BAR_WIDTH) {\n            this._barWidth = MIN_BAR_WIDTH;\n          }\n        }\n      }\n    }, {\n      key: \"fadeDeselectedArea\",\n      value: function fadeDeselectedArea(brushSelection) {\n        var _this40 = this;\n\n        var bars = this.chartBodyG().selectAll('rect.bar');\n\n        if (this.isOrdinal()) {\n          if (this.hasFilter()) {\n            bars.classed(constants.SELECTED_CLASS, function (d) {\n              return _this40.hasFilter(d.x);\n            });\n            bars.classed(constants.DESELECTED_CLASS, function (d) {\n              return !_this40.hasFilter(d.x);\n            });\n          } else {\n            bars.classed(constants.SELECTED_CLASS, false);\n            bars.classed(constants.DESELECTED_CLASS, false);\n          }\n        } else if (this.brushOn() || this.parentBrushOn()) {\n          if (!this.brushIsEmpty(brushSelection)) {\n            var start = brushSelection[0];\n            var end = brushSelection[1];\n            bars.classed(constants.DESELECTED_CLASS, function (d) {\n              return d.x < start || d.x >= end;\n            });\n          } else {\n            bars.classed(constants.DESELECTED_CLASS, false);\n          }\n        }\n      }\n      /**\n       * Whether the bar chart will render each bar centered around the data position on the x-axis.\n       * @param {Boolean} [centerBar=false]\n       * @returns {Boolean|BarChart}\n       */\n\n    }, {\n      key: \"centerBar\",\n      value: function centerBar(_centerBar) {\n        if (!arguments.length) {\n          return this._centerBar;\n        }\n\n        this._centerBar = _centerBar;\n        return this;\n      }\n    }, {\n      key: \"onClick\",\n      value: function onClick(d) {\n        _get(_getPrototypeOf(BarChart.prototype), \"onClick\", this).call(this, d.data);\n      }\n      /**\n       * Get or set the spacing between bars as a fraction of bar size. Valid values are between 0-1.\n       * Setting this value will also remove any previously set {@link BarChart#gap gap}. See the\n       * {@link https://github.com/d3/d3-scale/blob/master/README.md#scaleBand d3 docs}\n       * for a visual description of how the padding is applied.\n       * @param {Number} [barPadding=0]\n       * @returns {Number|BarChart}\n       */\n\n    }, {\n      key: \"barPadding\",\n      value: function barPadding(_barPadding) {\n        if (!arguments.length) {\n          return this._rangeBandPadding();\n        }\n\n        this._rangeBandPadding(_barPadding);\n\n        this._gap = undefined;\n        return this;\n      }\n    }, {\n      key: \"_useOuterPadding\",\n      value: function _useOuterPadding() {\n        return this._gap === undefined;\n      }\n      /**\n       * Manually set fixed gap (in px) between bars instead of relying on the default auto-generated\n       * gap.  By default the bar chart implementation will calculate and set the gap automatically\n       * based on the number of data points and the length of the x axis.\n       * @param {Number} [gap=2]\n       * @returns {Number|BarChart}\n       */\n\n    }, {\n      key: \"gap\",\n      value: function gap(_gap) {\n        if (!arguments.length) {\n          return this._gap;\n        }\n\n        this._gap = _gap;\n        return this;\n      }\n    }, {\n      key: \"extendBrush\",\n      value: function extendBrush(brushSelection) {\n        if (brushSelection && this.round() && (!this._centerBar || this._alwaysUseRounding)) {\n          brushSelection[0] = this.round()(brushSelection[0]);\n          brushSelection[1] = this.round()(brushSelection[1]);\n        }\n\n        return brushSelection;\n      }\n      /**\n       * Set or get whether rounding is enabled when bars are centered. If false, using\n       * rounding with centered bars will result in a warning and rounding will be ignored.  This flag\n       * has no effect if bars are not {@link BarChart#centerBar centered}.\n       * When using standard d3.js rounding methods, the brush often doesn't align correctly with\n       * centered bars since the bars are offset.  The rounding function must add an offset to\n       * compensate, such as in the following example.\n       * @example\n       * chart.round(function(n) { return Math.floor(n) + 0.5; });\n       * @param {Boolean} [alwaysUseRounding=false]\n       * @returns {Boolean|BarChart}\n       */\n\n    }, {\n      key: \"alwaysUseRounding\",\n      value: function alwaysUseRounding(_alwaysUseRounding) {\n        if (!arguments.length) {\n          return this._alwaysUseRounding;\n        }\n\n        this._alwaysUseRounding = _alwaysUseRounding;\n        return this;\n      }\n    }, {\n      key: \"legendHighlight\",\n      value: function legendHighlight(d) {\n        var colorFilter = function colorFilter(color, inv) {\n          return function () {\n            var item = d3Selection.select(this);\n            var match = item.attr('fill') === color;\n            return inv ? !match : match;\n          };\n        };\n\n        if (!this.isLegendableHidden(d)) {\n          this.g().selectAll('rect.bar').classed('highlight', colorFilter(d.color)).classed('fadeout', colorFilter(d.color, true));\n        }\n      }\n    }, {\n      key: \"legendReset\",\n      value: function legendReset() {\n        this.g().selectAll('rect.bar').classed('highlight', false).classed('fadeout', false);\n      }\n    }, {\n      key: \"xAxisMax\",\n      value: function xAxisMax() {\n        var max = _get(_getPrototypeOf(BarChart.prototype), \"xAxisMax\", this).call(this);\n\n        if ('resolution' in this.xUnits()) {\n          var res = this.xUnits().resolution;\n          max += res;\n        }\n\n        return max;\n      }\n    }]);\n\n    return BarChart;\n  }(StackMixin);\n\n  var barChart = function barChart(parent, chartGroup) {\n    return new BarChart(parent, chartGroup);\n  }; // Returns a function to compute the interquartile range.\n\n\n  function defaultWhiskersIQR(k) {\n    return function (d) {\n      var q1 = d.quartiles[0];\n      var q3 = d.quartiles[2];\n      var iqr = (q3 - q1) * k;\n      var i = -1;\n      var j = d.length;\n\n      do {\n        ++i;\n      } while (d[i] < q1 - iqr);\n\n      do {\n        --j;\n      } while (d[j] > q3 + iqr);\n\n      return [i, j];\n    };\n  }\n  /**\n   * A box plot is a chart that depicts numerical data via their quartile ranges.\n   *\n   * Examples:\n   * - {@link http://dc-js.github.io/dc.js/examples/boxplot-basic.html Boxplot Basic example}\n   * - {@link http://dc-js.github.io/dc.js/examples/boxplot-enhanced.html Boxplot Enhanced example}\n   * - {@link http://dc-js.github.io/dc.js/examples/boxplot-render-data.html Boxplot Render Data example}\n   * - {@link http://dc-js.github.io/dc.js/examples/boxplot-time.html Boxplot time example}\n   * @mixes CoordinateGridMixin\n   */\n\n\n  var BoxPlot = /*#__PURE__*/function (_CoordinateGridMixin2) {\n    _inherits(BoxPlot, _CoordinateGridMixin2);\n\n    var _super10 = _createSuper(BoxPlot);\n\n    /**\n     * Create a Box Plot.\n     *\n     * @example\n     * // create a box plot under #chart-container1 element using the default global chart group\n     * var boxPlot1 = new BoxPlot('#chart-container1');\n     * // create a box plot under #chart-container2 element using chart group A\n     * var boxPlot2 = new BoxPlot('#chart-container2', 'chartGroupA');\n     * @param {String|node|d3.selection} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector} specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function BoxPlot(parent, chartGroup) {\n      var _this41;\n\n      _classCallCheck(this, BoxPlot);\n\n      _this41 = _super10.call(this);\n      _this41._whiskerIqrFactor = 1.5;\n      _this41._whiskersIqr = defaultWhiskersIQR;\n      _this41._whiskers = _this41._whiskersIqr(_this41._whiskerIqrFactor);\n      _this41._box = d3Box();\n      _this41._tickFormat = null;\n      _this41._renderDataPoints = false;\n      _this41._dataOpacity = 0.3;\n      _this41._dataWidthPortion = 0.8;\n      _this41._showOutliers = true;\n      _this41._boldOutlier = false; // Used in yAxisMin and yAxisMax to add padding in pixel coordinates\n      // so the min and max data points/whiskers are within the chart\n\n      _this41._yRangePadding = 8;\n\n      _this41._boxWidth = function (innerChartWidth, xUnits) {\n        if (_this41.isOrdinal()) {\n          return _this41.x().bandwidth();\n        } else {\n          return innerChartWidth / (1 + _this41.boxPadding()) / xUnits;\n        }\n      }; // default to ordinal\n\n\n      _this41.x(d3Scale.scaleBand());\n\n      _this41.xUnits(units.ordinal); // valueAccessor should return an array of values that can be coerced into numbers\n      // or if data is overloaded for a static array of arrays, it should be `Number`.\n      // Empty arrays are not included.\n\n\n      _this41.data(function (group) {\n        return group.all().map(function (d) {\n          d.map = function (accessor) {\n            return accessor.call(d, d);\n          };\n\n          return d;\n        }).filter(function (d) {\n          var values = _this41.valueAccessor()(d);\n\n          return values.length !== 0;\n        });\n      });\n\n      _this41.boxPadding(0.8);\n\n      _this41.outerPadding(0.5);\n\n      _this41.anchor(parent, chartGroup);\n\n      return _this41;\n    }\n    /**\n     * Get or set the spacing between boxes as a fraction of box size. Valid values are within 0-1.\n     * See the {@link https://github.com/d3/d3-scale/blob/master/README.md#scaleBand d3 docs}\n     * for a visual description of how the padding is applied.\n     * @see {@link https://github.com/d3/d3-scale/blob/master/README.md#scaleBand d3.scaleBand}\n     * @param {Number} [padding=0.8]\n     * @returns {Number|BoxPlot}\n     */\n\n\n    _createClass(BoxPlot, [{\n      key: \"boxPadding\",\n      value: function boxPadding(padding) {\n        if (!arguments.length) {\n          return this._rangeBandPadding();\n        }\n\n        return this._rangeBandPadding(padding);\n      }\n      /**\n       * Get or set the outer padding on an ordinal box chart. This setting has no effect on non-ordinal charts\n       * or on charts with a custom {@link BoxPlot#boxWidth .boxWidth}. Will pad the width by\n       * `padding * barWidth` on each side of the chart.\n       * @param {Number} [padding=0.5]\n       * @returns {Number|BoxPlot}\n       */\n\n    }, {\n      key: \"outerPadding\",\n      value: function outerPadding(padding) {\n        if (!arguments.length) {\n          return this._outerRangeBandPadding();\n        }\n\n        return this._outerRangeBandPadding(padding);\n      }\n      /**\n       * Get or set the numerical width of the boxplot box. The width may also be a function taking as\n       * parameters the chart width excluding the right and left margins, as well as the number of x\n       * units.\n       * @example\n       * // Using numerical parameter\n       * chart.boxWidth(10);\n       * // Using function\n       * chart.boxWidth((innerChartWidth, xUnits) { ... });\n       * @param {Number|Function} [boxWidth=0.5]\n       * @returns {Number|Function|BoxPlot}\n       */\n\n    }, {\n      key: \"boxWidth\",\n      value: function boxWidth(_boxWidth) {\n        if (!arguments.length) {\n          return this._boxWidth;\n        }\n\n        this._boxWidth = typeof _boxWidth === 'function' ? _boxWidth : utils.constant(_boxWidth);\n        return this;\n      }\n    }, {\n      key: \"_boxTransform\",\n      value: function _boxTransform(d, i) {\n        var xOffset = this.x()(this.keyAccessor()(d, i));\n        return \"translate(\".concat(xOffset, \", 0)\");\n      }\n    }, {\n      key: \"_preprocessData\",\n      value: function _preprocessData() {\n        if (this.elasticX()) {\n          this.x().domain([]);\n        }\n      }\n    }, {\n      key: \"plotData\",\n      value: function plotData() {\n        this._calculatedBoxWidth = this._boxWidth(this.effectiveWidth(), this.xUnitCount());\n\n        this._box.whiskers(this._whiskers).width(this._calculatedBoxWidth).height(this.effectiveHeight()).value(this.valueAccessor()).domain(this.y().domain()).duration(this.transitionDuration()).tickFormat(this._tickFormat).renderDataPoints(this._renderDataPoints).dataOpacity(this._dataOpacity).dataWidthPortion(this._dataWidthPortion).renderTitle(this.renderTitle()).showOutliers(this._showOutliers).boldOutlier(this._boldOutlier);\n\n        var boxesG = this.chartBodyG().selectAll('g.box').data(this.data(), this.keyAccessor());\n\n        var boxesGEnterUpdate = this._renderBoxes(boxesG);\n\n        this._updateBoxes(boxesGEnterUpdate);\n\n        this._removeBoxes(boxesG);\n\n        this.fadeDeselectedArea(this.filter());\n      }\n    }, {\n      key: \"_renderBoxes\",\n      value: function _renderBoxes(boxesG) {\n        var _this42 = this;\n\n        var boxesGEnter = boxesG.enter().append('g');\n        boxesGEnter.attr('class', 'box').classed('dc-tabbable', this._keyboardAccessible).attr('transform', function (d, i) {\n          return _this42._boxTransform(d, i);\n        }).call(this._box).on('click', d3compat.eventHandler(function (d) {\n          _this42.filter(_this42.keyAccessor()(d));\n\n          _this42.redrawGroup();\n        })).selectAll('circle').classed('dc-tabbable', this._keyboardAccessible);\n\n        if (this._keyboardAccessible) {\n          this._makeKeyboardAccessible(this.onClick);\n        }\n\n        return boxesGEnter.merge(boxesG);\n      }\n    }, {\n      key: \"_updateBoxes\",\n      value: function _updateBoxes(boxesG) {\n        var _this43 = this;\n\n        var chart = this;\n        transition(boxesG, this.transitionDuration(), this.transitionDelay()).attr('transform', function (d, i) {\n          return _this43._boxTransform(d, i);\n        }).call(this._box).each(function (d) {\n          var color = chart.getColor(d, 0);\n          d3Selection.select(this).select('rect.box').attr('fill', color);\n          d3Selection.select(this).selectAll('circle.data').attr('fill', color);\n        });\n      }\n    }, {\n      key: \"_removeBoxes\",\n      value: function _removeBoxes(boxesG) {\n        boxesG.exit().remove().call(this._box);\n      }\n    }, {\n      key: \"_minDataValue\",\n      value: function _minDataValue() {\n        var _this44 = this;\n\n        return d3Array.min(this.data(), function (e) {\n          return d3Array.min(_this44.valueAccessor()(e));\n        });\n      }\n    }, {\n      key: \"_maxDataValue\",\n      value: function _maxDataValue() {\n        var _this45 = this;\n\n        return d3Array.max(this.data(), function (e) {\n          return d3Array.max(_this45.valueAccessor()(e));\n        });\n      }\n    }, {\n      key: \"_yAxisRangeRatio\",\n      value: function _yAxisRangeRatio() {\n        return (this._maxDataValue() - this._minDataValue()) / this.effectiveHeight();\n      }\n    }, {\n      key: \"onClick\",\n      value: function onClick(d) {\n        this.filter(this.keyAccessor()(d));\n        this.redrawGroup();\n      }\n    }, {\n      key: \"fadeDeselectedArea\",\n      value: function fadeDeselectedArea(brushSelection) {\n        var chart = this;\n\n        if (this.hasFilter()) {\n          if (this.isOrdinal()) {\n            this.g().selectAll('g.box').each(function (d) {\n              if (chart.isSelectedNode(d)) {\n                chart.highlightSelected(this);\n              } else {\n                chart.fadeDeselected(this);\n              }\n            });\n          } else {\n            if (!(this.brushOn() || this.parentBrushOn())) {\n              return;\n            }\n\n            var start = brushSelection[0];\n            var end = brushSelection[1];\n            this.g().selectAll('g.box').each(function (d) {\n              var key = chart.keyAccessor()(d);\n\n              if (key < start || key >= end) {\n                chart.fadeDeselected(this);\n              } else {\n                chart.highlightSelected(this);\n              }\n            });\n          }\n        } else {\n          this.g().selectAll('g.box').each(function () {\n            chart.resetHighlight(this);\n          });\n        }\n      }\n    }, {\n      key: \"isSelectedNode\",\n      value: function isSelectedNode(d) {\n        return this.hasFilter(this.keyAccessor()(d));\n      }\n    }, {\n      key: \"yAxisMin\",\n      value: function yAxisMin() {\n        var padding = this._yRangePadding * this._yAxisRangeRatio();\n\n        return utils.subtract(this._minDataValue() - padding, this.yAxisPadding());\n      }\n    }, {\n      key: \"yAxisMax\",\n      value: function yAxisMax() {\n        var padding = this._yRangePadding * this._yAxisRangeRatio();\n\n        return utils.add(this._maxDataValue() + padding, this.yAxisPadding());\n      }\n      /**\n       * Get or set the numerical format of the boxplot median, whiskers and quartile labels. Defaults\n       * to integer formatting.\n       * @example\n       * // format ticks to 2 decimal places\n       * chart.tickFormat(d3.format('.2f'));\n       * @param {Function} [tickFormat]\n       * @returns {Number|Function|BoxPlot}\n       */\n\n    }, {\n      key: \"tickFormat\",\n      value: function tickFormat(_tickFormat) {\n        if (!arguments.length) {\n          return this._tickFormat;\n        }\n\n        this._tickFormat = _tickFormat;\n        return this;\n      }\n      /**\n       * Get or set the amount of padding to add, in pixel coordinates, to the top and\n       * bottom of the chart to accommodate box/whisker labels.\n       * @example\n       * // allow more space for a bigger whisker font\n       * chart.yRangePadding(12);\n       * @param {Function} [yRangePadding = 8]\n       * @returns {Number|Function|BoxPlot}\n       */\n\n    }, {\n      key: \"yRangePadding\",\n      value: function yRangePadding(_yRangePadding) {\n        if (!arguments.length) {\n          return this._yRangePadding;\n        }\n\n        this._yRangePadding = _yRangePadding;\n        return this;\n      }\n      /**\n       * Get or set whether individual data points will be rendered.\n       * @example\n       * // Enable rendering of individual data points\n       * chart.renderDataPoints(true);\n       * @param {Boolean} [show=false]\n       * @returns {Boolean|BoxPlot}\n       */\n\n    }, {\n      key: \"renderDataPoints\",\n      value: function renderDataPoints(show) {\n        if (!arguments.length) {\n          return this._renderDataPoints;\n        }\n\n        this._renderDataPoints = show;\n        return this;\n      }\n      /**\n       * Get or set the opacity when rendering data.\n       * @example\n       * // If individual data points are rendered increase the opacity.\n       * chart.dataOpacity(0.7);\n       * @param {Number} [opacity=0.3]\n       * @returns {Number|BoxPlot}\n       */\n\n    }, {\n      key: \"dataOpacity\",\n      value: function dataOpacity(opacity) {\n        if (!arguments.length) {\n          return this._dataOpacity;\n        }\n\n        this._dataOpacity = opacity;\n        return this;\n      }\n      /**\n       * Get or set the portion of the width of the box to show data points.\n       * @example\n       * // If individual data points are rendered increase the data box.\n       * chart.dataWidthPortion(0.9);\n       * @param {Number} [percentage=0.8]\n       * @returns {Number|BoxPlot}\n       */\n\n    }, {\n      key: \"dataWidthPortion\",\n      value: function dataWidthPortion(percentage) {\n        if (!arguments.length) {\n          return this._dataWidthPortion;\n        }\n\n        this._dataWidthPortion = percentage;\n        return this;\n      }\n      /**\n       * Get or set whether outliers will be rendered.\n       * @example\n       * // Disable rendering of outliers\n       * chart.showOutliers(false);\n       * @param {Boolean} [show=true]\n       * @returns {Boolean|BoxPlot}\n       */\n\n    }, {\n      key: \"showOutliers\",\n      value: function showOutliers(show) {\n        if (!arguments.length) {\n          return this._showOutliers;\n        }\n\n        this._showOutliers = show;\n        return this;\n      }\n      /**\n       * Get or set whether outliers will be drawn bold.\n       * @example\n       * // If outliers are rendered display as bold\n       * chart.boldOutlier(true);\n       * @param {Boolean} [show=false]\n       * @returns {Boolean|BoxPlot}\n       */\n\n    }, {\n      key: \"boldOutlier\",\n      value: function boldOutlier(show) {\n        if (!arguments.length) {\n          return this._boldOutlier;\n        }\n\n        this._boldOutlier = show;\n        return this;\n      }\n    }]);\n\n    return BoxPlot;\n  }(CoordinateGridMixin);\n\n  var boxPlot = function boxPlot(parent, chartGroup) {\n    return new BoxPlot(parent, chartGroup);\n  };\n  /**\n   * A concrete implementation of a general purpose bubble chart that allows data visualization using the\n   * following dimensions:\n   * - x axis position\n   * - y axis position\n   * - bubble radius\n   * - color\n   *\n   * Examples:\n   * - {@link http://dc-js.github.com/dc.js/ Nasdaq 100 Index}\n   * - {@link http://dc-js.github.com/dc.js/vc/index.html US Venture Capital Landscape 2011}\n   * @mixes BubbleMixin\n   * @mixes CoordinateGridMixin\n   */\n\n\n  var BubbleChart = /*#__PURE__*/function (_BubbleMixin) {\n    _inherits(BubbleChart, _BubbleMixin);\n\n    var _super11 = _createSuper(BubbleChart);\n\n    /**\n     * Create a Bubble Chart.\n     *\n     * @example\n     * // create a bubble chart under #chart-container1 element using the default global chart group\n     * var bubbleChart1 = new BubbleChart('#chart-container1');\n     * // create a bubble chart under #chart-container2 element using chart group A\n     * var bubbleChart2 = new BubbleChart('#chart-container2', 'chartGroupA');\n     * @param {String|node|d3.selection} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector} specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function BubbleChart(parent, chartGroup) {\n      var _this46;\n\n      _classCallCheck(this, BubbleChart);\n\n      _this46 = _super11.call(this);\n\n      _this46.transitionDuration(750);\n\n      _this46.transitionDelay(0);\n\n      _this46.anchor(parent, chartGroup);\n\n      return _this46;\n    }\n\n    _createClass(BubbleChart, [{\n      key: \"_bubbleLocator\",\n      value: function _bubbleLocator(d) {\n        return \"translate(\".concat(this._bubbleX(d), \",\").concat(this._bubbleY(d), \")\");\n      }\n    }, {\n      key: \"plotData\",\n      value: function plotData() {\n        this.calculateRadiusDomain();\n        this.r().range([this.MIN_RADIUS, this.xAxisLength() * this.maxBubbleRelativeSize()]);\n        var data = this.data();\n        var bubbleG = this.chartBodyG().selectAll(\"g.\".concat(this.BUBBLE_NODE_CLASS)).data(data, function (d) {\n          return d.key;\n        });\n\n        if (this.sortBubbleSize() || this.keyboardAccessible()) {\n          // update dom order based on sort\n          bubbleG.order();\n        }\n\n        this._removeNodes(bubbleG);\n\n        bubbleG = this._renderNodes(bubbleG);\n\n        this._updateNodes(bubbleG);\n\n        this.fadeDeselectedArea(this.filter());\n      }\n    }, {\n      key: \"_renderNodes\",\n      value: function _renderNodes(bubbleG) {\n        var _this47 = this;\n\n        var bubbleGEnter = bubbleG.enter().append('g');\n        bubbleGEnter.attr('class', this.BUBBLE_NODE_CLASS).attr('transform', function (d) {\n          return _this47._bubbleLocator(d);\n        }).append('circle').attr('class', function (d, i) {\n          return \"\".concat(_this47.BUBBLE_CLASS, \" _\").concat(i);\n        }).on('click', d3compat.eventHandler(function (d) {\n          return _this47.onClick(d);\n        })).classed('dc-tabbable', this._keyboardAccessible).attr('fill', this.getColor).attr('r', 0);\n        bubbleG = bubbleGEnter.merge(bubbleG);\n        transition(bubbleG, this.transitionDuration(), this.transitionDelay()).select(\"circle.\".concat(this.BUBBLE_CLASS)).attr('r', function (d) {\n          return _this47.bubbleR(d);\n        }).attr('opacity', function (d) {\n          return _this47.bubbleR(d) > 0 ? 1 : 0;\n        });\n\n        if (this._keyboardAccessible) {\n          this._makeKeyboardAccessible(this.onClick);\n        }\n\n        this._doRenderLabel(bubbleGEnter);\n\n        this._doRenderTitles(bubbleGEnter);\n\n        return bubbleG;\n      }\n    }, {\n      key: \"_updateNodes\",\n      value: function _updateNodes(bubbleG) {\n        var _this48 = this;\n\n        transition(bubbleG, this.transitionDuration(), this.transitionDelay()).attr('transform', function (d) {\n          return _this48._bubbleLocator(d);\n        }).select(\"circle.\".concat(this.BUBBLE_CLASS)).attr('fill', this.getColor).attr('r', function (d) {\n          return _this48.bubbleR(d);\n        }).attr('opacity', function (d) {\n          return _this48.bubbleR(d) > 0 ? 1 : 0;\n        });\n        this.doUpdateLabels(bubbleG);\n        this.doUpdateTitles(bubbleG);\n      }\n    }, {\n      key: \"_removeNodes\",\n      value: function _removeNodes(bubbleG) {\n        bubbleG.exit().remove();\n      }\n    }, {\n      key: \"_bubbleX\",\n      value: function _bubbleX(d) {\n        var x = this.x()(this.keyAccessor()(d));\n\n        if (isNaN(x) || !isFinite(x)) {\n          x = 0;\n        }\n\n        return x;\n      }\n    }, {\n      key: \"_bubbleY\",\n      value: function _bubbleY(d) {\n        var y = this.y()(this.valueAccessor()(d));\n\n        if (isNaN(y) || !isFinite(y)) {\n          y = 0;\n        }\n\n        return y;\n      }\n    }, {\n      key: \"renderBrush\",\n      value: function renderBrush() {// override default x axis brush from parent chart\n      }\n    }, {\n      key: \"redrawBrush\",\n      value: function redrawBrush(brushSelection, doTransition) {\n        // override default x axis brush from parent chart\n        this.fadeDeselectedArea(brushSelection);\n      }\n    }]);\n\n    return BubbleChart;\n  }(BubbleMixin(CoordinateGridMixin));\n\n  var bubbleChart = function bubbleChart(parent, chartGroup) {\n    return new BubbleChart(parent, chartGroup);\n  };\n\n  var BUBBLE_OVERLAY_CLASS = 'bubble-overlay';\n  var BUBBLE_NODE_CLASS = 'node';\n  var BUBBLE_CLASS = 'bubble';\n  /**\n   * The bubble overlay chart is quite different from the typical bubble chart. With the bubble overlay\n   * chart you can arbitrarily place bubbles on an existing svg or bitmap image, thus changing the\n   * typical x and y positioning while retaining the capability to visualize data using bubble radius\n   * and coloring.\n   *\n   * Examples:\n   * - {@link http://dc-js.github.com/dc.js/crime/index.html Canadian City Crime Stats}\n   * @mixes BubbleMixin\n   * @mixes BaseMixin\n   */\n\n  var BubbleOverlay = /*#__PURE__*/function (_BubbleMixin2) {\n    _inherits(BubbleOverlay, _BubbleMixin2);\n\n    var _super12 = _createSuper(BubbleOverlay);\n\n    /**\n     * Create a Bubble Overlay.\n     *\n     * @example\n     * // create a bubble overlay chart on top of the '#chart-container1 svg' element using the default global chart group\n     * var bubbleChart1 = BubbleOverlayChart('#chart-container1').svg(d3.select('#chart-container1 svg'));\n     * // create a bubble overlay chart on top of the '#chart-container2 svg' element using chart group A\n     * var bubbleChart2 = new CompositeChart('#chart-container2', 'chartGroupA').svg(d3.select('#chart-container2 svg'));\n     * @param {String|node|d3.selection} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector} specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function BubbleOverlay(parent, chartGroup) {\n      var _this49;\n\n      _classCallCheck(this, BubbleOverlay);\n\n      _this49 = _super12.call(this);\n      /**\n       * **mandatory**\n       *\n       * Set the underlying svg image element. Unlike other dc charts this chart will not generate a svg\n       * element; therefore the bubble overlay chart will not work if this function is not invoked. If the\n       * underlying image is a bitmap, then an empty svg will need to be created on top of the image.\n       * @example\n       * // set up underlying svg element\n       * chart.svg(d3.select('#chart svg'));\n       * @param {SVGElement|d3.selection} [imageElement]\n       * @returns {BubbleOverlay}\n       */\n\n      _this49._g = undefined;\n      _this49._points = [];\n      _this49._keyboardAccessible = false;\n\n      _this49.transitionDuration(750);\n\n      _this49.transitionDelay(0);\n\n      _this49.radiusValueAccessor(function (d) {\n        return d.value;\n      });\n\n      _this49.anchor(parent, chartGroup);\n\n      return _this49;\n    }\n    /**\n     * **mandatory**\n     *\n     * Set up a data point on the overlay. The name of a data point should match a specific 'key' among\n     * data groups generated using keyAccessor.  If a match is found (point name <-> data group key)\n     * then a bubble will be generated at the position specified by the function. x and y\n     * value specified here are relative to the underlying svg.\n     * @param {String} name\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {BubbleOverlay}\n     */\n\n\n    _createClass(BubbleOverlay, [{\n      key: \"point\",\n      value: function point(name, x, y) {\n        this._points.push({\n          name: name,\n          x: x,\n          y: y\n        });\n\n        return this;\n      }\n    }, {\n      key: \"_doRender\",\n      value: function _doRender() {\n        this._g = this._initOverlayG();\n        this.r().range([this.MIN_RADIUS, this.width() * this.maxBubbleRelativeSize()]);\n\n        this._initializeBubbles();\n\n        this.fadeDeselectedArea(this.filter());\n        return this;\n      }\n    }, {\n      key: \"_initOverlayG\",\n      value: function _initOverlayG() {\n        this._g = this.select(\"g.\".concat(BUBBLE_OVERLAY_CLASS));\n\n        if (this._g.empty()) {\n          this._g = this.svg().append('g').attr('class', BUBBLE_OVERLAY_CLASS);\n        }\n\n        return this._g;\n      }\n    }, {\n      key: \"_initializeBubbles\",\n      value: function _initializeBubbles() {\n        var _this50 = this;\n\n        var data = this._mapData();\n\n        this.calculateRadiusDomain();\n\n        this._points.forEach(function (point) {\n          var nodeG = _this50._getNodeG(point, data);\n\n          var circle = nodeG.select(\"circle.\".concat(BUBBLE_CLASS));\n\n          if (circle.empty()) {\n            circle = nodeG.append('circle').attr('class', BUBBLE_CLASS).classed('dc-tabbable', _this50._keyboardAccessible).attr('r', 0).attr('fill', _this50.getColor).on('click', d3compat.eventHandler(function (d) {\n              return _this50.onClick(d);\n            }));\n          }\n\n          if (_this50._keyboardAccessible) {\n            _this50._makeKeyboardAccessible(_this50.onClick);\n          }\n\n          transition(circle, _this50.transitionDuration(), _this50.transitionDelay()).attr('r', function (d) {\n            return _this50.bubbleR(d);\n          });\n\n          _this50._doRenderLabel(nodeG);\n\n          _this50._doRenderTitles(nodeG);\n        });\n      }\n    }, {\n      key: \"_mapData\",\n      value: function _mapData() {\n        var _this51 = this;\n\n        var data = {};\n        this.data().forEach(function (datum) {\n          data[_this51.keyAccessor()(datum)] = datum;\n        });\n        return data;\n      }\n    }, {\n      key: \"_getNodeG\",\n      value: function _getNodeG(point, data) {\n        var bubbleNodeClass = \"\".concat(BUBBLE_NODE_CLASS, \" \").concat(utils.nameToId(point.name));\n\n        var nodeG = this._g.select(\"g.\".concat(utils.nameToId(point.name)));\n\n        if (nodeG.empty()) {\n          nodeG = this._g.append('g').attr('class', bubbleNodeClass).attr('transform', \"translate(\".concat(point.x, \",\").concat(point.y, \")\"));\n        }\n\n        nodeG.datum(data[point.name]);\n        return nodeG;\n      }\n    }, {\n      key: \"_doRedraw\",\n      value: function _doRedraw() {\n        this._updateBubbles();\n\n        this.fadeDeselectedArea(this.filter());\n        return this;\n      }\n    }, {\n      key: \"_updateBubbles\",\n      value: function _updateBubbles() {\n        var _this52 = this;\n\n        var data = this._mapData();\n\n        this.calculateRadiusDomain();\n\n        this._points.forEach(function (point) {\n          var nodeG = _this52._getNodeG(point, data);\n\n          var circle = nodeG.select(\"circle.\".concat(BUBBLE_CLASS));\n          transition(circle, _this52.transitionDuration(), _this52.transitionDelay()).attr('r', function (d) {\n            return _this52.bubbleR(d);\n          }).attr('fill', _this52.getColor);\n\n          _this52.doUpdateLabels(nodeG);\n\n          _this52.doUpdateTitles(nodeG);\n        });\n      }\n    }, {\n      key: \"debug\",\n      value: function debug(flag) {\n        if (flag) {\n          var debugG = this.select(\"g.\".concat(constants.DEBUG_GROUP_CLASS));\n\n          if (debugG.empty()) {\n            debugG = this.svg().append('g').attr('class', constants.DEBUG_GROUP_CLASS);\n          }\n\n          var debugText = debugG.append('text').attr('x', 10).attr('y', 20);\n          debugG.append('rect').attr('width', this.width()).attr('height', this.height()).on('mousemove', d3compat.eventHandler(function (d, evt) {\n            var position = d3compat.pointer(evt, debugG.node());\n            var msg = \"\".concat(position[0], \", \").concat(position[1]);\n            debugText.text(msg);\n          }));\n        } else {\n          this.selectAll('.debug').remove();\n        }\n\n        return this;\n      }\n    }]);\n\n    return BubbleOverlay;\n  }(BubbleMixin(BaseMixin));\n\n  var bubbleOverlay = function bubbleOverlay(parent, chartGroup) {\n    return new BubbleOverlay(parent, chartGroup);\n  };\n\n  var GROUP_CSS_CLASS = 'dc-cbox-group';\n  var ITEM_CSS_CLASS = 'dc-cbox-item';\n  /**\n   * The CboxMenu is a simple widget designed to filter a dimension by\n   * selecting option(s) from a set of HTML `<input />` elements. The menu can be\n   * made into a set of radio buttons (single select) or checkboxes (multiple).\n   * @mixes BaseMixin\n   */\n\n  var CboxMenu = /*#__PURE__*/function (_BaseMixin2) {\n    _inherits(CboxMenu, _BaseMixin2);\n\n    var _super13 = _createSuper(CboxMenu);\n\n    /**\n     * Create a Cbox Menu.\n     *\n     * @example\n     * // create a cboxMenu under #cbox-container using the default global chart group\n     * var cbox = new CboxMenu('#cbox-container')\n     *                .dimension(states)\n     *                .group(stateGroup);\n     * // the option text can be set via the title() function\n     * // by default the option text is '`key`: `value`'\n     * cbox.title(function (d){\n     *     return 'STATE: ' + d.key;\n     * })\n     * @param {String|node|d3.selection|CompositeChart} parent - Any valid\n     * [d3 single selector](https://github.com/mbostock/d3/wiki/Selections#selecting-elements) specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this widget should be placed in.\n     * Interaction with the widget will only trigger events and redraws within its group.\n     */\n    function CboxMenu(parent, chartGroup) {\n      var _this53;\n\n      _classCallCheck(this, CboxMenu);\n\n      _this53 = _super13.call(this);\n      _this53._cbox = undefined;\n      _this53._promptText = 'Select all';\n      _this53._multiple = false;\n      _this53._inputType = 'radio';\n      _this53._promptValue = null;\n      _this53._uniqueId = utils.uniqueId();\n\n      _this53.data(function (group) {\n        return group.all().filter(_this53._filterDisplayed);\n      }); // There is an accessor for this attribute, initialized with default value\n\n\n      _this53._filterDisplayed = function (d) {\n        return _this53.valueAccessor()(d) > 0;\n      };\n\n      _this53._order = function (a, b) {\n        if (_this53.keyAccessor()(a) > _this53.keyAccessor()(b)) {\n          return 1;\n        }\n\n        if (_this53.keyAccessor()(a) < _this53.keyAccessor()(b)) {\n          return -1;\n        }\n\n        return 0;\n      };\n\n      _this53.anchor(parent, chartGroup);\n\n      return _this53;\n    }\n\n    _createClass(CboxMenu, [{\n      key: \"_doRender\",\n      value: function _doRender() {\n        return this._doRedraw();\n      }\n    }, {\n      key: \"_doRedraw\",\n      value: function _doRedraw() {\n        var _this54 = this;\n\n        this.select('ul').remove();\n        this._cbox = this.root().append('ul').classed(GROUP_CSS_CLASS, true);\n\n        this._renderOptions();\n\n        if (this.hasFilter() && this._multiple) {\n          this._cbox.selectAll('input') // adding `false` avoids failing test cases in phantomjs\n          .property('checked', function (d) {\n            return d && _this54.filters().indexOf(String(_this54.keyAccessor()(d))) >= 0 || false;\n          });\n        } else if (this.hasFilter()) {\n          this._cbox.selectAll('input').property('checked', function (d) {\n            if (!d) {\n              return false;\n            }\n\n            return _this54.keyAccessor()(d) === _this54.filter();\n          });\n        }\n\n        return this;\n      }\n    }, {\n      key: \"_renderOptions\",\n      value: function _renderOptions() {\n        var _this55 = this;\n\n        var options = this._cbox.selectAll(\"li.\".concat(ITEM_CSS_CLASS)).data(this.data(), function (d) {\n          return _this55.keyAccessor()(d);\n        });\n\n        options.exit().remove();\n        options = options.enter().append('li').classed(ITEM_CSS_CLASS, true).merge(options);\n        options.append('input').attr('type', this._inputType).attr('value', function (d) {\n          return _this55.keyAccessor()(d);\n        }).attr('name', \"domain_\".concat(this._uniqueId)).attr('id', function (d, i) {\n          return \"input_\".concat(_this55._uniqueId, \"_\").concat(i);\n        });\n        options.append('label').attr('for', function (d, i) {\n          return \"input_\".concat(_this55._uniqueId, \"_\").concat(i);\n        }).text(this.title());\n        var chart = this; // 'all' option\n\n        if (this._multiple) {\n          this._cbox.append('li').append('input').attr('type', 'reset').text(this._promptText).on('click', d3compat.eventHandler(function (d, evt) {\n            return chart._onChange(d, evt, this);\n          }));\n        } else {\n          var li = this._cbox.append('li');\n\n          li.append('input').attr('type', this._inputType).attr('value', this._promptValue).attr('name', \"domain_\".concat(this._uniqueId)).attr('id', function (d, i) {\n            return \"input_\".concat(_this55._uniqueId, \"_all\");\n          }).property('checked', true);\n          li.append('label').attr('for', function (d, i) {\n            return \"input_\".concat(_this55._uniqueId, \"_all\");\n          }).text(this._promptText);\n        }\n\n        this._cbox.selectAll(\"li.\".concat(ITEM_CSS_CLASS)).sort(this._order);\n\n        this._cbox.on('change', d3compat.eventHandler(function (d, evt) {\n          return chart._onChange(d, evt, this);\n        }));\n\n        return options;\n      }\n    }, {\n      key: \"_onChange\",\n      value: function _onChange(d, evt, element) {\n        var values;\n        var target = d3Selection.select(evt.target);\n        var options;\n\n        if (!target.datum()) {\n          values = this._promptValue || null;\n        } else {\n          options = d3Selection.select(element).selectAll('input').filter(function (o) {\n            if (o) {\n              return this.checked;\n            }\n          });\n          values = options.nodes().map(function (option) {\n            return option.value;\n          }); // check if only prompt option is selected\n\n          if (!this._multiple && values.length === 1) {\n            values = values[0];\n          }\n        }\n\n        this.onChange(values);\n      }\n    }, {\n      key: \"onChange\",\n      value: function onChange(val) {\n        var _this56 = this;\n\n        if (val && this._multiple) {\n          this.replaceFilter([val]);\n        } else if (val) {\n          this.replaceFilter(val);\n        } else {\n          this.filterAll();\n        }\n\n        events.trigger(function () {\n          _this56.redrawGroup();\n        });\n      }\n      /**\n       * Get or set the function that controls the ordering of option tags in the\n       * cbox menu. By default options are ordered by the group key in ascending\n       * order.\n       * @param {Function} [order]\n       * @returns {Function|CboxMenu}\n       * @example\n       * // order by the group's value\n       * chart.order(function (a,b) {\n       *     return a.value > b.value ? 1 : b.value > a.value ? -1 : 0;\n       * });\n       */\n\n    }, {\n      key: \"order\",\n      value: function order(_order) {\n        if (!arguments.length) {\n          return this._order;\n        }\n\n        this._order = _order;\n        return this;\n      }\n      /**\n       * Get or set the text displayed in the options used to prompt selection.\n       * @param {String} [promptText='Select all']\n       * @returns {String|CboxMenu}\n       * @example\n       * chart.promptText('All states');\n       */\n\n    }, {\n      key: \"promptText\",\n      value: function promptText(_promptText) {\n        if (!arguments.length) {\n          return this._promptText;\n        }\n\n        this._promptText = _promptText;\n        return this;\n      }\n      /**\n       * Get or set the function that filters options prior to display. By default options\n       * with a value of < 1 are not displayed.\n       * @param {function} [filterDisplayed]\n       * @returns {Function|CboxMenu}\n       * @example\n       * // display all options override the `filterDisplayed` function:\n       * chart.filterDisplayed(function () {\n       *     return true;\n       * });\n       */\n\n    }, {\n      key: \"filterDisplayed\",\n      value: function filterDisplayed(_filterDisplayed) {\n        if (!arguments.length) {\n          return this._filterDisplayed;\n        }\n\n        this._filterDisplayed = _filterDisplayed;\n        return this;\n      }\n      /**\n       * Controls the type of input element. Setting it to true converts\n       * the HTML `input` tags from radio buttons to checkboxes.\n       * @param {boolean} [multiple=false]\n       * @returns {Boolean|CboxMenu}\n       * @example\n       * chart.multiple(true);\n       */\n\n    }, {\n      key: \"multiple\",\n      value: function multiple(_multiple) {\n        if (!arguments.length) {\n          return this._multiple;\n        }\n\n        this._multiple = _multiple;\n\n        if (this._multiple) {\n          this._inputType = 'checkbox';\n        } else {\n          this._inputType = 'radio';\n        }\n\n        return this;\n      }\n      /**\n       * Controls the default value to be used for\n       * [dimension.filter](https://github.com/crossfilter/crossfilter/wiki/API-Reference#dimension_filter)\n       * when only the prompt value is selected. If `null` (the default), no filtering will occur when\n       * just the prompt is selected.\n       * @param {?*} [promptValue=null]\n       * @returns {*|CboxMenu}\n       */\n\n    }, {\n      key: \"promptValue\",\n      value: function promptValue(_promptValue) {\n        if (!arguments.length) {\n          return this._promptValue;\n        }\n\n        this._promptValue = _promptValue;\n        return this;\n      }\n    }]);\n\n    return CboxMenu;\n  }(BaseMixin);\n\n  var cboxMenu = function cboxMenu(parent, chartGroup) {\n    return new CboxMenu(parent, chartGroup);\n  };\n\n  var SUB_CHART_CLASS = 'sub';\n  var DEFAULT_RIGHT_Y_AXIS_LABEL_PADDING = 12;\n  /**\n   * Composite charts are a special kind of chart that render multiple charts on the same Coordinate\n   * Grid. You can overlay (compose) different bar/line/area charts in a single composite chart to\n   * achieve some quite flexible charting effects.\n   * @mixes CoordinateGridMixin\n   */\n\n  var CompositeChart = /*#__PURE__*/function (_CoordinateGridMixin3) {\n    _inherits(CompositeChart, _CoordinateGridMixin3);\n\n    var _super14 = _createSuper(CompositeChart);\n\n    /**\n     * Create a Composite Chart.\n     * @example\n     * // create a composite chart under #chart-container1 element using the default global chart group\n     * var compositeChart1 = new CompositeChart('#chart-container1');\n     * // create a composite chart under #chart-container2 element using chart group A\n     * var compositeChart2 = new CompositeChart('#chart-container2', 'chartGroupA');\n     * @param {String|node|d3.selection} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector} specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function CompositeChart(parent, chartGroup) {\n      var _this57;\n\n      _classCallCheck(this, CompositeChart);\n\n      _this57 = _super14.call(this);\n      _this57._children = [];\n      _this57._childOptions = {};\n      _this57._shareColors = false;\n      _this57._shareTitle = true;\n      _this57._alignYAxes = false;\n      _this57._rightYAxis = d3Axis.axisRight();\n      _this57._rightYAxisLabel = 0;\n      _this57._rightYAxisLabelPadding = DEFAULT_RIGHT_Y_AXIS_LABEL_PADDING;\n      _this57._rightY = undefined;\n      _this57._rightAxisGridLines = false;\n\n      _this57._mandatoryAttributes([]);\n\n      _this57.transitionDuration(500);\n\n      _this57.transitionDelay(0);\n\n      _this57.on('filtered.dcjs-composite-chart', function (chart) {\n        // Propagate the filters onto the children\n        // Notice that on children the call is .replaceFilter and not .filter\n        //   the reason is that _chart.filter() returns the entire current set of filters not just the last added one\n        for (var i = 0; i < _this57._children.length; ++i) {\n          _this57._children[i].replaceFilter(_this57.filter());\n        }\n      });\n\n      _this57.anchor(parent, chartGroup);\n\n      return _this57;\n    }\n\n    _createClass(CompositeChart, [{\n      key: \"_generateG\",\n      value: function _generateG() {\n        var g = _get(_getPrototypeOf(CompositeChart.prototype), \"_generateG\", this).call(this);\n\n        for (var i = 0; i < this._children.length; ++i) {\n          var child = this._children[i];\n\n          this._generateChildG(child, i);\n\n          if (!child.dimension()) {\n            child.dimension(this.dimension());\n          }\n\n          if (!child.group()) {\n            child.group(this.group());\n          }\n\n          child.chartGroup(this.chartGroup());\n          child.svg(this.svg());\n          child.xUnits(this.xUnits());\n          child.transitionDuration(this.transitionDuration(), this.transitionDelay());\n          child.parentBrushOn(this.brushOn());\n          child.brushOn(false);\n          child.renderTitle(this.renderTitle());\n          child.elasticX(this.elasticX());\n        }\n\n        return g;\n      }\n    }, {\n      key: \"rescale\",\n      value: function rescale() {\n        _get(_getPrototypeOf(CompositeChart.prototype), \"rescale\", this).call(this);\n\n        this._children.forEach(function (child) {\n          child.rescale();\n        });\n\n        return this;\n      }\n    }, {\n      key: \"resizing\",\n      value: function resizing(_resizing2) {\n        if (!arguments.length) {\n          return _get(_getPrototypeOf(CompositeChart.prototype), \"resizing\", this).call(this);\n        }\n\n        _get(_getPrototypeOf(CompositeChart.prototype), \"resizing\", this).call(this, _resizing2);\n\n        this._children.forEach(function (child) {\n          child.resizing(_resizing2);\n        });\n\n        return this;\n      }\n    }, {\n      key: \"_prepareYAxis\",\n      value: function _prepareYAxis() {\n        var left = this._leftYAxisChildren().length !== 0;\n        var right = this._rightYAxisChildren().length !== 0;\n\n        var ranges = this._calculateYAxisRanges(left, right);\n\n        if (left) {\n          this._prepareLeftYAxis(ranges);\n        }\n\n        if (right) {\n          this._prepareRightYAxis(ranges);\n        }\n\n        if (this._leftYAxisChildren().length > 0 && !this._rightAxisGridLines) {\n          this._renderHorizontalGridLinesForAxis(this.g(), this.y(), this.yAxis());\n        } else if (this._rightYAxisChildren().length > 0) {\n          this._renderHorizontalGridLinesForAxis(this.g(), this._rightY, this._rightYAxis);\n        }\n      }\n    }, {\n      key: \"renderYAxis\",\n      value: function renderYAxis() {\n        if (this._leftYAxisChildren().length !== 0) {\n          this.renderYAxisAt('y', this.yAxis(), this.margins().left);\n          this.renderYAxisLabel('y', this.yAxisLabel(), -90);\n        }\n\n        if (this._rightYAxisChildren().length !== 0) {\n          this.renderYAxisAt('yr', this.rightYAxis(), this.width() - this.margins().right);\n          this.renderYAxisLabel('yr', this.rightYAxisLabel(), 90, this.width() - this._rightYAxisLabelPadding);\n        }\n      }\n    }, {\n      key: \"_calculateYAxisRanges\",\n      value: function _calculateYAxisRanges(left, right) {\n        var lyAxisMin, lyAxisMax, ryAxisMin, ryAxisMax;\n        var ranges;\n\n        if (left) {\n          lyAxisMin = this._yAxisMin();\n          lyAxisMax = this._yAxisMax();\n        }\n\n        if (right) {\n          ryAxisMin = this._rightYAxisMin();\n          ryAxisMax = this._rightYAxisMax();\n        }\n\n        if (this.alignYAxes() && left && right) {\n          ranges = this._alignYAxisRanges(lyAxisMin, lyAxisMax, ryAxisMin, ryAxisMax);\n        }\n\n        return ranges || {\n          lyAxisMin: lyAxisMin,\n          lyAxisMax: lyAxisMax,\n          ryAxisMin: ryAxisMin,\n          ryAxisMax: ryAxisMax\n        };\n      }\n    }, {\n      key: \"_alignYAxisRanges\",\n      value: function _alignYAxisRanges(lyAxisMin, lyAxisMax, ryAxisMin, ryAxisMax) {\n        // since the two series will share a zero, each Y is just a multiple\n        // of the other. and the ratio should be the ratio of the ranges of the\n        // input data, so that they come out the same height. so we just min/max\n        // note: both ranges already include zero due to the stack mixin (#667)\n        // if #667 changes, we can reconsider whether we want data height or\n        // height from zero to be equal. and it will be possible for the axes\n        // to be aligned but not visible.\n        var extentRatio = (ryAxisMax - ryAxisMin) / (lyAxisMax - lyAxisMin);\n        return {\n          lyAxisMin: Math.min(lyAxisMin, ryAxisMin / extentRatio),\n          lyAxisMax: Math.max(lyAxisMax, ryAxisMax / extentRatio),\n          ryAxisMin: Math.min(ryAxisMin, lyAxisMin * extentRatio),\n          ryAxisMax: Math.max(ryAxisMax, lyAxisMax * extentRatio)\n        };\n      }\n    }, {\n      key: \"_prepareRightYAxis\",\n      value: function _prepareRightYAxis(ranges) {\n        var needDomain = this.rightY() === undefined || this.elasticY(),\n            needRange = needDomain || this.resizing();\n\n        if (this.rightY() === undefined) {\n          this.rightY(d3Scale.scaleLinear());\n        }\n\n        if (needDomain) {\n          this.rightY().domain([ranges.ryAxisMin, ranges.ryAxisMax]);\n        }\n\n        if (needRange) {\n          this.rightY().rangeRound([this.yAxisHeight(), 0]);\n        }\n\n        this.rightY().range([this.yAxisHeight(), 0]);\n        this.rightYAxis(this.rightYAxis().scale(this.rightY())); // In D3v4 create a RightAxis\n        // _chart.rightYAxis().orient('right');\n      }\n    }, {\n      key: \"_prepareLeftYAxis\",\n      value: function _prepareLeftYAxis(ranges) {\n        var needDomain = this.y() === undefined || this.elasticY(),\n            needRange = needDomain || this.resizing();\n\n        if (this.y() === undefined) {\n          this.y(d3Scale.scaleLinear());\n        }\n\n        if (needDomain) {\n          this.y().domain([ranges.lyAxisMin, ranges.lyAxisMax]);\n        }\n\n        if (needRange) {\n          this.y().rangeRound([this.yAxisHeight(), 0]);\n        }\n\n        this.y().range([this.yAxisHeight(), 0]);\n        this.yAxis(this.yAxis().scale(this.y())); // In D3v4 create a LeftAxis\n        // _chart.yAxis().orient('left');\n      }\n    }, {\n      key: \"_generateChildG\",\n      value: function _generateChildG(child, i) {\n        child._generateG(this.g());\n\n        child.g().attr('class', \"\".concat(SUB_CHART_CLASS, \" _\").concat(i));\n      }\n    }, {\n      key: \"plotData\",\n      value: function plotData() {\n        for (var i = 0; i < this._children.length; ++i) {\n          var child = this._children[i];\n\n          if (!child.g()) {\n            this._generateChildG(child, i);\n          }\n\n          if (this._shareColors) {\n            child.colors(this.colors());\n          }\n\n          child.x(this.x());\n          child.xAxis(this.xAxis());\n\n          if (child.useRightYAxis()) {\n            child.y(this.rightY());\n            child.yAxis(this.rightYAxis());\n          } else {\n            child.y(this.y());\n            child.yAxis(this.yAxis());\n          }\n\n          child.plotData();\n\n          child._activateRenderlets();\n        }\n      }\n      /**\n       * Get or set whether to draw gridlines from the right y axis.  Drawing from the left y axis is the\n       * default behavior. This option is only respected when subcharts with both left and right y-axes\n       * are present.\n       * @param {Boolean} [useRightAxisGridLines=false]\n       * @returns {Boolean|CompositeChart}\n       */\n\n    }, {\n      key: \"useRightAxisGridLines\",\n      value: function useRightAxisGridLines(_useRightAxisGridLines) {\n        if (!arguments) {\n          return this._rightAxisGridLines;\n        }\n\n        this._rightAxisGridLines = _useRightAxisGridLines;\n        return this;\n      }\n      /**\n       * Get or set chart-specific options for all child charts. This is equivalent to calling\n       * {@link BaseMixin#options .options} on each child chart.\n       * @param {Object} [childOptions]\n       * @returns {Object|CompositeChart}\n       */\n\n    }, {\n      key: \"childOptions\",\n      value: function childOptions(_childOptions) {\n        var _this58 = this;\n\n        if (!arguments.length) {\n          return this._childOptions;\n        }\n\n        this._childOptions = _childOptions;\n\n        this._children.forEach(function (child) {\n          child.options(_this58._childOptions);\n        });\n\n        return this;\n      }\n    }, {\n      key: \"fadeDeselectedArea\",\n      value: function fadeDeselectedArea(brushSelection) {\n        if (this.brushOn()) {\n          for (var i = 0; i < this._children.length; ++i) {\n            var child = this._children[i];\n            child.fadeDeselectedArea(brushSelection);\n          }\n        }\n      }\n      /**\n       * Set or get the right y axis label.\n       * @param {String} [rightYAxisLabel]\n       * @param {Number} [padding]\n       * @returns {String|CompositeChart}\n       */\n\n    }, {\n      key: \"rightYAxisLabel\",\n      value: function rightYAxisLabel(_rightYAxisLabel, padding) {\n        if (!arguments.length) {\n          return this._rightYAxisLabel;\n        }\n\n        this._rightYAxisLabel = _rightYAxisLabel;\n        this.margins().right -= this._rightYAxisLabelPadding;\n        this._rightYAxisLabelPadding = padding === undefined ? DEFAULT_RIGHT_Y_AXIS_LABEL_PADDING : padding;\n        this.margins().right += this._rightYAxisLabelPadding;\n        return this;\n      }\n      /**\n       * Combine the given charts into one single composite coordinate grid chart.\n       * @example\n       * moveChart.compose([\n       *     // when creating sub-chart you need to pass in the parent chart\n       *     new LineChart(moveChart)\n       *         .group(indexAvgByMonthGroup) // if group is missing then parent's group will be used\n       *         .valueAccessor(function (d){return d.value.avg;})\n       *         // most of the normal functions will continue to work in a composed chart\n       *         .renderArea(true)\n       *         .stack(monthlyMoveGroup, function (d){return d.value;})\n       *         .title(function (d){\n       *             var value = d.value.avg?d.value.avg:d.value;\n       *             if(isNaN(value)) value = 0;\n       *             return dateFormat(d.key) + '\\n' + numberFormat(value);\n       *         }),\n       *     new BarChart(moveChart)\n       *         .group(volumeByMonthGroup)\n       *         .centerBar(true)\n       * ]);\n       * @param {Array<Chart>} [subChartArray]\n       * @returns {CompositeChart}\n       */\n\n    }, {\n      key: \"compose\",\n      value: function compose(subChartArray) {\n        var _this59 = this;\n\n        this._children = subChartArray;\n\n        this._children.forEach(function (child) {\n          child.height(_this59.height());\n          child.width(_this59.width());\n          child.margins(_this59.margins());\n\n          if (_this59._shareTitle) {\n            child.title(_this59.title());\n          }\n\n          child.options(_this59._childOptions);\n        });\n\n        this.rescale();\n        return this;\n      }\n    }, {\n      key: \"_setChildrenProperty\",\n      value: function _setChildrenProperty(prop, value) {\n        this._children.forEach(function (child) {\n          child[prop](value);\n        });\n      } // properties passed through in compose()\n\n    }, {\n      key: \"height\",\n      value: function height(_height2) {\n        if (!arguments.length) {\n          return _get(_getPrototypeOf(CompositeChart.prototype), \"height\", this).call(this);\n        }\n\n        _get(_getPrototypeOf(CompositeChart.prototype), \"height\", this).call(this, _height2);\n\n        this._setChildrenProperty('height', _height2);\n\n        return this;\n      }\n    }, {\n      key: \"width\",\n      value: function width(_width2) {\n        if (!arguments.length) {\n          return _get(_getPrototypeOf(CompositeChart.prototype), \"width\", this).call(this);\n        }\n\n        _get(_getPrototypeOf(CompositeChart.prototype), \"width\", this).call(this, _width2);\n\n        this._setChildrenProperty('width', _width2);\n\n        return this;\n      }\n    }, {\n      key: \"margins\",\n      value: function margins(_margins2) {\n        if (!arguments.length) {\n          return _get(_getPrototypeOf(CompositeChart.prototype), \"margins\", this).call(this);\n        }\n\n        _get(_getPrototypeOf(CompositeChart.prototype), \"margins\", this).call(this, _margins2);\n\n        this._setChildrenProperty('margins', _margins2);\n\n        return this;\n      }\n      /**\n       * Returns the child charts which are composed into the composite chart.\n       * @returns {Array<BaseMixin>}\n       */\n\n    }, {\n      key: \"children\",\n      value: function children() {\n        return this._children;\n      }\n      /**\n       * Get or set color sharing for the chart. If set, the {@link ColorMixin#colors .colors()} value from this chart\n       * will be shared with composed children. Additionally if the child chart implements\n       * Stackable and has not set a custom .colorAccessor, then it will generate a color\n       * specific to its order in the composition.\n       * @param {Boolean} [shareColors=false]\n       * @returns {Boolean|CompositeChart}\n       */\n\n    }, {\n      key: \"shareColors\",\n      value: function shareColors(_shareColors) {\n        if (!arguments.length) {\n          return this._shareColors;\n        }\n\n        this._shareColors = _shareColors;\n        return this;\n      }\n      /**\n       * Get or set title sharing for the chart. If set, the {@link BaseMixin#title .title()} value from\n       * this chart will be shared with composed children.\n       *\n       * Note: currently you must call this before `compose` or the child will still get the parent's\n       * `title` function!\n       * @param {Boolean} [shareTitle=true]\n       * @returns {Boolean|CompositeChart}\n       */\n\n    }, {\n      key: \"shareTitle\",\n      value: function shareTitle(_shareTitle) {\n        if (!arguments.length) {\n          return this._shareTitle;\n        }\n\n        this._shareTitle = _shareTitle;\n        return this;\n      }\n      /**\n       * Get or set the y scale for the right axis. The right y scale is typically automatically\n       * generated by the chart implementation.\n       * @see {@link https://github.com/d3/d3-scale/blob/master/README.md d3.scale}\n       * @param {d3.scale} [yScale]\n       * @returns {d3.scale|CompositeChart}\n       */\n\n    }, {\n      key: \"rightY\",\n      value: function rightY(yScale) {\n        if (!arguments.length) {\n          return this._rightY;\n        }\n\n        this._rightY = yScale;\n        this.rescale();\n        return this;\n      }\n      /**\n       * Get or set alignment between left and right y axes. A line connecting '0' on both y axis\n       * will be parallel to x axis. This only has effect when {@link CoordinateGridMixin#elasticY elasticY} is true.\n       * @param {Boolean} [alignYAxes=false]\n       * @returns {Chart}\n       */\n\n    }, {\n      key: \"alignYAxes\",\n      value: function alignYAxes(_alignYAxes) {\n        if (!arguments.length) {\n          return this._alignYAxes;\n        }\n\n        this._alignYAxes = _alignYAxes;\n        this.rescale();\n        return this;\n      }\n    }, {\n      key: \"_leftYAxisChildren\",\n      value: function _leftYAxisChildren() {\n        return this._children.filter(function (child) {\n          return !child.useRightYAxis();\n        });\n      }\n    }, {\n      key: \"_rightYAxisChildren\",\n      value: function _rightYAxisChildren() {\n        return this._children.filter(function (child) {\n          return child.useRightYAxis();\n        });\n      }\n    }, {\n      key: \"_getYAxisMin\",\n      value: function _getYAxisMin(charts) {\n        return charts.map(function (c) {\n          return c.yAxisMin();\n        });\n      }\n    }, {\n      key: \"_yAxisMin\",\n      value: function _yAxisMin() {\n        return d3Array.min(this._getYAxisMin(this._leftYAxisChildren()));\n      }\n    }, {\n      key: \"_rightYAxisMin\",\n      value: function _rightYAxisMin() {\n        return d3Array.min(this._getYAxisMin(this._rightYAxisChildren()));\n      }\n    }, {\n      key: \"_getYAxisMax\",\n      value: function _getYAxisMax(charts) {\n        return charts.map(function (c) {\n          return c.yAxisMax();\n        });\n      }\n    }, {\n      key: \"_yAxisMax\",\n      value: function _yAxisMax() {\n        return utils.add(d3Array.max(this._getYAxisMax(this._leftYAxisChildren())), this.yAxisPadding());\n      }\n    }, {\n      key: \"_rightYAxisMax\",\n      value: function _rightYAxisMax() {\n        return utils.add(d3Array.max(this._getYAxisMax(this._rightYAxisChildren())), this.yAxisPadding());\n      }\n    }, {\n      key: \"_getAllXAxisMinFromChildCharts\",\n      value: function _getAllXAxisMinFromChildCharts() {\n        return this._children.map(function (c) {\n          return c.xAxisMin();\n        });\n      }\n    }, {\n      key: \"xAxisMin\",\n      value: function xAxisMin() {\n        return utils.subtract(d3Array.min(this._getAllXAxisMinFromChildCharts()), this.xAxisPadding(), this.xAxisPaddingUnit());\n      }\n    }, {\n      key: \"_getAllXAxisMaxFromChildCharts\",\n      value: function _getAllXAxisMaxFromChildCharts() {\n        return this._children.map(function (c) {\n          return c.xAxisMax();\n        });\n      }\n    }, {\n      key: \"xAxisMax\",\n      value: function xAxisMax() {\n        return utils.add(d3Array.max(this._getAllXAxisMaxFromChildCharts()), this.xAxisPadding(), this.xAxisPaddingUnit());\n      }\n    }, {\n      key: \"legendables\",\n      value: function legendables() {\n        var _this60 = this;\n\n        return this._children.reduce(function (items, child) {\n          if (_this60._shareColors) {\n            child.colors(_this60.colors());\n          }\n\n          items.push.apply(items, child.legendables());\n          return items;\n        }, []);\n      }\n    }, {\n      key: \"legendHighlight\",\n      value: function legendHighlight(d) {\n        for (var j = 0; j < this._children.length; ++j) {\n          var child = this._children[j];\n          child.legendHighlight(d);\n        }\n      }\n    }, {\n      key: \"legendReset\",\n      value: function legendReset(d) {\n        for (var j = 0; j < this._children.length; ++j) {\n          var child = this._children[j];\n          child.legendReset(d);\n        }\n      }\n    }, {\n      key: \"legendToggle\",\n      value: function legendToggle() {\n        console.log('composite should not be getting legendToggle itself');\n      }\n      /**\n       * Set or get the right y axis used by the composite chart. This function is most useful when y\n       * axis customization is required. The y axis in dc.js is an instance of a\n       * [d3.axisRight](https://github.com/d3/d3-axis/blob/master/README.md#axisRight) therefore it supports any valid\n       * d3 axis manipulation.\n       *\n       * **Caution**: The right y axis is usually generated internally by dc; resetting it may cause\n       * unexpected results.  Note also that when used as a getter, this function is not chainable: it\n       * returns the axis, not the chart,\n       * {@link https://github.com/dc-js/dc.js/wiki/FAQ#why-does-everything-break-after-a-call-to-xaxis-or-yaxis\n       * so attempting to call chart functions after calling `.yAxis()` will fail}.\n       * @see {@link https://github.com/d3/d3-axis/blob/master/README.md#axisRight}\n       * @example\n       * // customize y axis tick format\n       * chart.rightYAxis().tickFormat(function (v) {return v + '%';});\n       * // customize y axis tick values\n       * chart.rightYAxis().tickValues([0, 100, 200, 300]);\n       * @param {d3.axisRight} [rightYAxis]\n       * @returns {d3.axisRight|CompositeChart}\n       */\n\n    }, {\n      key: \"rightYAxis\",\n      value: function rightYAxis(_rightYAxis) {\n        if (!arguments.length) {\n          return this._rightYAxis;\n        }\n\n        this._rightYAxis = _rightYAxis;\n        return this;\n      }\n    }, {\n      key: \"yAxisMin\",\n      value: function yAxisMin() {\n        throw new Error('Not supported for this chart type');\n      }\n    }, {\n      key: \"yAxisMax\",\n      value: function yAxisMax() {\n        throw new Error('Not supported for this chart type');\n      }\n    }]);\n\n    return CompositeChart;\n  }(CoordinateGridMixin);\n\n  var compositeChart = function compositeChart(parent, chartGroup) {\n    return new CompositeChart(parent, chartGroup);\n  };\n  /**\n   * The data count widget is a simple widget designed to display the number of records selected by the\n   * current filters out of the total number of records in the data set. Once created the data count widget\n   * will automatically update the text content of child elements with the following classes:\n   *\n   * * `.total-count` - total number of records\n   * * `.filter-count` - number of records matched by the current filters\n   *\n   * Note: this widget works best for the specific case of showing the number of records out of a\n   * total. If you want a more general-purpose numeric display, please use the\n   * {@link NumberDisplay} widget instead.\n   *\n   * Examples:\n   * - {@link http://dc-js.github.com/dc.js/ Nasdaq 100 Index}\n   * @mixes BaseMixin\n   */\n\n\n  var DataCount = /*#__PURE__*/function (_BaseMixin3) {\n    _inherits(DataCount, _BaseMixin3);\n\n    var _super15 = _createSuper(DataCount);\n\n    /**\n     * Create a Data Count widget.\n     * @example\n     * var ndx = crossfilter(data);\n     * var all = ndx.groupAll();\n     *\n     * new DataCount('.dc-data-count')\n     *     .crossfilter(ndx)\n     *     .groupAll(all);\n     * @param {String|node|d3.selection} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector} specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function DataCount(parent, chartGroup) {\n      var _this61;\n\n      _classCallCheck(this, DataCount);\n\n      _this61 = _super15.call(this);\n      _this61._formatNumber = d3Format.format(',d');\n      _this61._crossfilter = null;\n      _this61._groupAll = null;\n      _this61._html = {\n        some: '',\n        all: ''\n      };\n\n      _this61._mandatoryAttributes(['crossfilter', 'groupAll']);\n\n      _this61.anchor(parent, chartGroup);\n\n      return _this61;\n    }\n    /**\n     * Gets or sets an optional object specifying HTML templates to use depending how many items are\n     * selected. The text `%total-count` will replaced with the total number of records, and the text\n     * `%filter-count` will be replaced with the number of selected records.\n     * - all: HTML template to use if all items are selected\n     * - some: HTML template to use if not all items are selected\n     * @example\n     * counter.html({\n     *      some: '%filter-count out of %total-count records selected',\n     *      all: 'All records selected. Click on charts to apply filters'\n     * })\n     * @param {{some:String, all: String}} [options]\n     * @returns {{some:String, all: String}|DataCount}\n     */\n\n\n    _createClass(DataCount, [{\n      key: \"html\",\n      value: function html(options) {\n        if (!arguments.length) {\n          return this._html;\n        }\n\n        if (options.all) {\n          this._html.all = options.all;\n        }\n\n        if (options.some) {\n          this._html.some = options.some;\n        }\n\n        return this;\n      }\n      /**\n       * Gets or sets an optional function to format the filter count and total count.\n       * @see {@link https://github.com/d3/d3-format/blob/master/README.md#format d3.format}\n       * @example\n       * counter.formatNumber(d3.format('.2g'))\n       * @param {Function} [formatter=d3.format('.2g')]\n       * @returns {Function|DataCount}\n       */\n\n    }, {\n      key: \"formatNumber\",\n      value: function formatNumber(formatter) {\n        if (!arguments.length) {\n          return this._formatNumber;\n        }\n\n        this._formatNumber = formatter;\n        return this;\n      }\n    }, {\n      key: \"_doRender\",\n      value: function _doRender() {\n        var tot = this.crossfilter().size(),\n            val = this.groupAll().value();\n\n        var all = this._formatNumber(tot);\n\n        var selected = this._formatNumber(val);\n\n        if (tot === val && this._html.all !== '') {\n          this.root().html(this._html.all.replace('%total-count', all).replace('%filter-count', selected));\n        } else if (this._html.some !== '') {\n          this.root().html(this._html.some.replace('%total-count', all).replace('%filter-count', selected));\n        } else {\n          this.selectAll('.total-count').text(all);\n          this.selectAll('.filter-count').text(selected);\n        }\n\n        return this;\n      }\n    }, {\n      key: \"_doRedraw\",\n      value: function _doRedraw() {\n        return this._doRender();\n      }\n    }, {\n      key: \"crossfilter\",\n      value: function crossfilter(cf) {\n        if (!arguments.length) {\n          return this._crossfilter;\n        }\n\n        this._crossfilter = cf;\n        return this;\n      }\n    }, {\n      key: \"dimension\",\n      value: function dimension(cf) {\n        logger.warnOnce('consider using dataCount.crossfilter instead of dataCount.dimension for clarity');\n\n        if (!arguments.length) {\n          return this.crossfilter();\n        }\n\n        return this.crossfilter(cf);\n      }\n    }, {\n      key: \"groupAll\",\n      value: function groupAll(_groupAll) {\n        if (!arguments.length) {\n          return this._groupAll;\n        }\n\n        this._groupAll = _groupAll;\n        return this;\n      }\n    }, {\n      key: \"group\",\n      value: function group(groupAll) {\n        logger.warnOnce('consider using dataCount.groupAll instead of dataCount.group for clarity');\n\n        if (!arguments.length) {\n          return this.groupAll();\n        }\n\n        return this.groupAll(groupAll);\n      }\n    }]);\n\n    return DataCount;\n  }(BaseMixin);\n\n  var dataCount = function dataCount(parent, chartGroup) {\n    return new DataCount(parent, chartGroup);\n  };\n\n  var LABEL_CSS_CLASS = 'dc-grid-label';\n  var ITEM_CSS_CLASS$1 = 'dc-grid-item';\n  var SECTION_CSS_CLASS = 'dc-grid-section dc-grid-group';\n  var GRID_CSS_CLASS = 'dc-grid-top';\n  /**\n   * Data grid is a simple widget designed to list the filtered records, providing\n   * a simple way to define how the items are displayed.\n   *\n   * Note: Formerly the data grid chart (and data table) used the {@link DataGrid#group group} attribute as a\n   * keying function for {@link https://github.com/d3/d3-collection/blob/master/README.md#nest nesting} the data\n   * together in sections.  This was confusing so it has been renamed to `section`, although `group` still works.\n   *\n   * Examples:\n   * - {@link https://dc-js.github.io/dc.js/ep/ List of members of the european parliament}\n   * @mixes BaseMixin\n   */\n\n  var DataGrid = /*#__PURE__*/function (_BaseMixin4) {\n    _inherits(DataGrid, _BaseMixin4);\n\n    var _super16 = _createSuper(DataGrid);\n\n    /**\n     * Create a Data Grid.\n     * @param {String|node|d3.selection} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector} specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function DataGrid(parent, chartGroup) {\n      var _this62;\n\n      _classCallCheck(this, DataGrid);\n\n      _this62 = _super16.call(this);\n      _this62._section = null;\n      _this62._size = 999; // shouldn't be needed, but you might\n\n      _this62._html = function (d) {\n        return \"you need to provide an html() handling param:  \".concat(JSON.stringify(d));\n      };\n\n      _this62._sortBy = function (d) {\n        return d;\n      };\n\n      _this62._order = d3Array.ascending;\n      _this62._beginSlice = 0;\n      _this62._endSlice = undefined;\n\n      _this62._htmlSection = function (d) {\n        return \"<div class='\".concat(SECTION_CSS_CLASS, \"'><h1 class='\").concat(LABEL_CSS_CLASS, \"'>\").concat(_this62.keyAccessor()(d), \"</h1></div>\");\n      };\n\n      _this62._mandatoryAttributes(['dimension', 'section']);\n\n      _this62.anchor(parent, chartGroup);\n\n      return _this62;\n    }\n\n    _createClass(DataGrid, [{\n      key: \"_doRender\",\n      value: function _doRender() {\n        this.selectAll(\"div.\".concat(GRID_CSS_CLASS)).remove();\n\n        this._renderItems(this._renderSections());\n\n        return this;\n      }\n    }, {\n      key: \"_renderSections\",\n      value: function _renderSections() {\n        var _this63 = this;\n\n        var sections = this.root().selectAll(\"div.\".concat(GRID_CSS_CLASS)).data(this._nestEntries(), function (d) {\n          return _this63.keyAccessor()(d);\n        });\n        var itemSection = sections.enter().append('div').attr('class', GRID_CSS_CLASS);\n\n        if (this._htmlSection) {\n          itemSection.html(function (d) {\n            return _this63._htmlSection(d);\n          });\n        }\n\n        sections.exit().remove();\n        return itemSection;\n      }\n    }, {\n      key: \"_nestEntries\",\n      value: function _nestEntries() {\n        var _this64 = this;\n\n        var entries = this.dimension().top(this._size);\n        entries = entries.sort(function (a, b) {\n          return _this64._order(_this64._sortBy(a), _this64._sortBy(b));\n        }).slice(this._beginSlice, this._endSlice);\n        return d3compat.nester({\n          key: this.section(),\n          sortKeys: this._order,\n          entries: entries\n        });\n      }\n    }, {\n      key: \"_renderItems\",\n      value: function _renderItems(sections) {\n        var _this65 = this;\n\n        var items = sections.order().selectAll(\"div.\".concat(ITEM_CSS_CLASS$1)).data(function (d) {\n          return d.values;\n        });\n        items.exit().remove();\n        items = items.enter().append('div').attr('class', ITEM_CSS_CLASS$1).html(function (d) {\n          return _this65._html(d);\n        }).merge(items);\n        return items;\n      }\n    }, {\n      key: \"_doRedraw\",\n      value: function _doRedraw() {\n        return this._doRender();\n      }\n      /**\n       * Get or set the section function for the data grid. The section function takes a data row and\n       * returns the key to specify to {@link https://github.com/d3/d3-collection/blob/master/README.md#nest d3.nest}\n       * to split rows into sections.\n       *\n       * Do not pass in a crossfilter section as this will not work.\n       * @example\n       * // section rows by the value of their field\n       * chart\n       *     .section(function(d) { return d.field; })\n       * @param {Function} section Function taking a row of data and returning the nest key.\n       * @returns {Function|DataGrid}\n       */\n\n    }, {\n      key: \"section\",\n      value: function section(_section) {\n        if (!arguments.length) {\n          return this._section;\n        }\n\n        this._section = _section;\n        return this;\n      }\n      /**\n       * Backward-compatible synonym for {@link DataGrid#section section}.\n       *\n       * @param {Function} section Function taking a row of data and returning the nest key.\n       * @returns {Function|DataGrid}\n       */\n\n    }, {\n      key: \"group\",\n      value: function group(section) {\n        logger.warnOnce('consider using dataGrid.section instead of dataGrid.group for clarity');\n\n        if (!arguments.length) {\n          return this.section();\n        }\n\n        return this.section(section);\n      }\n      /**\n       * Get or set the index of the beginning slice which determines which entries get displayed by the widget.\n       * Useful when implementing pagination.\n       * @param {Number} [beginSlice=0]\n       * @returns {Number|DataGrid}\n       */\n\n    }, {\n      key: \"beginSlice\",\n      value: function beginSlice(_beginSlice) {\n        if (!arguments.length) {\n          return this._beginSlice;\n        }\n\n        this._beginSlice = _beginSlice;\n        return this;\n      }\n      /**\n       * Get or set the index of the end slice which determines which entries get displayed by the widget.\n       * Useful when implementing pagination.\n       * @param {Number} [endSlice]\n       * @returns {Number|DataGrid}\n       */\n\n    }, {\n      key: \"endSlice\",\n      value: function endSlice(_endSlice) {\n        if (!arguments.length) {\n          return this._endSlice;\n        }\n\n        this._endSlice = _endSlice;\n        return this;\n      }\n      /**\n       * Get or set the grid size which determines the number of items displayed by the widget.\n       * @param {Number} [size=999]\n       * @returns {Number|DataGrid}\n       */\n\n    }, {\n      key: \"size\",\n      value: function size(_size) {\n        if (!arguments.length) {\n          return this._size;\n        }\n\n        this._size = _size;\n        return this;\n      }\n      /**\n       * Get or set the function that formats an item. The data grid widget uses a\n       * function to generate dynamic html. Use your favourite templating engine or\n       * generate the string directly.\n       * @example\n       * chart.html(function (d) { return '<div class='item '+data.exampleCategory+''>'+data.exampleString+'</div>';});\n       * @param {Function} [html]\n       * @returns {Function|DataGrid}\n       */\n\n    }, {\n      key: \"html\",\n      value: function html(_html) {\n        if (!arguments.length) {\n          return this._html;\n        }\n\n        this._html = _html;\n        return this;\n      }\n      /**\n       * Get or set the function that formats a section label.\n       * @example\n       * chart.htmlSection (function (d) { return '<h2>'.d.key . 'with ' . d.values.length .' items</h2>'});\n       * @param {Function} [htmlSection]\n       * @returns {Function|DataGrid}\n       */\n\n    }, {\n      key: \"htmlSection\",\n      value: function htmlSection(_htmlSection) {\n        if (!arguments.length) {\n          return this._htmlSection;\n        }\n\n        this._htmlSection = _htmlSection;\n        return this;\n      }\n      /**\n       * Backward-compatible synonym for {@link DataGrid#htmlSection htmlSection}.\n       * @param {Function} [htmlSection]\n       * @returns {Function|DataGrid}\n       */\n\n    }, {\n      key: \"htmlGroup\",\n      value: function htmlGroup(htmlSection) {\n        logger.warnOnce('consider using dataGrid.htmlSection instead of dataGrid.htmlGroup for clarity');\n\n        if (!arguments.length) {\n          return this.htmlSection();\n        }\n\n        return this.htmlSection(htmlSection);\n      }\n      /**\n       * Get or set sort-by function. This function works as a value accessor at the item\n       * level and returns a particular field to be sorted.\n       * @example\n       * chart.sortBy(function(d) {\n       *     return d.date;\n       * });\n       * @param {Function} [sortByFunction]\n       * @returns {Function|DataGrid}\n       */\n\n    }, {\n      key: \"sortBy\",\n      value: function sortBy(sortByFunction) {\n        if (!arguments.length) {\n          return this._sortBy;\n        }\n\n        this._sortBy = sortByFunction;\n        return this;\n      }\n      /**\n       * Get or set sort the order function.\n       * @see {@link https://github.com/d3/d3-array/blob/master/README.md#ascending d3.ascending}\n       * @see {@link https://github.com/d3/d3-array/blob/master/README.md#descending d3.descending}\n       * @example\n       * chart.order(d3.descending);\n       * @param {Function} [order=d3.ascending]\n       * @returns {Function|DataGrid}\n       */\n\n    }, {\n      key: \"order\",\n      value: function order(_order2) {\n        if (!arguments.length) {\n          return this._order;\n        }\n\n        this._order = _order2;\n        return this;\n      }\n    }]);\n\n    return DataGrid;\n  }(BaseMixin);\n\n  var dataGrid = function dataGrid(parent, chartGroup) {\n    return new DataGrid(parent, chartGroup);\n  };\n\n  var LABEL_CSS_CLASS$1 = 'dc-table-label';\n  var ROW_CSS_CLASS = 'dc-table-row';\n  var COLUMN_CSS_CLASS = 'dc-table-column';\n  var SECTION_CSS_CLASS$1 = 'dc-table-section dc-table-group';\n  var HEAD_CSS_CLASS = 'dc-table-head';\n  /**\n   * The data table is a simple widget designed to list crossfilter focused data set (rows being\n   * filtered) in a good old tabular fashion.\n   *\n   * An interesting feature of the data table is that you can pass a crossfilter group to the\n   * `dimension`, if you want to show aggregated data instead of raw data rows. This requires no\n   * special code as long as you specify the {@link DataTable#order order} as `d3.descending`,\n   * since the data table will use `dimension.top()` to fetch the data in that case, and the method is\n   * equally supported on the crossfilter group as the crossfilter dimension.\n   *\n   * If you want to display aggregated data in ascending order, you will need to wrap the group\n   * in a [fake dimension](https://github.com/dc-js/dc.js/wiki/FAQ#fake-dimensions) to support the\n   * `.bottom()` method. See the example linked below for more details.\n   *\n   * Note: Formerly the data table (and data grid chart) used the {@link DataTable#group group} attribute as a\n   * keying function for {@link https://github.com/d3/d3-collection/blob/master/README.md#nest nesting} the data\n   * together in sections.  This was confusing so it has been renamed to `section`, although `group` still works.\n   * Examples:\n   * - {@link http://dc-js.github.com/dc.js/ Nasdaq 100 Index}\n   * - {@link http://dc-js.github.io/dc.js/examples/table-on-aggregated-data.html dataTable on a crossfilter group}\n   * ({@link https://github.com/dc-js/dc.js/blob/master/web-src/examples/table-on-aggregated-data.html source})\n   *\n   * @mixes BaseMixin\n   */\n\n  var DataTable = /*#__PURE__*/function (_BaseMixin5) {\n    _inherits(DataTable, _BaseMixin5);\n\n    var _super17 = _createSuper(DataTable);\n\n    /**\n     * Create a Data Table.\n     *\n     * @param {String|node|d3.selection} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector} specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function DataTable(parent, chartGroup) {\n      var _this66;\n\n      _classCallCheck(this, DataTable);\n\n      _this66 = _super17.call(this);\n      _this66._size = 25;\n      _this66._columns = [];\n\n      _this66._sortBy = function (d) {\n        return d;\n      };\n\n      _this66._order = d3Array.ascending;\n      _this66._beginSlice = 0;\n      _this66._endSlice = undefined;\n      _this66._showSections = true;\n\n      _this66._section = function () {\n        return '';\n      }; // all in one section\n\n\n      _this66._mandatoryAttributes(['dimension']);\n\n      _this66.anchor(parent, chartGroup);\n\n      return _this66;\n    }\n\n    _createClass(DataTable, [{\n      key: \"_doRender\",\n      value: function _doRender() {\n        this.selectAll('tbody').remove();\n\n        this._renderRows(this._renderSections());\n\n        return this;\n      }\n    }, {\n      key: \"_doColumnValueFormat\",\n      value: function _doColumnValueFormat(v, d) {\n        return typeof v === 'function' ? v(d) : // v as function\n        typeof v === 'string' ? d[v] : // v is field name string\n        v.format(d); // v is Object, use fn (element 2)\n      }\n    }, {\n      key: \"_doColumnHeaderFormat\",\n      value: function _doColumnHeaderFormat(d) {\n        // if 'function', convert to string representation\n        // show a string capitalized\n        // if an object then display its label string as-is.\n        return typeof d === 'function' ? this._doColumnHeaderFnToString(d) : typeof d === 'string' ? this._doColumnHeaderCapitalize(d) : String(d.label);\n      }\n    }, {\n      key: \"_doColumnHeaderCapitalize\",\n      value: function _doColumnHeaderCapitalize(s) {\n        // capitalize\n        return s.charAt(0).toUpperCase() + s.slice(1);\n      }\n    }, {\n      key: \"_doColumnHeaderFnToString\",\n      value: function _doColumnHeaderFnToString(f) {\n        // columnString(f) {\n        var s = String(f);\n        var i1 = s.indexOf('return ');\n\n        if (i1 >= 0) {\n          var i2 = s.lastIndexOf(';');\n\n          if (i2 >= 0) {\n            s = s.substring(i1 + 7, i2);\n            var i3 = s.indexOf('numberFormat');\n\n            if (i3 >= 0) {\n              s = s.replace('numberFormat', '');\n            }\n          }\n        }\n\n        return s;\n      }\n    }, {\n      key: \"_renderSections\",\n      value: function _renderSections() {\n        var _this67 = this;\n\n        // The 'original' example uses all 'functions'.\n        // If all 'functions' are used, then don't remove/add a header, and leave\n        // the html alone. This preserves the functionality of earlier releases.\n        // A 2nd option is a string representing a field in the data.\n        // A third option is to supply an Object such as an array of 'information', and\n        // supply your own _doColumnHeaderFormat and _doColumnValueFormat functions to\n        // create what you need.\n        var bAllFunctions = true;\n\n        this._columns.forEach(function (f) {\n          bAllFunctions = bAllFunctions & typeof f === 'function';\n        });\n\n        if (!bAllFunctions) {\n          // ensure one thead\n          var thead = this.selectAll('thead').data([0]);\n          thead.exit().remove();\n          thead = thead.enter().append('thead').merge(thead); // with one tr\n\n          var headrow = thead.selectAll('tr').data([0]);\n          headrow.exit().remove();\n          headrow = headrow.enter().append('tr').merge(headrow); // with a th for each column\n\n          var headcols = headrow.selectAll('th').data(this._columns);\n          headcols.exit().remove();\n          headcols.enter().append('th').merge(headcols).attr('class', HEAD_CSS_CLASS).html(function (d) {\n            return _this67._doColumnHeaderFormat(d);\n          });\n        }\n\n        var sections = this.root().selectAll('tbody').data(this._nestEntries(), function (d) {\n          return _this67.keyAccessor()(d);\n        });\n        var rowSection = sections.enter().append('tbody');\n\n        if (this._showSections === true) {\n          rowSection.append('tr').attr('class', SECTION_CSS_CLASS$1).append('td').attr('class', LABEL_CSS_CLASS$1).attr('colspan', this._columns.length).html(function (d) {\n            return _this67.keyAccessor()(d);\n          });\n        }\n\n        sections.exit().remove();\n        return rowSection;\n      }\n    }, {\n      key: \"_nestEntries\",\n      value: function _nestEntries() {\n        var _this68 = this;\n\n        var entries;\n\n        if (this._order === d3Array.ascending) {\n          entries = this.dimension().bottom(this._size);\n        } else {\n          entries = this.dimension().top(this._size);\n        }\n\n        entries = entries.sort(function (a, b) {\n          return _this68._order(_this68._sortBy(a), _this68._sortBy(b));\n        }).slice(this._beginSlice, this._endSlice);\n        return d3compat.nester({\n          key: this.section(),\n          sortKeys: this._order,\n          entries: entries\n        });\n      }\n    }, {\n      key: \"_renderRows\",\n      value: function _renderRows(sections) {\n        var _this69 = this;\n\n        var rows = sections.order().selectAll(\"tr.\".concat(ROW_CSS_CLASS)).data(function (d) {\n          return d.values;\n        });\n        var rowEnter = rows.enter().append('tr').attr('class', ROW_CSS_CLASS);\n\n        this._columns.forEach(function (v, i) {\n          rowEnter.append('td').attr('class', \"\".concat(COLUMN_CSS_CLASS, \" _\").concat(i)).html(function (d) {\n            return _this69._doColumnValueFormat(v, d);\n          });\n        });\n\n        rows.exit().remove();\n        return rows;\n      }\n    }, {\n      key: \"_doRedraw\",\n      value: function _doRedraw() {\n        return this._doRender();\n      }\n      /**\n       * Get or set the section function for the data table. The section function takes a data row and\n       * returns the key to specify to {@link https://github.com/d3/d3-collection/blob/master/README.md#nest d3.nest}\n       * to split rows into sections. By default there will be only one section with no name.\n       *\n       * Set {@link DataTable#showSections showSections} to false to hide the section headers\n       *\n       * @example\n       * // section rows by the value of their field\n       * chart\n       *     .section(function(d) { return d.field; })\n       * @param {Function} section Function taking a row of data and returning the nest key.\n       * @returns {Function|DataTable}\n       */\n\n    }, {\n      key: \"section\",\n      value: function section(_section2) {\n        if (!arguments.length) {\n          return this._section;\n        }\n\n        this._section = _section2;\n        return this;\n      }\n      /**\n       * Backward-compatible synonym for {@link DataTable#section section}.\n       *\n       * @param {Function} section Function taking a row of data and returning the nest key.\n       * @returns {Function|DataTable}\n       */\n\n    }, {\n      key: \"group\",\n      value: function group(section) {\n        logger.warnOnce('consider using dataTable.section instead of dataTable.group for clarity');\n\n        if (!arguments.length) {\n          return this.section();\n        }\n\n        return this.section(section);\n      }\n      /**\n       * Get or set the table size which determines the number of rows displayed by the widget.\n       * @param {Number} [size=25]\n       * @returns {Number|DataTable}\n       */\n\n    }, {\n      key: \"size\",\n      value: function size(_size2) {\n        if (!arguments.length) {\n          return this._size;\n        }\n\n        this._size = _size2;\n        return this;\n      }\n      /**\n       * Get or set the index of the beginning slice which determines which entries get displayed\n       * by the widget. Useful when implementing pagination.\n       *\n       * Note: the sortBy function will determine how the rows are ordered for pagination purposes.\n        * See the {@link http://dc-js.github.io/dc.js/examples/table-pagination.html table pagination example}\n       * to see how to implement the pagination user interface using `beginSlice` and `endSlice`.\n       * @param {Number} [beginSlice=0]\n       * @returns {Number|DataTable}\n       */\n\n    }, {\n      key: \"beginSlice\",\n      value: function beginSlice(_beginSlice2) {\n        if (!arguments.length) {\n          return this._beginSlice;\n        }\n\n        this._beginSlice = _beginSlice2;\n        return this;\n      }\n      /**\n       * Get or set the index of the end slice which determines which entries get displayed by the\n       * widget. Useful when implementing pagination. See {@link DataTable#beginSlice `beginSlice`} for more information.\n       * @param {Number|undefined} [endSlice=undefined]\n       * @returns {Number|DataTable}\n       */\n\n    }, {\n      key: \"endSlice\",\n      value: function endSlice(_endSlice2) {\n        if (!arguments.length) {\n          return this._endSlice;\n        }\n\n        this._endSlice = _endSlice2;\n        return this;\n      }\n      /**\n       * Get or set column functions. The data table widget supports several methods of specifying the\n       * columns to display.\n       *\n       * The original method uses an array of functions to generate dynamic columns. Column functions\n       * are simple javascript functions with only one input argument `d` which represents a row in\n       * the data set. The return value of these functions will be used to generate the content for\n       * each cell. However, this method requires the HTML for the table to have a fixed set of column\n       * headers.\n       *\n       * <pre><code>chart.columns([\n       *     function(d) { return d.date; },\n       *     function(d) { return d.open; },\n       *     function(d) { return d.close; },\n       *     function(d) { return numberFormat(d.close - d.open); },\n       *     function(d) { return d.volume; }\n       * ]);\n       * </code></pre>\n       *\n       * In the second method, you can list the columns to read from the data without specifying it as\n       * a function, except where necessary (ie, computed columns).  Note the data element name is\n       * capitalized when displayed in the table header. You can also mix in functions as necessary,\n       * using the third `{label, format}` form, as shown below.\n       *\n       * <pre><code>chart.columns([\n       *     \"date\",    // d[\"date\"], ie, a field accessor; capitalized automatically\n       *     \"open\",    // ...\n       *     \"close\",   // ...\n       *     {\n       *         label: \"Change\",\n       *         format: function (d) {\n       *             return numberFormat(d.close - d.open);\n       *         }\n       *     },\n       *     \"volume\"   // d[\"volume\"], ie, a field accessor; capitalized automatically\n       * ]);\n       * </code></pre>\n       *\n       * In the third example, we specify all fields using the `{label, format}` method:\n       * <pre><code>chart.columns([\n       *     {\n       *         label: \"Date\",\n       *         format: function (d) { return d.date; }\n       *     },\n       *     {\n       *         label: \"Open\",\n       *         format: function (d) { return numberFormat(d.open); }\n       *     },\n       *     {\n       *         label: \"Close\",\n       *         format: function (d) { return numberFormat(d.close); }\n       *     },\n       *     {\n       *         label: \"Change\",\n       *         format: function (d) { return numberFormat(d.close - d.open); }\n       *     },\n       *     {\n       *         label: \"Volume\",\n       *         format: function (d) { return d.volume; }\n       *     }\n       * ]);\n       * </code></pre>\n       *\n       * You may wish to override the dataTable functions `_doColumnHeaderCapitalize` and\n       * `_doColumnHeaderFnToString`, which are used internally to translate the column information or\n       * function into a displayed header. The first one is used on the \"string\" column specifier; the\n       * second is used to transform a stringified function into something displayable. For the Stock\n       * example, the function for Change becomes the table header **d.close - d.open**.\n       *\n       * Finally, you can even specify a completely different form of column definition. To do this,\n       * override `_chart._doColumnHeaderFormat` and `_chart._doColumnValueFormat` Be aware that\n       * fields without numberFormat specification will be displayed just as they are stored in the\n       * data, unformatted.\n       * @param {Array<Function>} [columns=[]]\n       * @returns {Array<Function>}|DataTable}\n       */\n\n    }, {\n      key: \"columns\",\n      value: function columns(_columns) {\n        if (!arguments.length) {\n          return this._columns;\n        }\n\n        this._columns = _columns;\n        return this;\n      }\n      /**\n       * Get or set sort-by function. This function works as a value accessor at row level and returns a\n       * particular field to be sorted by.\n       * @example\n       * chart.sortBy(function(d) {\n       *     return d.date;\n       * });\n       * @param {Function} [sortBy=identity function]\n       * @returns {Function|DataTable}\n       */\n\n    }, {\n      key: \"sortBy\",\n      value: function sortBy(_sortBy) {\n        if (!arguments.length) {\n          return this._sortBy;\n        }\n\n        this._sortBy = _sortBy;\n        return this;\n      }\n      /**\n       * Get or set sort order. If the order is `d3.ascending`, the data table will use\n       * `dimension().bottom()` to fetch the data; otherwise it will use `dimension().top()`\n       * @see {@link https://github.com/d3/d3-array/blob/master/README.md#ascending d3.ascending}\n       * @see {@link https://github.com/d3/d3-array/blob/master/README.md#descending d3.descending}\n       * @example\n       * chart.order(d3.descending);\n       * @param {Function} [order=d3.ascending]\n       * @returns {Function|DataTable}\n       */\n\n    }, {\n      key: \"order\",\n      value: function order(_order3) {\n        if (!arguments.length) {\n          return this._order;\n        }\n\n        this._order = _order3;\n        return this;\n      }\n      /**\n       * Get or set if section header rows will be shown.\n       * @example\n       * chart\n       *     .section([value], [name])\n       *     .showSections(true|false);\n       * @param {Boolean} [showSections=true]\n       * @returns {Boolean|DataTable}\n       */\n\n    }, {\n      key: \"showSections\",\n      value: function showSections(_showSections) {\n        if (!arguments.length) {\n          return this._showSections;\n        }\n\n        this._showSections = _showSections;\n        return this;\n      }\n      /**\n       * Backward-compatible synonym for {@link DataTable#showSections showSections}.\n       * @param {Boolean} [showSections=true]\n       * @returns {Boolean|DataTable}\n       */\n\n    }, {\n      key: \"showGroups\",\n      value: function showGroups(showSections) {\n        logger.warnOnce('consider using dataTable.showSections instead of dataTable.showGroups for clarity');\n\n        if (!arguments.length) {\n          return this.showSections();\n        }\n\n        return this.showSections(showSections);\n      }\n    }]);\n\n    return DataTable;\n  }(BaseMixin);\n\n  var dataTable = function dataTable(parent, chartGroup) {\n    return new DataTable(parent, chartGroup);\n  };\n  /**\n   * The geo choropleth chart is designed as an easy way to create a crossfilter driven choropleth map\n   * from GeoJson data. This chart implementation was inspired by\n   * {@link http://bl.ocks.org/4060606 the great d3 choropleth example}.\n   *\n   * Examples:\n   * - {@link http://dc-js.github.com/dc.js/vc/index.html US Venture Capital Landscape 2011}\n   * @mixes ColorMixin\n   * @mixes BaseMixin\n   */\n\n\n  var GeoChoroplethChart = /*#__PURE__*/function (_ColorMixin3) {\n    _inherits(GeoChoroplethChart, _ColorMixin3);\n\n    var _super18 = _createSuper(GeoChoroplethChart);\n\n    /**\n     * Create a Geo Choropleth Chart.\n     * @example\n     * // create a choropleth chart under '#us-chart' element using the default global chart group\n     * var chart1 = new GeoChoroplethChart('#us-chart');\n     * // create a choropleth chart under '#us-chart2' element using chart group A\n     * var chart2 = new CompositeChart('#us-chart2', 'chartGroupA');\n     * @param {String|node|d3.selection} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector} specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function GeoChoroplethChart(parent, chartGroup) {\n      var _this70;\n\n      _classCallCheck(this, GeoChoroplethChart);\n\n      _this70 = _super18.call(this);\n\n      _this70.colorAccessor(function (d) {\n        return d || 0;\n      });\n\n      _this70._geoPath = d3Geo.geoPath();\n      _this70._projectionFlag = undefined;\n      _this70._projection = undefined;\n      _this70._geoJsons = [];\n\n      _this70.anchor(parent, chartGroup);\n\n      return _this70;\n    }\n\n    _createClass(GeoChoroplethChart, [{\n      key: \"_doRender\",\n      value: function _doRender() {\n        this.resetSvg();\n\n        for (var layerIndex = 0; layerIndex < this._geoJsons.length; ++layerIndex) {\n          var states = this.svg().append('g').attr('class', \"layer\".concat(layerIndex));\n          var regionG = states.selectAll(\"g.\".concat(this._geoJson(layerIndex).name)).data(this._geoJson(layerIndex).data);\n          regionG = regionG.enter().append('g').attr('class', this._geoJson(layerIndex).name).merge(regionG);\n          regionG.append('path').classed('dc-tabbable', this._keyboardAccessible).attr('fill', 'white').attr('d', this._getGeoPath());\n          regionG.append('title');\n\n          this._plotData(layerIndex);\n        }\n\n        this._projectionFlag = false;\n      }\n    }, {\n      key: \"_plotData\",\n      value: function _plotData(layerIndex) {\n        var data = this._generateLayeredData();\n\n        if (this._isDataLayer(layerIndex)) {\n          var regionG = this._renderRegionG(layerIndex);\n\n          this._renderPaths(regionG, layerIndex, data);\n\n          this._renderTitles(regionG, layerIndex, data);\n        }\n      }\n    }, {\n      key: \"_generateLayeredData\",\n      value: function _generateLayeredData() {\n        var data = {};\n        var groupAll = this.data();\n\n        for (var i = 0; i < groupAll.length; ++i) {\n          data[this.keyAccessor()(groupAll[i])] = this.valueAccessor()(groupAll[i]);\n        }\n\n        return data;\n      }\n    }, {\n      key: \"_isDataLayer\",\n      value: function _isDataLayer(layerIndex) {\n        return this._geoJson(layerIndex).keyAccessor;\n      }\n    }, {\n      key: \"_renderRegionG\",\n      value: function _renderRegionG(layerIndex) {\n        var _this71 = this;\n\n        var regionG = this.svg().selectAll(this._layerSelector(layerIndex)).classed('selected', function (d) {\n          return _this71._isSelected(layerIndex, d);\n        }).classed('deselected', function (d) {\n          return _this71._isDeselected(layerIndex, d);\n        }).attr('class', function (d) {\n          var layerNameClass = _this71._geoJson(layerIndex).name;\n\n          var regionClass = utils.nameToId(_this71._geoJson(layerIndex).keyAccessor(d));\n          var baseClasses = \"\".concat(layerNameClass, \" \").concat(regionClass);\n\n          if (_this71._isSelected(layerIndex, d)) {\n            baseClasses += ' selected';\n          }\n\n          if (_this71._isDeselected(layerIndex, d)) {\n            baseClasses += ' deselected';\n          }\n\n          return baseClasses;\n        });\n        return regionG;\n      }\n    }, {\n      key: \"_layerSelector\",\n      value: function _layerSelector(layerIndex) {\n        return \"g.layer\".concat(layerIndex, \" g.\").concat(this._geoJson(layerIndex).name);\n      }\n    }, {\n      key: \"_isSelected\",\n      value: function _isSelected(layerIndex, d) {\n        return this.hasFilter() && this.hasFilter(this._getKey(layerIndex, d));\n      }\n    }, {\n      key: \"_isDeselected\",\n      value: function _isDeselected(layerIndex, d) {\n        return this.hasFilter() && !this.hasFilter(this._getKey(layerIndex, d));\n      }\n    }, {\n      key: \"_getKey\",\n      value: function _getKey(layerIndex, d) {\n        return this._geoJson(layerIndex).keyAccessor(d);\n      }\n    }, {\n      key: \"_geoJson\",\n      value: function _geoJson(index) {\n        return this._geoJsons[index];\n      }\n    }, {\n      key: \"_renderPaths\",\n      value: function _renderPaths(regionG, layerIndex, data) {\n        var _this72 = this;\n\n        var paths = regionG.select('path').attr('fill', function () {\n          var currentFill = d3Selection.select(this).attr('fill');\n\n          if (currentFill) {\n            return currentFill;\n          }\n\n          return 'none';\n        }).on('click', d3compat.eventHandler(function (d) {\n          return _this72.onClick(d, layerIndex);\n        }));\n\n        if (this._keyboardAccessible) {\n          this._makeKeyboardAccessible(this.onClick, layerIndex);\n        }\n\n        transition(paths, this.transitionDuration(), this.transitionDelay()).attr('fill', function (d, i) {\n          return _this72.getColor(data[_this72._geoJson(layerIndex).keyAccessor(d)], i);\n        });\n      }\n    }, {\n      key: \"onClick\",\n      value: function onClick(d, layerIndex) {\n        var _this73 = this;\n\n        var selectedRegion = this._geoJson(layerIndex).keyAccessor(d);\n\n        events.trigger(function () {\n          _this73.filter(selectedRegion);\n\n          _this73.redrawGroup();\n        });\n      }\n    }, {\n      key: \"_renderTitles\",\n      value: function _renderTitles(regionG, layerIndex, data) {\n        var _this74 = this;\n\n        if (this.renderTitle()) {\n          regionG.selectAll('title').text(function (d) {\n            var key = _this74._getKey(layerIndex, d);\n\n            var value = data[key];\n            return _this74.title()({\n              key: key,\n              value: value\n            });\n          });\n        }\n      }\n    }, {\n      key: \"_doRedraw\",\n      value: function _doRedraw() {\n        for (var layerIndex = 0; layerIndex < this._geoJsons.length; ++layerIndex) {\n          this._plotData(layerIndex);\n\n          if (this._projectionFlag) {\n            this.svg().selectAll(\"g.\".concat(this._geoJson(layerIndex).name, \" path\")).attr('d', this._getGeoPath());\n          }\n        }\n\n        this._projectionFlag = false;\n      }\n      /**\n       * **mandatory**\n       *\n       * Use this function to insert a new GeoJson map layer. This function can be invoked multiple times\n       * if you have multiple GeoJson data layers to render on top of each other. If you overlay multiple\n       * layers with the same name the new overlay will override the existing one.\n       * @see {@link http://geojson.org/ GeoJSON}\n       * @see {@link https://github.com/topojson/topojson/wiki TopoJSON}\n       * @see {@link https://github.com/topojson/topojson-1.x-api-reference/blob/master/API-Reference.md#wiki-feature topojson.feature}\n       * @example\n       * // insert a layer for rendering US states\n       * chart.overlayGeoJson(statesJson.features, 'state', function(d) {\n       *      return d.properties.name;\n       * });\n       * @param {_geoJson} json - a geojson feed\n       * @param {String} name - name of the layer\n       * @param {Function} keyAccessor - accessor function used to extract 'key' from the GeoJson data. The key extracted by\n       * this function should match the keys returned by the crossfilter groups.\n       * @returns {GeoChoroplethChart}\n       */\n\n    }, {\n      key: \"overlayGeoJson\",\n      value: function overlayGeoJson(json, name, keyAccessor) {\n        for (var i = 0; i < this._geoJsons.length; ++i) {\n          if (this._geoJsons[i].name === name) {\n            this._geoJsons[i].data = json;\n            this._geoJsons[i].keyAccessor = keyAccessor;\n            return this;\n          }\n        }\n\n        this._geoJsons.push({\n          name: name,\n          data: json,\n          keyAccessor: keyAccessor\n        });\n\n        return this;\n      }\n      /**\n       * Gets or sets a custom geo projection function. See the available\n       * {@link https://github.com/d3/d3-geo/blob/master/README.md#projections d3 geo projection functions}.\n       *\n       * Starting version 3.0 it has been deprecated to rely on the default projection being\n       * {@link https://github.com/d3/d3-geo/blob/master/README.md#geoAlbersUsa d3.geoAlbersUsa()}. Please\n       * set it explicitly. {@link https://bl.ocks.org/mbostock/5557726\n       * Considering that `null` is also a valid value for projection}, if you need\n       * projection to be `null` please set it explicitly to `null`.\n       * @see {@link https://github.com/d3/d3-geo/blob/master/README.md#projections d3.projection}\n       * @see {@link https://github.com/d3/d3-geo-projection d3-geo-projection}\n       * @param {d3.projection} [projection=d3.geoAlbersUsa()]\n       * @returns {d3.projection|GeoChoroplethChart}\n       */\n\n    }, {\n      key: \"projection\",\n      value: function projection(_projection) {\n        if (!arguments.length) {\n          return this._projection;\n        }\n\n        this._projection = _projection;\n        this._projectionFlag = true;\n        return this;\n      }\n    }, {\n      key: \"_getGeoPath\",\n      value: function _getGeoPath() {\n        if (this._projection === undefined) {\n          logger.warn('choropleth projection default of geoAlbers is deprecated,' + ' in next version projection will need to be set explicitly');\n          return this._geoPath.projection(d3Geo.geoAlbersUsa());\n        }\n\n        return this._geoPath.projection(this._projection);\n      }\n      /**\n       * Returns all GeoJson layers currently registered with this chart. The returned array is a\n       * reference to this chart's internal data structure, so any modification to this array will also\n       * modify this chart's internal registration.\n       * @returns {Array<{name:String, data: Object, accessor: Function}>}\n       */\n\n    }, {\n      key: \"geoJsons\",\n      value: function geoJsons() {\n        return this._geoJsons;\n      }\n      /**\n       * Returns the {@link https://github.com/d3/d3-geo/blob/master/README.md#paths d3.geoPath} object used to\n       * render the projection and features.  Can be useful for figuring out the bounding box of the\n       * feature set and thus a way to calculate scale and translation for the projection.\n       * @see {@link https://github.com/d3/d3-geo/blob/master/README.md#paths d3.geoPath}\n       * @returns {d3.geoPath}\n       */\n\n    }, {\n      key: \"geoPath\",\n      value: function geoPath() {\n        return this._geoPath;\n      }\n      /**\n       * Remove a GeoJson layer from this chart by name\n       * @param {String} name\n       * @returns {GeoChoroplethChart}\n       */\n\n    }, {\n      key: \"removeGeoJson\",\n      value: function removeGeoJson(name) {\n        var geoJsons = [];\n\n        for (var i = 0; i < this._geoJsons.length; ++i) {\n          var layer = this._geoJsons[i];\n\n          if (layer.name !== name) {\n            geoJsons.push(layer);\n          }\n        }\n\n        this._geoJsons = geoJsons;\n        return this;\n      }\n    }]);\n\n    return GeoChoroplethChart;\n  }(ColorMixin(BaseMixin));\n\n  var geoChoroplethChart = function geoChoroplethChart(parent, chartGroup) {\n    return new GeoChoroplethChart(parent, chartGroup);\n  };\n\n  var DEFAULT_BORDER_RADIUS = 6.75;\n  /**\n   * A heat map is matrix that represents the values of two dimensions of data using colors.\n   * @mixes ColorMixin\n   * @mixes MarginMixin\n   * @mixes BaseMixin\n   */\n\n  var HeatMap = /*#__PURE__*/function (_ColorMixin4) {\n    _inherits(HeatMap, _ColorMixin4);\n\n    var _super19 = _createSuper(HeatMap);\n\n    /**\n     * Create a Heat Map\n     * @example\n     * // create a heat map under #chart-container1 element using the default global chart group\n     * var heatMap1 = new HeatMap('#chart-container1');\n     * // create a heat map under #chart-container2 element using chart group A\n     * var heatMap2 = new HeatMap('#chart-container2', 'chartGroupA');\n     * @param {String|node|d3.selection} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector} specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function HeatMap(parent, chartGroup) {\n      var _this75;\n\n      _classCallCheck(this, HeatMap);\n\n      _this75 = _super19.call(this);\n      _this75._chartBody = undefined;\n      _this75._cols = undefined;\n      _this75._rows = undefined;\n      _this75._colOrdering = d3Array.ascending;\n      _this75._rowOrdering = d3Array.ascending;\n      _this75._colScale = d3Scale.scaleBand();\n      _this75._rowScale = d3Scale.scaleBand();\n      _this75._xBorderRadius = DEFAULT_BORDER_RADIUS;\n      _this75._yBorderRadius = DEFAULT_BORDER_RADIUS;\n\n      _this75._mandatoryAttributes(['group']);\n\n      _this75.title(_this75.colorAccessor());\n\n      _this75._colsLabel = function (d) {\n        return d;\n      };\n\n      _this75._rowsLabel = function (d) {\n        return d;\n      };\n\n      _this75._xAxisOnClick = function (d) {\n        _this75._filterAxis(0, d);\n      };\n\n      _this75._yAxisOnClick = function (d) {\n        _this75._filterAxis(1, d);\n      };\n\n      _this75._boxOnClick = function (d) {\n        var filter = d.key;\n        events.trigger(function () {\n          _this75.filter(filters.TwoDimensionalFilter(filter));\n\n          _this75.redrawGroup();\n        });\n      };\n\n      _this75.anchor(parent, chartGroup);\n\n      return _this75;\n    }\n    /**\n     * Set or get the column label function. The chart class uses this function to render\n     * column labels on the X axis. It is passed the column name.\n     * @example\n     * // the default label function just returns the name\n     * chart.colsLabel(function(d) { return d; });\n     * @param  {Function} [labelFunction=function(d) { return d; }]\n     * @returns {Function|HeatMap}\n     */\n\n\n    _createClass(HeatMap, [{\n      key: \"colsLabel\",\n      value: function colsLabel(labelFunction) {\n        if (!arguments.length) {\n          return this._colsLabel;\n        }\n\n        this._colsLabel = labelFunction;\n        return this;\n      }\n      /**\n       * Set or get the row label function. The chart class uses this function to render\n       * row labels on the Y axis. It is passed the row name.\n       * @example\n       * // the default label function just returns the name\n       * chart.rowsLabel(function(d) { return d; });\n       * @param  {Function} [labelFunction=function(d) { return d; }]\n       * @returns {Function|HeatMap}\n       */\n\n    }, {\n      key: \"rowsLabel\",\n      value: function rowsLabel(labelFunction) {\n        if (!arguments.length) {\n          return this._rowsLabel;\n        }\n\n        this._rowsLabel = labelFunction;\n        return this;\n      }\n    }, {\n      key: \"_filterAxis\",\n      value: function _filterAxis(axis, value) {\n        var _this76 = this;\n\n        var cellsOnAxis = this.selectAll('.box-group').filter(function (d) {\n          return d.key[axis] === value;\n        });\n        var unfilteredCellsOnAxis = cellsOnAxis.filter(function (d) {\n          return !_this76.hasFilter(d.key);\n        });\n        events.trigger(function () {\n          var selection = unfilteredCellsOnAxis.empty() ? cellsOnAxis : unfilteredCellsOnAxis;\n          var filtersList = selection.data().map(function (kv) {\n            return filters.TwoDimensionalFilter(kv.key);\n          });\n\n          _this76.filter([filtersList]);\n\n          _this76.redrawGroup();\n        });\n      }\n    }, {\n      key: \"filter\",\n      value: function filter(_filter2) {\n        var _this77 = this;\n\n        var nonstandardFilter = function nonstandardFilter(f) {\n          logger.warnOnce('heatmap.filter taking a coordinate is deprecated - please pass dc.filters.TwoDimensionalFilter instead');\n          return _this77._filter(filters.TwoDimensionalFilter(f));\n        };\n\n        if (!arguments.length) {\n          return _get(_getPrototypeOf(HeatMap.prototype), \"filter\", this).call(this);\n        }\n\n        if (_filter2 !== null && _filter2.filterType !== 'TwoDimensionalFilter' && !(Array.isArray(_filter2) && Array.isArray(_filter2[0]) && _filter2[0][0].filterType === 'TwoDimensionalFilter')) {\n          return nonstandardFilter(_filter2);\n        }\n\n        return _get(_getPrototypeOf(HeatMap.prototype), \"filter\", this).call(this, _filter2);\n      }\n      /**\n       * Gets or sets the values used to create the rows of the heatmap, as an array. By default, all\n       * the values will be fetched from the data using the value accessor.\n       * @param  {Array<String|Number>} [rows]\n       * @returns {Array<String|Number>|HeatMap}\n       */\n\n    }, {\n      key: \"rows\",\n      value: function rows(_rows) {\n        if (!arguments.length) {\n          return this._rows;\n        }\n\n        this._rows = _rows;\n        return this;\n      }\n      /**\n       * Get or set a comparator to order the rows.\n       * Default is {@link https://github.com/d3/d3-array#ascending d3.ascending}.\n       * @param  {Function} [rowOrdering]\n       * @returns {Function|HeatMap}\n       */\n\n    }, {\n      key: \"rowOrdering\",\n      value: function rowOrdering(_rowOrdering) {\n        if (!arguments.length) {\n          return this._rowOrdering;\n        }\n\n        this._rowOrdering = _rowOrdering;\n        return this;\n      }\n      /**\n       * Gets or sets the keys used to create the columns of the heatmap, as an array. By default, all\n       * the values will be fetched from the data using the key accessor.\n       * @param  {Array<String|Number>} [cols]\n       * @returns {Array<String|Number>|HeatMap}\n       */\n\n    }, {\n      key: \"cols\",\n      value: function cols(_cols) {\n        if (!arguments.length) {\n          return this._cols;\n        }\n\n        this._cols = _cols;\n        return this;\n      }\n      /**\n       * Get or set a comparator to order the columns.\n       * Default is  {@link https://github.com/d3/d3-array#ascending d3.ascending}.\n       * @param  {Function} [colOrdering]\n       * @returns {Function|HeatMap}\n       */\n\n    }, {\n      key: \"colOrdering\",\n      value: function colOrdering(_colOrdering) {\n        if (!arguments.length) {\n          return this._colOrdering;\n        }\n\n        this._colOrdering = _colOrdering;\n        return this;\n      }\n    }, {\n      key: \"_doRender\",\n      value: function _doRender() {\n        this.resetSvg();\n        this._chartBody = this.svg().append('g').attr('class', 'heatmap').attr('transform', \"translate(\".concat(this.margins().left, \",\").concat(this.margins().top, \")\"));\n        return this._doRedraw();\n      }\n    }, {\n      key: \"_doRedraw\",\n      value: function _doRedraw() {\n        var _this78 = this;\n\n        var data = this.data();\n        var rows = this.rows() || data.map(this.valueAccessor()),\n            cols = this.cols() || data.map(this.keyAccessor());\n\n        if (this._rowOrdering) {\n          rows = rows.sort(this._rowOrdering);\n        }\n\n        if (this._colOrdering) {\n          cols = cols.sort(this._colOrdering);\n        }\n\n        rows = this._rowScale.domain(rows);\n        cols = this._colScale.domain(cols);\n        var rowCount = rows.domain().length,\n            colCount = cols.domain().length,\n            boxWidth = Math.floor(this.effectiveWidth() / colCount),\n            boxHeight = Math.floor(this.effectiveHeight() / rowCount);\n        cols.rangeRound([0, this.effectiveWidth()]);\n        rows.rangeRound([this.effectiveHeight(), 0]);\n\n        var boxes = this._chartBody.selectAll('g.box-group').data(this.data(), function (d, i) {\n          return \"\".concat(_this78.keyAccessor()(d, i), \"\\0\").concat(_this78.valueAccessor()(d, i));\n        });\n\n        boxes.exit().remove();\n        var gEnter = boxes.enter().append('g').attr('class', 'box-group');\n        gEnter.append('rect').attr('class', 'heat-box').classed('dc-tabbable', this._keyboardAccessible).attr('fill', 'white').attr('x', function (d, i) {\n          return cols(_this78.keyAccessor()(d, i));\n        }).attr('y', function (d, i) {\n          return rows(_this78.valueAccessor()(d, i));\n        }).on('click', d3compat.eventHandler(this.boxOnClick()));\n\n        if (this._keyboardAccessible) {\n          this._makeKeyboardAccessible(this.boxOnClick);\n        }\n\n        boxes = gEnter.merge(boxes);\n\n        if (this.renderTitle()) {\n          gEnter.append('title');\n          boxes.select('title').text(this.title());\n        }\n\n        transition(boxes.select('rect'), this.transitionDuration(), this.transitionDelay()).attr('x', function (d, i) {\n          return cols(_this78.keyAccessor()(d, i));\n        }).attr('y', function (d, i) {\n          return rows(_this78.valueAccessor()(d, i));\n        }).attr('rx', this._xBorderRadius).attr('ry', this._yBorderRadius).attr('fill', this.getColor).attr('width', boxWidth).attr('height', boxHeight);\n\n        var gCols = this._chartBody.select('g.cols');\n\n        if (gCols.empty()) {\n          gCols = this._chartBody.append('g').attr('class', 'cols axis');\n        }\n\n        var gColsText = gCols.selectAll('text').data(cols.domain());\n        gColsText.exit().remove();\n        gColsText = gColsText.enter().append('text').attr('x', function (d) {\n          return cols(d) + boxWidth / 2;\n        }).style('text-anchor', 'middle').attr('y', this.effectiveHeight()).attr('dy', 12).on('click', d3compat.eventHandler(this.xAxisOnClick())).text(this.colsLabel()).merge(gColsText);\n        transition(gColsText, this.transitionDuration(), this.transitionDelay()).text(this.colsLabel()).attr('x', function (d) {\n          return cols(d) + boxWidth / 2;\n        }).attr('y', this.effectiveHeight());\n\n        var gRows = this._chartBody.select('g.rows');\n\n        if (gRows.empty()) {\n          gRows = this._chartBody.append('g').attr('class', 'rows axis');\n        }\n\n        var gRowsText = gRows.selectAll('text').data(rows.domain());\n        gRowsText.exit().remove();\n        gRowsText = gRowsText.enter().append('text').style('text-anchor', 'end').attr('x', 0).attr('dx', -2).attr('y', function (d) {\n          return rows(d) + boxHeight / 2;\n        }).attr('dy', 6).on('click', d3compat.eventHandler(this.yAxisOnClick())).text(this.rowsLabel()).merge(gRowsText);\n        transition(gRowsText, this.transitionDuration(), this.transitionDelay()).text(this.rowsLabel()).attr('y', function (d) {\n          return rows(d) + boxHeight / 2;\n        });\n\n        if (this.hasFilter()) {\n          var chart = this;\n          this.selectAll('g.box-group').each(function (d) {\n            if (chart.isSelectedNode(d)) {\n              chart.highlightSelected(this);\n            } else {\n              chart.fadeDeselected(this);\n            }\n          });\n        } else {\n          var _chart2 = this;\n\n          this.selectAll('g.box-group').each(function () {\n            _chart2.resetHighlight(this);\n          });\n        }\n\n        return this;\n      }\n      /**\n       * Gets or sets the handler that fires when an individual cell is clicked in the heatmap.\n       * By default, filtering of the cell will be toggled.\n       * @example\n       * // default box on click handler\n       * chart.boxOnClick(function (d) {\n       *     var filter = d.key;\n       *     events.trigger(function () {\n       *         _chart.filter(filter);\n       *         _chart.redrawGroup();\n       *     });\n       * });\n       * @param  {Function} [handler]\n       * @returns {Function|HeatMap}\n       */\n\n    }, {\n      key: \"boxOnClick\",\n      value: function boxOnClick(handler) {\n        if (!arguments.length) {\n          return this._boxOnClick;\n        }\n\n        this._boxOnClick = handler;\n        return this;\n      }\n      /**\n       * Gets or sets the handler that fires when a column tick is clicked in the x axis.\n       * By default, if any cells in the column are unselected, the whole column will be selected,\n       * otherwise the whole column will be unselected.\n       * @param  {Function} [handler]\n       * @returns {Function|HeatMap}\n       */\n\n    }, {\n      key: \"xAxisOnClick\",\n      value: function xAxisOnClick(handler) {\n        if (!arguments.length) {\n          return this._xAxisOnClick;\n        }\n\n        this._xAxisOnClick = handler;\n        return this;\n      }\n      /**\n       * Gets or sets the handler that fires when a row tick is clicked in the y axis.\n       * By default, if any cells in the row are unselected, the whole row will be selected,\n       * otherwise the whole row will be unselected.\n       * @param  {Function} [handler]\n       * @returns {Function|HeatMap}\n       */\n\n    }, {\n      key: \"yAxisOnClick\",\n      value: function yAxisOnClick(handler) {\n        if (!arguments.length) {\n          return this._yAxisOnClick;\n        }\n\n        this._yAxisOnClick = handler;\n        return this;\n      }\n      /**\n       * Gets or sets the X border radius.  Set to 0 to get full rectangles.\n       * @param  {Number} [xBorderRadius=6.75]\n       * @returns {Number|HeatMap}\n       */\n\n    }, {\n      key: \"xBorderRadius\",\n      value: function xBorderRadius(_xBorderRadius) {\n        if (!arguments.length) {\n          return this._xBorderRadius;\n        }\n\n        this._xBorderRadius = _xBorderRadius;\n        return this;\n      }\n      /**\n       * Gets or sets the Y border radius.  Set to 0 to get full rectangles.\n       * @param  {Number} [yBorderRadius=6.75]\n       * @returns {Number|HeatMap}\n       */\n\n    }, {\n      key: \"yBorderRadius\",\n      value: function yBorderRadius(_yBorderRadius) {\n        if (!arguments.length) {\n          return this._yBorderRadius;\n        }\n\n        this._yBorderRadius = _yBorderRadius;\n        return this;\n      }\n    }, {\n      key: \"isSelectedNode\",\n      value: function isSelectedNode(d) {\n        return this.hasFilter(d.key);\n      }\n    }]);\n\n    return HeatMap;\n  }(ColorMixin(MarginMixin));\n\n  var heatMap = function heatMap(parent, chartGroup) {\n    return new HeatMap(parent, chartGroup);\n  };\n  /**\n   * htmlLegend is a attachable widget that can be added to other dc charts to render horizontal/vertical legend\n   * labels.\n   * @example\n   * chart.legend(HtmlLegend().container(legendContainerElement).horizontal(false))\n   * @returns {HtmlLegend}\n   */\n\n\n  var HtmlLegend = /*#__PURE__*/function () {\n    function HtmlLegend() {\n      _classCallCheck(this, HtmlLegend);\n\n      this._htmlLegendDivCssClass = 'dc-html-legend';\n      this._legendItemCssClassHorizontal = 'dc-legend-item-horizontal';\n      this._legendItemCssClassVertical = 'dc-legend-item-vertical';\n      this._parent = undefined;\n      this._container = undefined;\n      this._legendText = pluck('name');\n      this._maxItems = undefined;\n      this._horizontal = false;\n      this._legendItemClass = undefined;\n      this._highlightSelected = false;\n      this._keyboardAccessible = false;\n    }\n\n    _createClass(HtmlLegend, [{\n      key: \"parent\",\n      value: function parent(p) {\n        if (!arguments.length) {\n          return this._parent;\n        }\n\n        this._parent = p;\n        return this;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this79 = this;\n\n        this._defaultLegendItemCssClass = this._horizontal ? this._legendItemCssClassHorizontal : this._legendItemCssClassVertical;\n\n        this._container.select(\"div.\".concat(this._htmlLegendDivCssClass)).remove();\n\n        var container = this._container.append('div').attr('class', this._htmlLegendDivCssClass);\n\n        container.attr('style', \"max-width:\".concat(this._container.nodes()[0].style.width));\n\n        var legendables = this._parent.legendables();\n\n        var filters = this._parent.filters();\n\n        if (this._maxItems !== undefined) {\n          legendables = legendables.slice(0, this._maxItems);\n        }\n\n        var legendItemClassName = this._legendItemClass ? this._legendItemClass : this._defaultLegendItemCssClass;\n        var itemEnter = container.selectAll(\"div.\".concat(legendItemClassName)).data(legendables).enter().append('div').classed(legendItemClassName, true).on('mouseover', d3compat.eventHandler(function (d) {\n          return _this79._parent.legendHighlight(d);\n        })).on('mouseout', d3compat.eventHandler(function (d) {\n          return _this79._parent.legendReset(d);\n        })).on('click', d3compat.eventHandler(function (d) {\n          return _this79._parent.legendToggle(d);\n        }));\n\n        if (this._highlightSelected) {\n          itemEnter.classed(constants.SELECTED_CLASS, function (d) {\n            return filters.indexOf(d.name) !== -1;\n          });\n        }\n\n        itemEnter.append('span').attr('class', 'dc-legend-item-color').style('background-color', pluck('color'));\n        itemEnter.append('span').attr('class', 'dc-legend-item-label').classed('dc-tabbable', this._keyboardAccessible).attr('title', this._legendText).text(this._legendText);\n\n        if (this._keyboardAccessible) {\n          this._makeLegendKeyboardAccessible();\n        }\n      }\n      /**\n       * Set the container selector for the legend widget. Required.\n       * @param {String} [container]\n       * @return {String|HtmlLegend}\n       */\n\n    }, {\n      key: \"container\",\n      value: function container(_container) {\n        if (!arguments.length) {\n          return this._container;\n        }\n\n        this._container = d3Selection.select(_container);\n        return this;\n      }\n      /**\n       * This can be optionally used to override class for legenditem and just use this class style.\n       * This is helpful for overriding the style of a particular chart rather than overriding\n       * the style for all charts.\n       *\n       * Setting this will disable the highlighting of selected items also.\n       * @param {String} [legendItemClass]\n       * @return {String|HtmlLegend}\n       */\n\n    }, {\n      key: \"legendItemClass\",\n      value: function legendItemClass(_legendItemClass) {\n        if (!arguments.length) {\n          return this._legendItemClass;\n        }\n\n        this._legendItemClass = _legendItemClass;\n        return this;\n      }\n      /**\n       * This can be optionally used to enable highlighting legends for the selections/filters for the\n       * chart.\n       * @param {String} [highlightSelected]\n       * @return {String|HtmlLegend}\n       */\n\n    }, {\n      key: \"highlightSelected\",\n      value: function highlightSelected(_highlightSelected) {\n        if (!arguments.length) {\n          return this._highlightSelected;\n        }\n\n        this._highlightSelected = _highlightSelected;\n        return this;\n      }\n      /**\n       * Display the legend horizontally instead of vertically\n       * @param {String} [horizontal]\n       * @return {String|HtmlLegend}\n       */\n\n    }, {\n      key: \"horizontal\",\n      value: function horizontal(_horizontal) {\n        if (!arguments.length) {\n          return this._horizontal;\n        }\n\n        this._horizontal = _horizontal;\n        return this;\n      }\n      /**\n       * Set or get the legend text function. The legend widget uses this function to render the legend\n       * text for each item. If no function is specified the legend widget will display the names\n       * associated with each group.\n       * @param  {Function} [legendText]\n       * @returns {Function|HtmlLegend}\n       * @example\n       * // default legendText\n       * legend.legendText(pluck('name'))\n       *\n       * // create numbered legend items\n       * chart.legend(new HtmlLegend().legendText(function(d, i) { return i + '. ' + d.name; }))\n       *\n       * // create legend displaying group counts\n       * chart.legend(new HtmlLegend().legendText(function(d) { return d.name + ': ' d.data; }))\n       */\n\n    }, {\n      key: \"legendText\",\n      value: function legendText(_legendText) {\n        if (!arguments.length) {\n          return this._legendText;\n        }\n\n        this._legendText = _legendText;\n        return this;\n      }\n      /**\n       * Maximum number of legend items to display\n       * @param  {Number} [maxItems]\n       * @return {HtmlLegend}\n       */\n\n    }, {\n      key: \"maxItems\",\n      value: function maxItems(_maxItems) {\n        if (!arguments.length) {\n          return this._maxItems;\n        }\n\n        this._maxItems = utils.isNumber(_maxItems) ? _maxItems : undefined;\n        return this;\n      }\n      /**\n       * If set, individual legend items will be focusable from keyboard and on pressing Enter or Space\n       * will behave as if clicked on.\n       * \n       * If `svgDescription` on the parent chart has not been explicitly set, will also set the default \n       * SVG description text to the class constructor name, like BarChart or HeatMap, and make the entire\n       * SVG focusable.\n       * @param {Boolean} [keyboardAccessible=false]\n       * @returns {Boolean|HtmlLegend}\n       */\n\n    }, {\n      key: \"keyboardAccessible\",\n      value: function keyboardAccessible(_keyboardAccessible2) {\n        if (!arguments.length) {\n          return this._keyboardAccessible;\n        }\n\n        this._keyboardAccessible = _keyboardAccessible2;\n        return this;\n      }\n    }, {\n      key: \"_makeLegendKeyboardAccessible\",\n      value: function _makeLegendKeyboardAccessible() {\n        var _this80 = this;\n\n        if (!this._parent._svgDescription) {\n          this._parent.svg().append('desc').attr('id', \"desc-id-\".concat(this._parent.__dcFlag__)).html(\"\".concat(this._parent.svgDescription()));\n\n          this._parent.svg().attr('tabindex', '0').attr('role', 'img').attr('aria-labelledby', \"desc-id-\".concat(this._parent.__dcFlag__));\n        }\n\n        var tabElements = this.container().selectAll('.dc-legend-item-label.dc-tabbable').attr('tabindex', 0);\n        tabElements.on('keydown', d3compat.eventHandler(function (d, event) {\n          // trigger only if d is an object\n          if (event.keyCode === 13 && typeof d === 'object') {\n            d.chart.legendToggle(d);\n          } // special case for space key press - prevent scrolling\n\n\n          if (event.keyCode === 32 && typeof d === 'object') {\n            d.chart.legendToggle(d);\n            event.preventDefault();\n          }\n        })).on('focus', d3compat.eventHandler(function (d) {\n          _this80._parent.legendHighlight(d);\n        })).on('blur', d3compat.eventHandler(function (d) {\n          _this80._parent.legendReset(d);\n        }));\n      }\n    }]);\n\n    return HtmlLegend;\n  }();\n\n  var htmlLegend = function htmlLegend() {\n    return new HtmlLegend();\n  };\n\n  var LABEL_GAP = 2;\n  /**\n   * Legend is a attachable widget that can be added to other dc charts to render horizontal legend\n   * labels.\n   *\n   * Examples:\n   * - {@link http://dc-js.github.com/dc.js/ Nasdaq 100 Index}\n   * - {@link http://dc-js.github.com/dc.js/crime/index.html Canadian City Crime Stats}\n   * @example\n   * chart.legend(new Legend().x(400).y(10).itemHeight(13).gap(5))\n   * @returns {Legend}\n   */\n\n  var Legend = /*#__PURE__*/function () {\n    function Legend() {\n      _classCallCheck(this, Legend);\n\n      this._parent = undefined;\n      this._x = 0;\n      this._y = 0;\n      this._itemHeight = 12;\n      this._gap = 5;\n      this._horizontal = false;\n      this._legendWidth = 560;\n      this._itemWidth = 70;\n      this._autoItemWidth = false;\n      this._legendText = pluck('name');\n      this._maxItems = undefined;\n      this._highlightSelected = false;\n      this._keyboardAccessible = false;\n      this._g = undefined;\n    }\n\n    _createClass(Legend, [{\n      key: \"parent\",\n      value: function parent(p) {\n        if (!arguments.length) {\n          return this._parent;\n        }\n\n        this._parent = p;\n        return this;\n      }\n      /**\n       * Set or get x coordinate for legend widget.\n       * @param  {Number} [x=0]\n       * @returns {Number|Legend}\n       */\n\n    }, {\n      key: \"x\",\n      value: function x(_x) {\n        if (!arguments.length) {\n          return this._x;\n        }\n\n        this._x = _x;\n        return this;\n      }\n      /**\n       * Set or get y coordinate for legend widget.\n       * @param  {Number} [y=0]\n       * @returns {Number|Legend}\n       */\n\n    }, {\n      key: \"y\",\n      value: function y(_y) {\n        if (!arguments.length) {\n          return this._y;\n        }\n\n        this._y = _y;\n        return this;\n      }\n      /**\n       * Set or get gap between legend items.\n       * @param  {Number} [gap=5]\n       * @returns {Number|Legend}\n       */\n\n    }, {\n      key: \"gap\",\n      value: function gap(_gap2) {\n        if (!arguments.length) {\n          return this._gap;\n        }\n\n        this._gap = _gap2;\n        return this;\n      }\n      /**\n       * This can be optionally used to enable highlighting legends for the selections/filters for the\n       * chart.\n       * @param {String} [highlightSelected]\n       * @return {String|dc.legend}\n       **/\n\n    }, {\n      key: \"highlightSelected\",\n      value: function highlightSelected(_highlightSelected2) {\n        if (!arguments.length) {\n          return this._highlightSelected;\n        }\n\n        this._highlightSelected = _highlightSelected2;\n        return this;\n      }\n      /**\n       * Set or get legend item height.\n       * @param  {Number} [itemHeight=12]\n       * @returns {Number|Legend}\n       */\n\n    }, {\n      key: \"itemHeight\",\n      value: function itemHeight(_itemHeight) {\n        if (!arguments.length) {\n          return this._itemHeight;\n        }\n\n        this._itemHeight = _itemHeight;\n        return this;\n      }\n      /**\n       * Position legend horizontally instead of vertically.\n       * @param  {Boolean} [horizontal=false]\n       * @returns {Boolean|Legend}\n       */\n\n    }, {\n      key: \"horizontal\",\n      value: function horizontal(_horizontal2) {\n        if (!arguments.length) {\n          return this._horizontal;\n        }\n\n        this._horizontal = _horizontal2;\n        return this;\n      }\n      /**\n       * Maximum width for horizontal legend.\n       * @param  {Number} [legendWidth=500]\n       * @returns {Number|Legend}\n       */\n\n    }, {\n      key: \"legendWidth\",\n      value: function legendWidth(_legendWidth) {\n        if (!arguments.length) {\n          return this._legendWidth;\n        }\n\n        this._legendWidth = _legendWidth;\n        return this;\n      }\n      /**\n       * Legend item width for horizontal legend.\n       * @param  {Number} [itemWidth=70]\n       * @returns {Number|Legend}\n       */\n\n    }, {\n      key: \"itemWidth\",\n      value: function itemWidth(_itemWidth) {\n        if (!arguments.length) {\n          return this._itemWidth;\n        }\n\n        this._itemWidth = _itemWidth;\n        return this;\n      }\n      /**\n       * Turn automatic width for legend items on or off. If true, {@link Legend#itemWidth itemWidth} is ignored.\n       * This setting takes into account the {@link Legend#gap gap}.\n       * @param  {Boolean} [autoItemWidth=false]\n       * @returns {Boolean|Legend}\n       */\n\n    }, {\n      key: \"autoItemWidth\",\n      value: function autoItemWidth(_autoItemWidth) {\n        if (!arguments.length) {\n          return this._autoItemWidth;\n        }\n\n        this._autoItemWidth = _autoItemWidth;\n        return this;\n      }\n      /**\n       * Set or get the legend text function. The legend widget uses this function to render the legend\n       * text for each item. If no function is specified the legend widget will display the names\n       * associated with each group.\n       * @param  {Function} [legendText]\n       * @returns {Function|Legend}\n       * @example\n       * // default legendText\n       * legend.legendText(pluck('name'))\n       *\n       * // create numbered legend items\n       * chart.legend(new Legend().legendText(function(d, i) { return i + '. ' + d.name; }))\n       *\n       * // create legend displaying group counts\n       * chart.legend(new Legend().legendText(function(d) { return d.name + ': ' d.data; }))\n       */\n\n    }, {\n      key: \"legendText\",\n      value: function legendText(_legendText2) {\n        if (!arguments.length) {\n          return this._legendText;\n        }\n\n        this._legendText = _legendText2;\n        return this;\n      }\n      /**\n       * Maximum number of legend items to display\n       * @param  {Number} [maxItems]\n       * @return {Legend}\n       */\n\n    }, {\n      key: \"maxItems\",\n      value: function maxItems(_maxItems2) {\n        if (!arguments.length) {\n          return this._maxItems;\n        }\n\n        this._maxItems = utils.isNumber(_maxItems2) ? _maxItems2 : undefined;\n        return this;\n      }\n      /**\n       * If set, individual legend items will be focusable from keyboard and on pressing Enter or Space\n       * will behave as if clicked on.\n       * \n       * If `svgDescription` on the parent chart has not been explicitly set, will also set the default \n       * SVG description text to the class constructor name, like BarChart or HeatMap, and make the entire\n       * SVG focusable.\n       * @param {Boolean} [keyboardAccessible=false]\n       * @returns {Boolean|Legend}\n       */\n\n    }, {\n      key: \"keyboardAccessible\",\n      value: function keyboardAccessible(_keyboardAccessible3) {\n        if (!arguments.length) {\n          return this._keyboardAccessible;\n        }\n\n        this._keyboardAccessible = _keyboardAccessible3;\n        return this;\n      } // Implementation methods\n\n    }, {\n      key: \"_legendItemHeight\",\n      value: function _legendItemHeight() {\n        return this._gap + this._itemHeight;\n      }\n    }, {\n      key: \"_makeLegendKeyboardAccessible\",\n      value: function _makeLegendKeyboardAccessible() {\n        var _this81 = this;\n\n        if (!this._parent._svgDescription) {\n          this._parent.svg().append('desc').attr('id', \"desc-id-\".concat(this._parent.__dcFlag__)).html(\"\".concat(this._parent.svgDescription()));\n\n          this._parent.svg().attr('tabindex', '0').attr('role', 'img').attr('aria-labelledby', \"desc-id-\".concat(this._parent.__dcFlag__));\n        }\n\n        var tabElements = this._parent.svg().selectAll('.dc-legend .dc-tabbable').attr('tabindex', 0);\n\n        tabElements.on('keydown', d3compat.eventHandler(function (d, event) {\n          // trigger only if d is an object\n          if (event.keyCode === 13 && typeof d === 'object') {\n            d.chart.legendToggle(d);\n          } // special case for space key press - prevent scrolling\n\n\n          if (event.keyCode === 32 && typeof d === 'object') {\n            d.chart.legendToggle(d);\n            event.preventDefault();\n          }\n        })).on('focus', d3compat.eventHandler(function (d) {\n          _this81._parent.legendHighlight(d);\n        })).on('blur', d3compat.eventHandler(function (d) {\n          _this81._parent.legendReset(d);\n        }));\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this82 = this;\n\n        this._parent.svg().select('g.dc-legend').remove();\n\n        this._g = this._parent.svg().append('g').attr('class', 'dc-legend').attr('transform', \"translate(\".concat(this._x, \",\").concat(this._y, \")\"));\n\n        var legendables = this._parent.legendables();\n\n        var filters = this._parent.filters();\n\n        if (this._maxItems !== undefined) {\n          legendables = legendables.slice(0, this._maxItems);\n        }\n\n        var itemEnter = this._g.selectAll('g.dc-legend-item').data(legendables).enter().append('g').attr('class', 'dc-legend-item').on('mouseover', d3compat.eventHandler(function (d) {\n          _this82._parent.legendHighlight(d);\n        })).on('mouseout', d3compat.eventHandler(function (d) {\n          _this82._parent.legendReset(d);\n        })).on('click', d3compat.eventHandler(function (d) {\n          d.chart.legendToggle(d);\n        }));\n\n        if (this._highlightSelected) {\n          itemEnter.classed(constants.SELECTED_CLASS, function (d) {\n            return filters.indexOf(d.name) !== -1;\n          });\n        }\n\n        this._g.selectAll('g.dc-legend-item').classed('fadeout', function (d) {\n          return d.chart.isLegendableHidden(d);\n        });\n\n        if (legendables.some(pluck('dashstyle'))) {\n          itemEnter.append('line').attr('x1', 0).attr('y1', this._itemHeight / 2).attr('x2', this._itemHeight).attr('y2', this._itemHeight / 2).attr('stroke-width', 2).attr('stroke-dasharray', pluck('dashstyle')).attr('stroke', pluck('color'));\n        } else {\n          itemEnter.append('rect').attr('width', this._itemHeight).attr('height', this._itemHeight).attr('fill', function (d) {\n            return d ? d.color : 'blue';\n          });\n        }\n\n        {\n          var _self = this;\n\n          itemEnter.append('text').text(_self._legendText).classed('dc-tabbable', this._keyboardAccessible).attr('x', _self._itemHeight + LABEL_GAP).attr('y', function () {\n            return _self._itemHeight / 2 + (this.clientHeight ? this.clientHeight : 13) / 2 - 2;\n          });\n\n          if (this._keyboardAccessible) {\n            this._makeLegendKeyboardAccessible();\n          }\n        }\n        var cumulativeLegendTextWidth = 0;\n        var row = 0;\n        {\n          var _self2 = this;\n\n          itemEnter.attr('transform', function (d, i) {\n            if (_self2._horizontal) {\n              var itemWidth = _self2._autoItemWidth === true ? this.getBBox().width + _self2._gap : _self2._itemWidth;\n\n              if (cumulativeLegendTextWidth + itemWidth > _self2._legendWidth && cumulativeLegendTextWidth > 0) {\n                ++row;\n                cumulativeLegendTextWidth = 0;\n              }\n\n              var translateBy = \"translate(\".concat(cumulativeLegendTextWidth, \",\").concat(row * _self2._legendItemHeight(), \")\");\n              cumulativeLegendTextWidth += itemWidth;\n              return translateBy;\n            } else {\n              return \"translate(0,\".concat(i * _self2._legendItemHeight(), \")\");\n            }\n          });\n        }\n      }\n    }]);\n\n    return Legend;\n  }();\n\n  var legend = function legend() {\n    return new Legend();\n  };\n\n  var DEFAULT_DOT_RADIUS = 5;\n  var TOOLTIP_G_CLASS = 'dc-tooltip';\n  var DOT_CIRCLE_CLASS = 'dot';\n  var Y_AXIS_REF_LINE_CLASS = 'yRef';\n  var X_AXIS_REF_LINE_CLASS = 'xRef';\n  var DEFAULT_DOT_OPACITY = 1e-6;\n  var LABEL_PADDING$1 = 3;\n  /**\n   * Concrete line/area chart implementation.\n   *\n   * Examples:\n   * - {@link http://dc-js.github.com/dc.js/ Nasdaq 100 Index}\n   * - {@link http://dc-js.github.com/dc.js/crime/index.html Canadian City Crime Stats}\n   * @mixes StackMixin\n   * @mixes CoordinateGridMixin\n   */\n\n  var LineChart = /*#__PURE__*/function (_StackMixin2) {\n    _inherits(LineChart, _StackMixin2);\n\n    var _super20 = _createSuper(LineChart);\n\n    /**\n     * Create a Line Chart.\n     * @example\n     * // create a line chart under #chart-container1 element using the default global chart group\n     * var chart1 = new LineChart('#chart-container1');\n     * // create a line chart under #chart-container2 element using chart group A\n     * var chart2 = new LineChart('#chart-container2', 'chartGroupA');\n     * // create a sub-chart under a composite parent chart\n     * var chart3 = new LineChart(compositeChart);\n     * @param {String|node|d3.selection|CompositeChart} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector}\n     * specifying a dom block element such as a div; or a dom element or d3 selection.  If the line\n     * chart is a sub-chart in a {@link CompositeChart Composite Chart} then pass in the parent\n     * composite chart instance instead.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function LineChart(parent, chartGroup) {\n      var _this83;\n\n      _classCallCheck(this, LineChart);\n\n      _this83 = _super20.call(this);\n      _this83._renderArea = false;\n      _this83._dotRadius = DEFAULT_DOT_RADIUS;\n      _this83._dataPointRadius = null;\n      _this83._dataPointFillOpacity = DEFAULT_DOT_OPACITY;\n      _this83._dataPointStrokeOpacity = DEFAULT_DOT_OPACITY;\n      _this83._curve = null;\n      _this83._interpolate = null; // d3.curveLinear;  // deprecated in 3.0\n\n      _this83._tension = null; // deprecated in 3.0\n\n      _this83._defined = undefined;\n      _this83._dashStyle = undefined;\n      _this83._xyTipsOn = true;\n\n      _this83.transitionDuration(500);\n\n      _this83.transitionDelay(0);\n\n      _this83._rangeBandPadding(1);\n\n      _this83.label(function (d) {\n        return utils.printSingleValue(d.y0 + d.y);\n      }, false);\n\n      _this83.anchor(parent, chartGroup);\n\n      return _this83;\n    }\n\n    _createClass(LineChart, [{\n      key: \"plotData\",\n      value: function plotData() {\n        var chartBody = this.chartBodyG();\n        var layersList = chartBody.select('g.stack-list');\n\n        if (layersList.empty()) {\n          layersList = chartBody.append('g').attr('class', 'stack-list');\n        }\n\n        var layers = layersList.selectAll('g.stack').data(this.data());\n        var layersEnter = layers.enter().append('g').attr('class', function (d, i) {\n          return \"stack _\".concat(i);\n        });\n        layers = layersEnter.merge(layers);\n\n        this._drawLine(layersEnter, layers);\n\n        this._drawArea(layersEnter, layers);\n\n        this._drawDots(chartBody, layers);\n\n        if (this.renderLabel()) {\n          this._drawLabels(layers);\n        }\n      }\n      /**\n       * Gets or sets the curve factory to use for lines and areas drawn, allowing e.g. step\n       * functions, splines, and cubic interpolation. Typically you would use one of the interpolator functions\n       * provided by {@link https://github.com/d3/d3-shape/blob/master/README.md#curves d3 curves}.\n       *\n       * Replaces the use of {@link LineChart#interpolate} and {@link LineChart#tension}\n       * in dc.js < 3.0\n       *\n       * This is passed to\n       * {@link https://github.com/d3/d3-shape/blob/master/README.md#line_curve line.curve} and\n       * {@link https://github.com/d3/d3-shape/blob/master/README.md#area_curve area.curve}.\n       * @example\n       * // default\n       * chart\n       *     .curve(d3.curveLinear);\n       * // Add tension to curves that support it\n       * chart\n       *     .curve(d3.curveCardinal.tension(0.5));\n       * // You can use some specialized variation like\n       * // https://en.wikipedia.org/wiki/Centripetal_Catmull%E2%80%93Rom_spline\n       * chart\n       *     .curve(d3.curveCatmullRom.alpha(0.5));\n       * @see {@link https://github.com/d3/d3-shape/blob/master/README.md#line_curve line.curve}\n       * @see {@link https://github.com/d3/d3-shape/blob/master/README.md#area_curve area.curve}\n       * @param  {d3.curve} [curve=d3.curveLinear]\n       * @returns {d3.curve|LineChart}\n       */\n\n    }, {\n      key: \"curve\",\n      value: function curve(_curve) {\n        if (!arguments.length) {\n          return this._curve;\n        }\n\n        this._curve = _curve;\n        return this;\n      }\n      /**\n       * Gets or sets the interpolator to use for lines drawn, by string name, allowing e.g. step\n       * functions, splines, and cubic interpolation.\n       *\n       * Possible values are: 'linear', 'linear-closed', 'step', 'step-before', 'step-after', 'basis',\n       * 'basis-open', 'basis-closed', 'bundle', 'cardinal', 'cardinal-open', 'cardinal-closed', and\n       * 'monotone'.\n       *\n       * This function exists for backward compatibility. Use {@link LineChart#curve}\n       * which is generic and provides more options.\n       * Value set through `.curve` takes precedence over `.interpolate` and `.tension`.\n       * @deprecated since version 3.0 use {@link LineChart#curve} instead\n       * @see {@link LineChart#curve}\n       * @param  {d3.curve} [interpolate=d3.curveLinear]\n       * @returns {d3.curve|LineChart}\n       */\n\n    }, {\n      key: \"interpolate\",\n      value: function interpolate(_interpolate2) {\n        logger.warnOnce('dc.lineChart.interpolate has been deprecated since version 3.0 use dc.lineChart.curve instead');\n\n        if (!arguments.length) {\n          return this._interpolate;\n        }\n\n        this._interpolate = _interpolate2;\n        return this;\n      }\n      /**\n       * Gets or sets the tension to use for lines drawn, in the range 0 to 1.\n       *\n       * Passed to the {@link https://github.com/d3/d3-shape/blob/master/README.md#curves d3 curve function}\n       * if it provides a `.tension` function. Example:\n       * {@link https://github.com/d3/d3-shape/blob/master/README.md#curveCardinal_tension curveCardinal.tension}.\n       *\n       * This function exists for backward compatibility. Use {@link LineChart#curve}\n       * which is generic and provides more options.\n       * Value set through `.curve` takes precedence over `.interpolate` and `.tension`.\n       * @deprecated since version 3.0 use {@link LineChart#curve} instead\n       * @see {@link LineChart#curve}\n       * @param  {Number} [tension=0]\n       * @returns {Number|LineChart}\n       */\n\n    }, {\n      key: \"tension\",\n      value: function tension(_tension) {\n        logger.warnOnce('dc.lineChart.tension has been deprecated since version 3.0 use dc.lineChart.curve instead');\n\n        if (!arguments.length) {\n          return this._tension;\n        }\n\n        this._tension = _tension;\n        return this;\n      }\n      /**\n       * Gets or sets a function that will determine discontinuities in the line which should be\n       * skipped: the path will be broken into separate subpaths if some points are undefined.\n       * This function is passed to\n       * {@link https://github.com/d3/d3-shape/blob/master/README.md#line_defined line.defined}\n       *\n       * Note: crossfilter will sometimes coerce nulls to 0, so you may need to carefully write\n       * custom reduce functions to get this to work, depending on your data. See\n       * {@link https://github.com/dc-js/dc.js/issues/615#issuecomment-49089248 this GitHub comment}\n       * for more details and an example.\n       * @see {@link https://github.com/d3/d3-shape/blob/master/README.md#line_defined line.defined}\n       * @param  {Function} [defined]\n       * @returns {Function|LineChart}\n       */\n\n    }, {\n      key: \"defined\",\n      value: function defined(_defined) {\n        if (!arguments.length) {\n          return this._defined;\n        }\n\n        this._defined = _defined;\n        return this;\n      }\n      /**\n       * Set the line's d3 dashstyle. This value becomes the 'stroke-dasharray' of line. Defaults to empty\n       * array (solid line).\n       * @see {@link https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray stroke-dasharray}\n       * @example\n       * // create a Dash Dot Dot Dot\n       * chart.dashStyle([3,1,1,1]);\n       * @param  {Array<Number>} [dashStyle=[]]\n       * @returns {Array<Number>|LineChart}\n       */\n\n    }, {\n      key: \"dashStyle\",\n      value: function dashStyle(_dashStyle) {\n        if (!arguments.length) {\n          return this._dashStyle;\n        }\n\n        this._dashStyle = _dashStyle;\n        return this;\n      }\n      /**\n       * Get or set render area flag. If the flag is set to true then the chart will render the area\n       * beneath each line and the line chart effectively becomes an area chart.\n       * @param  {Boolean} [renderArea=false]\n       * @returns {Boolean|LineChart}\n       */\n\n    }, {\n      key: \"renderArea\",\n      value: function renderArea(_renderArea) {\n        if (!arguments.length) {\n          return this._renderArea;\n        }\n\n        this._renderArea = _renderArea;\n        return this;\n      }\n    }, {\n      key: \"_getColor\",\n      value: function _getColor(d, i) {\n        return this.getColor.call(d, d.values, i);\n      } // To keep it backward compatible, this covers multiple cases\n      // See https://github.com/dc-js/dc.js/issues/1376\n      // It will be removed when interpolate and tension are removed.\n\n    }, {\n      key: \"_getCurveFactory\",\n      value: function _getCurveFactory() {\n        var curve = null; // _curve takes precedence\n\n        if (this._curve) {\n          return this._curve;\n        } // Approximate the D3v3 behavior\n\n\n        if (typeof this._interpolate === 'function') {\n          curve = this._interpolate;\n        } else {\n          // If _interpolate is string\n          var mapping = {\n            'linear': d3Shape.curveLinear,\n            'linear-closed': d3Shape.curveLinearClosed,\n            'step': d3Shape.curveStep,\n            'step-before': d3Shape.curveStepBefore,\n            'step-after': d3Shape.curveStepAfter,\n            'basis': d3Shape.curveBasis,\n            'basis-open': d3Shape.curveBasisOpen,\n            'basis-closed': d3Shape.curveBasisClosed,\n            'bundle': d3Shape.curveBundle,\n            'cardinal': d3Shape.curveCardinal,\n            'cardinal-open': d3Shape.curveCardinalOpen,\n            'cardinal-closed': d3Shape.curveCardinalClosed,\n            'monotone': d3Shape.curveMonotoneX\n          };\n          curve = mapping[this._interpolate];\n        } // Default value\n\n\n        if (!curve) {\n          curve = d3Shape.curveLinear;\n        }\n\n        if (this._tension !== null) {\n          if (typeof curve.tension !== 'function') {\n            logger.warn('tension was specified but the curve/interpolate does not support it.');\n          } else {\n            curve = curve.tension(this._tension);\n          }\n        }\n\n        return curve;\n      }\n    }, {\n      key: \"_drawLine\",\n      value: function _drawLine(layersEnter, layers) {\n        var _this84 = this;\n\n        var _line = d3Shape.line().x(function (d) {\n          return _this84.x()(d.x);\n        }).y(function (d) {\n          return _this84.y()(d.y + d.y0);\n        }).curve(this._getCurveFactory());\n\n        if (this._defined) {\n          _line.defined(this._defined);\n        }\n\n        var path = layersEnter.append('path').attr('class', 'line').attr('stroke', function (d, i) {\n          return _this84._getColor(d, i);\n        });\n\n        if (this._dashStyle) {\n          path.attr('stroke-dasharray', this._dashStyle);\n        }\n\n        transition(layers.select('path.line'), this.transitionDuration(), this.transitionDelay()) //.ease('linear')\n        .attr('stroke', function (d, i) {\n          return _this84._getColor(d, i);\n        }).attr('d', function (d) {\n          return _this84._safeD(_line(d.values));\n        });\n      }\n    }, {\n      key: \"_drawArea\",\n      value: function _drawArea(layersEnter, layers) {\n        var _this85 = this;\n\n        if (this._renderArea) {\n          var _area = d3Shape.area().x(function (d) {\n            return _this85.x()(d.x);\n          }).y1(function (d) {\n            return _this85.y()(d.y + d.y0);\n          }).y0(function (d) {\n            return _this85.y()(d.y0);\n          }).curve(this._getCurveFactory());\n\n          if (this._defined) {\n            _area.defined(this._defined);\n          }\n\n          layersEnter.append('path').attr('class', 'area').attr('fill', function (d, i) {\n            return _this85._getColor(d, i);\n          }).attr('d', function (d) {\n            return _this85._safeD(_area(d.values));\n          });\n          transition(layers.select('path.area'), this.transitionDuration(), this.transitionDelay()) //.ease('linear')\n          .attr('fill', function (d, i) {\n            return _this85._getColor(d, i);\n          }).attr('d', function (d) {\n            return _this85._safeD(_area(d.values));\n          });\n        }\n      }\n    }, {\n      key: \"_safeD\",\n      value: function _safeD(d) {\n        return !d || d.indexOf('NaN') >= 0 ? 'M0,0' : d;\n      }\n    }, {\n      key: \"_drawDots\",\n      value: function _drawDots(chartBody, layers) {\n        var _this86 = this;\n\n        if (this.xyTipsOn() === 'always' || !(this.brushOn() || this.parentBrushOn()) && this.xyTipsOn()) {\n          var tooltipListClass = \"\".concat(TOOLTIP_G_CLASS, \"-list\");\n          var tooltips = chartBody.select(\"g.\".concat(tooltipListClass));\n\n          if (tooltips.empty()) {\n            tooltips = chartBody.append('g').attr('class', tooltipListClass);\n          }\n\n          layers.each(function (data, layerIndex) {\n            var points = data.values;\n\n            if (_this86._defined) {\n              points = points.filter(_this86._defined);\n            }\n\n            var g = tooltips.select(\"g.\".concat(TOOLTIP_G_CLASS, \"._\").concat(layerIndex));\n\n            if (g.empty()) {\n              g = tooltips.append('g').attr('class', \"\".concat(TOOLTIP_G_CLASS, \" _\").concat(layerIndex));\n            }\n\n            _this86._createRefLines(g);\n\n            var dots = g.selectAll(\"circle.\".concat(DOT_CIRCLE_CLASS)).data(points, pluck('x'));\n            var chart = _this86;\n            var dotsEnterModify = dots.enter().append('circle').attr('class', DOT_CIRCLE_CLASS).classed('dc-tabbable', _this86._keyboardAccessible).attr('cx', function (d) {\n              return utils.safeNumber(_this86.x()(d.x));\n            }).attr('cy', function (d) {\n              return utils.safeNumber(_this86.y()(d.y + d.y0));\n            }).attr('r', _this86._getDotRadius()).style('fill-opacity', _this86._dataPointFillOpacity).style('stroke-opacity', _this86._dataPointStrokeOpacity).attr('fill', _this86.getColor).attr('stroke', _this86.getColor).on('mousemove', function () {\n              var dot = d3Selection.select(this);\n\n              chart._showDot(dot);\n\n              chart._showRefLines(dot, g);\n            }).on('mouseout', function () {\n              var dot = d3Selection.select(this);\n\n              chart._hideDot(dot);\n\n              chart._hideRefLines(g);\n            }).merge(dots); // special case for on-focus for line chart and its dots\n\n            if (_this86._keyboardAccessible) {\n              _this86._svg.selectAll('.dc-tabbable').attr('tabindex', 0).on('focus', function () {\n                var dot = d3Selection.select(this);\n\n                chart._showDot(dot);\n\n                chart._showRefLines(dot, g);\n              }).on('blur', function () {\n                var dot = d3Selection.select(this);\n\n                chart._hideDot(dot);\n\n                chart._hideRefLines(g);\n              });\n            }\n\n            dotsEnterModify.call(function (dot) {\n              return _this86._doRenderTitle(dot, data);\n            });\n            transition(dotsEnterModify, _this86.transitionDuration()).attr('cx', function (d) {\n              return utils.safeNumber(_this86.x()(d.x));\n            }).attr('cy', function (d) {\n              return utils.safeNumber(_this86.y()(d.y + d.y0));\n            }).attr('fill', _this86.getColor);\n            dots.exit().remove();\n          });\n        }\n      }\n    }, {\n      key: \"_drawLabels\",\n      value: function _drawLabels(layers) {\n        var chart = this;\n        layers.each(function (data, layerIndex) {\n          var layer = d3Selection.select(this);\n          var labels = layer.selectAll('text.lineLabel').data(data.values, pluck('x'));\n          var labelsEnterModify = labels.enter().append('text').attr('class', 'lineLabel').attr('text-anchor', 'middle').merge(labels);\n          transition(labelsEnterModify, chart.transitionDuration()).attr('x', function (d) {\n            return utils.safeNumber(chart.x()(d.x));\n          }).attr('y', function (d) {\n            var y = chart.y()(d.y + d.y0) - LABEL_PADDING$1;\n            return utils.safeNumber(y);\n          }).text(function (d) {\n            return chart.label()(d);\n          });\n          transition(labels.exit(), chart.transitionDuration()).attr('height', 0).remove();\n        });\n      }\n    }, {\n      key: \"_createRefLines\",\n      value: function _createRefLines(g) {\n        var yRefLine = g.select(\"path.\".concat(Y_AXIS_REF_LINE_CLASS)).empty() ? g.append('path').attr('class', Y_AXIS_REF_LINE_CLASS) : g.select(\"path.\".concat(Y_AXIS_REF_LINE_CLASS));\n        yRefLine.style('display', 'none').attr('stroke-dasharray', '5,5');\n        var xRefLine = g.select(\"path.\".concat(X_AXIS_REF_LINE_CLASS)).empty() ? g.append('path').attr('class', X_AXIS_REF_LINE_CLASS) : g.select(\"path.\".concat(X_AXIS_REF_LINE_CLASS));\n        xRefLine.style('display', 'none').attr('stroke-dasharray', '5,5');\n      }\n    }, {\n      key: \"_showDot\",\n      value: function _showDot(dot) {\n        dot.style('fill-opacity', 0.8);\n        dot.style('stroke-opacity', 0.8);\n        dot.attr('r', this._dotRadius);\n        return dot;\n      }\n    }, {\n      key: \"_showRefLines\",\n      value: function _showRefLines(dot, g) {\n        var x = dot.attr('cx');\n        var y = dot.attr('cy');\n        var yAxisX = this._yAxisX() - this.margins().left;\n        var yAxisRefPathD = \"M\".concat(yAxisX, \" \").concat(y, \"L\").concat(x, \" \").concat(y);\n        var xAxisRefPathD = \"M\".concat(x, \" \").concat(this.yAxisHeight(), \"L\").concat(x, \" \").concat(y);\n        g.select(\"path.\".concat(Y_AXIS_REF_LINE_CLASS)).style('display', '').attr('d', yAxisRefPathD);\n        g.select(\"path.\".concat(X_AXIS_REF_LINE_CLASS)).style('display', '').attr('d', xAxisRefPathD);\n      }\n    }, {\n      key: \"_getDotRadius\",\n      value: function _getDotRadius() {\n        return this._dataPointRadius || this._dotRadius;\n      }\n    }, {\n      key: \"_hideDot\",\n      value: function _hideDot(dot) {\n        dot.style('fill-opacity', this._dataPointFillOpacity).style('stroke-opacity', this._dataPointStrokeOpacity).attr('r', this._getDotRadius());\n      }\n    }, {\n      key: \"_hideRefLines\",\n      value: function _hideRefLines(g) {\n        g.select(\"path.\".concat(Y_AXIS_REF_LINE_CLASS)).style('display', 'none');\n        g.select(\"path.\".concat(X_AXIS_REF_LINE_CLASS)).style('display', 'none');\n      }\n    }, {\n      key: \"_doRenderTitle\",\n      value: function _doRenderTitle(dot, d) {\n        if (this.renderTitle()) {\n          dot.select('title').remove();\n          dot.append('title').text(pluck('data', this.title(d.name)));\n        }\n      }\n      /**\n       * Turn on/off the mouseover behavior of an individual data point which renders a circle and x/y axis\n       * dashed lines back to each respective axis.  This is ignored if the chart\n       * {@link CoordinateGridMixin#brushOn brush} is on\n       * @param  {Boolean} [xyTipsOn=false]\n       * @returns {Boolean|LineChart}\n       */\n\n    }, {\n      key: \"xyTipsOn\",\n      value: function xyTipsOn(_xyTipsOn) {\n        if (!arguments.length) {\n          return this._xyTipsOn;\n        }\n\n        this._xyTipsOn = _xyTipsOn;\n        return this;\n      }\n      /**\n       * Get or set the radius (in px) for dots displayed on the data points.\n       * @param  {Number} [dotRadius=5]\n       * @returns {Number|LineChart}\n       */\n\n    }, {\n      key: \"dotRadius\",\n      value: function dotRadius(_dotRadius) {\n        if (!arguments.length) {\n          return this._dotRadius;\n        }\n\n        this._dotRadius = _dotRadius;\n        return this;\n      }\n      /**\n       * Always show individual dots for each datapoint.\n       *\n       * If `options` is falsy, it disables data point rendering. If no `options` are provided, the\n       * current `options` values are instead returned.\n       * @example\n       * chart.renderDataPoints({radius: 2, fillOpacity: 0.8, strokeOpacity: 0.0})\n       * @param  {{fillOpacity: Number, strokeOpacity: Number, radius: Number}} [options={fillOpacity: 0.8, strokeOpacity: 0.0, radius: 2}]\n       * @returns {{fillOpacity: Number, strokeOpacity: Number, radius: Number}|LineChart}\n       */\n\n    }, {\n      key: \"renderDataPoints\",\n      value: function renderDataPoints(options) {\n        if (!arguments.length) {\n          return {\n            fillOpacity: this._dataPointFillOpacity,\n            strokeOpacity: this._dataPointStrokeOpacity,\n            radius: this._dataPointRadius\n          };\n        } else if (!options) {\n          this._dataPointFillOpacity = DEFAULT_DOT_OPACITY;\n          this._dataPointStrokeOpacity = DEFAULT_DOT_OPACITY;\n          this._dataPointRadius = null;\n        } else {\n          this._dataPointFillOpacity = options.fillOpacity || 0.8;\n          this._dataPointStrokeOpacity = options.strokeOpacity || 0.0;\n          this._dataPointRadius = options.radius || 2;\n        }\n\n        return this;\n      }\n    }, {\n      key: \"_colorFilter\",\n      value: function _colorFilter(color, dashstyle, inv) {\n        return function () {\n          var item = d3Selection.select(this);\n          var match = item.attr('stroke') === color && item.attr('stroke-dasharray') === (dashstyle instanceof Array ? dashstyle.join(',') : null) || item.attr('fill') === color;\n          return inv ? !match : match;\n        };\n      }\n    }, {\n      key: \"legendHighlight\",\n      value: function legendHighlight(d) {\n        if (!this.isLegendableHidden(d)) {\n          this.g().selectAll('path.line, path.area').classed('highlight', this._colorFilter(d.color, d.dashstyle)).classed('fadeout', this._colorFilter(d.color, d.dashstyle, true));\n        }\n      }\n    }, {\n      key: \"legendReset\",\n      value: function legendReset() {\n        this.g().selectAll('path.line, path.area').classed('highlight', false).classed('fadeout', false);\n      }\n    }, {\n      key: \"legendables\",\n      value: function legendables() {\n        var _this87 = this;\n\n        var legendables = _get(_getPrototypeOf(LineChart.prototype), \"legendables\", this).call(this);\n\n        if (!this._dashStyle) {\n          return legendables;\n        }\n\n        return legendables.map(function (l) {\n          l.dashstyle = _this87._dashStyle;\n          return l;\n        });\n      }\n    }]);\n\n    return LineChart;\n  }(StackMixin);\n\n  var lineChart = function lineChart(parent, chartGroup) {\n    return new LineChart(parent, chartGroup);\n  };\n\n  var SPAN_CLASS = 'number-display';\n  /**\n   * A display of a single numeric value.\n   *\n   * Unlike other charts, you do not need to set a dimension. Instead a group object must be provided and\n   * a valueAccessor that returns a single value.\n   *\n   * If the group is a {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#crossfilter_groupAll groupAll}\n   * then its `.value()` will be displayed. This is the recommended usage.\n   *\n   * However, if it is given an ordinary group, the `numberDisplay` will show the last bin's value, after\n   * sorting with the {@link https://dc-js.github.io/dc.js/docs/html/dc.baseMixin.html#ordering__anchor ordering}\n   * function. `numberDisplay` defaults the `ordering` function to sorting by value, so this will display\n   * the largest value if the values are numeric.\n   * @mixes BaseMixin\n   */\n\n  var NumberDisplay = /*#__PURE__*/function (_BaseMixin6) {\n    _inherits(NumberDisplay, _BaseMixin6);\n\n    var _super21 = _createSuper(NumberDisplay);\n\n    /**\n     * Create a Number Display widget.\n     *\n     * @example\n     * // create a number display under #chart-container1 element using the default global chart group\n     * var display1 = new NumberDisplay('#chart-container1');\n     * @param {String|node|d3.selection} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector} specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function NumberDisplay(parent, chartGroup) {\n      var _this88;\n\n      _classCallCheck(this, NumberDisplay);\n\n      _this88 = _super21.call(this);\n      _this88._formatNumber = d3Format.format('.2s');\n      _this88._html = {\n        one: '',\n        some: '',\n        none: ''\n      };\n      _this88._lastValue = undefined;\n      _this88._ariaLiveRegion = false; // dimension not required\n\n      _this88._mandatoryAttributes(['group']); // default to ordering by value, to emulate old group.top(1) behavior when multiple groups\n\n\n      _this88.ordering(function (kv) {\n        return kv.value;\n      });\n\n      _this88.data(function (group) {\n        var valObj = group.value ? group.value() : _this88._maxBin(group.all());\n        return _this88.valueAccessor()(valObj);\n      });\n\n      _this88.transitionDuration(250); // good default\n\n\n      _this88.transitionDelay(0);\n\n      _this88.anchor(parent, chartGroup);\n\n      return _this88;\n    }\n    /**\n     * Gets or sets an optional object specifying HTML templates to use depending on the number\n     * displayed.  The text `%number` will be replaced with the current value.\n     * - one: HTML template to use if the number is 1\n     * - zero: HTML template to use if the number is 0\n     * - some: HTML template to use otherwise\n     * @example\n     * numberWidget.html({\n     *      one:'%number record',\n     *      some:'%number records',\n     *      none:'no records'})\n     * @param {{one:String, some:String, none:String}} [html={one: '', some: '', none: ''}]\n     * @returns {{one:String, some:String, none:String}|NumberDisplay}\n     */\n\n\n    _createClass(NumberDisplay, [{\n      key: \"html\",\n      value: function html(_html2) {\n        if (!arguments.length) {\n          return this._html;\n        }\n\n        if (_html2.none) {\n          this._html.none = _html2.none; //if none available\n        } else if (_html2.one) {\n          this._html.none = _html2.one; //if none not available use one\n        } else if (_html2.some) {\n          this._html.none = _html2.some; //if none and one not available use some\n        }\n\n        if (_html2.one) {\n          this._html.one = _html2.one; //if one available\n        } else if (_html2.some) {\n          this._html.one = _html2.some; //if one not available use some\n        }\n\n        if (_html2.some) {\n          this._html.some = _html2.some; //if some available\n        } else if (_html2.one) {\n          this._html.some = _html2.one; //if some not available use one\n        }\n\n        return this;\n      }\n      /**\n       * Calculate and return the underlying value of the display.\n       * @returns {Number}\n       */\n\n    }, {\n      key: \"value\",\n      value: function value() {\n        return this.data();\n      }\n    }, {\n      key: \"_maxBin\",\n      value: function _maxBin(all) {\n        if (!all.length) {\n          return null;\n        }\n\n        var sorted = this._computeOrderedGroups(all);\n\n        return sorted[sorted.length - 1];\n      }\n    }, {\n      key: \"_doRender\",\n      value: function _doRender() {\n        var newValue = this.value();\n        var span = this.selectAll(\".\".concat(SPAN_CLASS));\n\n        if (span.empty()) {\n          span = span.data([0]).enter().append('span').attr('class', SPAN_CLASS).classed('dc-tabbable', this._keyboardAccessible).merge(span);\n\n          if (this._keyboardAccessible) {\n            span.attr('tabindex', '0');\n          }\n\n          if (this._ariaLiveRegion) {\n            this.transitionDuration(0);\n            span.attr('aria-live', 'polite');\n          }\n        }\n\n        {\n          var chart = this;\n          span.transition().duration(chart.transitionDuration()).delay(chart.transitionDelay()).ease(d3Ease.easeQuad).tween('text', function () {\n            // [XA] don't try and interpolate from Infinity, else this breaks.\n            var interpStart = isFinite(chart._lastValue) ? chart._lastValue : 0;\n            var interp = d3Interpolate.interpolateNumber(interpStart || 0, newValue);\n            chart._lastValue = newValue; // need to save it in D3v4\n\n            var node = this;\n            return function (t) {\n              var html = null;\n              var num = chart.formatNumber()(interp(t));\n\n              if (newValue === 0 && chart._html.none !== '') {\n                html = chart._html.none;\n              } else if (newValue === 1 && chart._html.one !== '') {\n                html = chart._html.one;\n              } else if (chart._html.some !== '') {\n                html = chart._html.some;\n              }\n\n              node.innerHTML = html ? html.replace('%number', num) : num;\n            };\n          });\n        }\n      }\n    }, {\n      key: \"_doRedraw\",\n      value: function _doRedraw() {\n        return this._doRender();\n      }\n      /**\n       * Get or set a function to format the value for the display.\n       * @see {@link https://github.com/d3/d3-format/blob/master/README.md#format d3.format}\n       * @param {Function} [formatter=d3.format('.2s')]\n       * @returns {Function|NumberDisplay}\n       */\n\n    }, {\n      key: \"formatNumber\",\n      value: function formatNumber(formatter) {\n        if (!arguments.length) {\n          return this._formatNumber;\n        }\n\n        this._formatNumber = formatter;\n        return this;\n      }\n      /**\n       * If set, the Number Display widget will have its aria-live attribute set to 'polite' which will\n       * notify screen readers when the widget changes its value. Note that setting this method will also\n       * disable the default transition between the old and the new values. This is to avoid change\n       * notifications spoken out before the new value finishes re-drawing. It is also advisable to check\n       * if the widget has appropriately set accessibility description or label. \n       * @param {Boolean} [ariaLiveRegion=false]\n       * @returns {Boolean|NumberDisplay}\n       */\n\n    }, {\n      key: \"ariaLiveRegion\",\n      value: function ariaLiveRegion(_ariaLiveRegion) {\n        if (!arguments.length) {\n          return this._ariaLiveRegion;\n        }\n\n        this._ariaLiveRegion = _ariaLiveRegion;\n        return this;\n      }\n    }]);\n\n    return NumberDisplay;\n  }(BaseMixin);\n\n  var numberDisplay = function numberDisplay(parent, chartGroup) {\n    return new NumberDisplay(parent, chartGroup);\n  };\n\n  var DEFAULT_MIN_ANGLE_FOR_LABEL = 0.5;\n  /**\n   * The pie chart implementation is usually used to visualize a small categorical distribution.  The pie\n   * chart uses keyAccessor to determine the slices, and valueAccessor to calculate the size of each\n   * slice relative to the sum of all values. Slices are ordered by {@link BaseMixin#ordering ordering}\n   * which defaults to sorting by key.\n   *\n   * Examples:\n   * - {@link http://dc-js.github.com/dc.js/ Nasdaq 100 Index}\n   * @mixes CapMixin\n   * @mixes ColorMixin\n   * @mixes BaseMixin\n   */\n\n  var PieChart = /*#__PURE__*/function (_CapMixin) {\n    _inherits(PieChart, _CapMixin);\n\n    var _super22 = _createSuper(PieChart);\n\n    /**\n     * Create a Pie Chart\n     *\n     * @example\n     * // create a pie chart under #chart-container1 element using the default global chart group\n     * var chart1 = new PieChart('#chart-container1');\n     * // create a pie chart under #chart-container2 element using chart group A\n     * var chart2 = new PieChart('#chart-container2', 'chartGroupA');\n     * @param {String|node|d3.selection} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector} specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function PieChart(parent, chartGroup) {\n      var _this89;\n\n      _classCallCheck(this, PieChart);\n\n      _this89 = _super22.call(this);\n      _this89._sliceCssClass = 'pie-slice';\n      _this89._labelCssClass = 'pie-label';\n      _this89._sliceGroupCssClass = 'pie-slice-group';\n      _this89._labelGroupCssClass = 'pie-label-group';\n      _this89._emptyCssClass = 'empty-chart';\n      _this89._emptyTitle = 'empty';\n      _this89._radius = undefined;\n      _this89._givenRadius = undefined; // specified radius, if any\n\n      _this89._innerRadius = 0;\n      _this89._externalRadiusPadding = 0;\n      _this89._g = undefined;\n      _this89._cx = undefined;\n      _this89._cy = undefined;\n      _this89._minAngleForLabel = DEFAULT_MIN_ANGLE_FOR_LABEL;\n      _this89._externalLabelRadius = undefined;\n      _this89._drawPaths = false;\n\n      _this89.colorAccessor(function (d) {\n        return _this89.cappedKeyAccessor(d);\n      });\n\n      _this89.title(function (d) {\n        return \"\".concat(_this89.cappedKeyAccessor(d), \": \").concat(_this89.cappedValueAccessor(d));\n      });\n\n      _this89.label(function (d) {\n        return _this89.cappedKeyAccessor(d);\n      });\n\n      _this89.renderLabel(true);\n\n      _this89.transitionDuration(350);\n\n      _this89.transitionDelay(0);\n\n      _this89.anchor(parent, chartGroup);\n\n      return _this89;\n    }\n    /**\n     * Get or set the maximum number of slices the pie chart will generate. The top slices are determined by\n     * value from high to low. Other slices exceeding the cap will be rolled up into one single *Others* slice.\n     * @param {Number} [cap]\n     * @returns {Number|PieChart}\n     */\n\n\n    _createClass(PieChart, [{\n      key: \"slicesCap\",\n      value: function slicesCap(cap) {\n        return this.cap(cap);\n      }\n    }, {\n      key: \"_doRender\",\n      value: function _doRender() {\n        this.resetSvg();\n        this._g = this.svg().append('g').attr('transform', \"translate(\".concat(this.cx(), \",\").concat(this.cy(), \")\"));\n\n        this._g.append('g').attr('class', this._sliceGroupCssClass);\n\n        this._g.append('g').attr('class', this._labelGroupCssClass);\n\n        this._drawChart();\n\n        return this;\n      }\n    }, {\n      key: \"_drawChart\",\n      value: function _drawChart() {\n        var _this90 = this;\n\n        // set radius from chart size if none given, or if given radius is too large\n        var maxRadius = d3Array.min([this.width(), this.height()]) / 2;\n        this._radius = this._givenRadius && this._givenRadius < maxRadius ? this._givenRadius : maxRadius;\n\n        var arcs = this._buildArcs();\n\n        var pieLayout = this._pieLayout();\n\n        var pieData; // if we have data...\n\n        if (d3Array.sum(this.data(), function (d) {\n          return _this90.cappedValueAccessor(d);\n        })) {\n          pieData = pieLayout(this.data());\n\n          this._g.classed(this._emptyCssClass, false);\n        } else {\n          // otherwise we'd be getting NaNs, so override\n          // note: abuse others for its ignoring the value accessor\n          pieData = pieLayout([{\n            key: this._emptyTitle,\n            value: 1,\n            others: [this._emptyTitle]\n          }]);\n\n          this._g.classed(this._emptyCssClass, true);\n        }\n\n        if (this._g) {\n          var slices = this._g.select(\"g.\".concat(this._sliceGroupCssClass)).selectAll(\"g.\".concat(this._sliceCssClass)).data(pieData);\n\n          var labels = this._g.select(\"g.\".concat(this._labelGroupCssClass)).selectAll(\"text.\".concat(this._labelCssClass)).data(pieData);\n\n          this._removeElements(slices, labels);\n\n          this._createElements(slices, labels, arcs, pieData);\n\n          this._updateElements(pieData, arcs);\n\n          this._highlightFilter();\n\n          transition(this._g, this.transitionDuration(), this.transitionDelay()).attr('transform', \"translate(\".concat(this.cx(), \",\").concat(this.cy(), \")\"));\n        }\n      }\n    }, {\n      key: \"_createElements\",\n      value: function _createElements(slices, labels, arcs, pieData) {\n        var slicesEnter = this._createSliceNodes(slices);\n\n        this._createSlicePath(slicesEnter, arcs);\n\n        this._createTitles(slicesEnter);\n\n        this._createLabels(labels, pieData, arcs);\n      }\n    }, {\n      key: \"_createSliceNodes\",\n      value: function _createSliceNodes(slices) {\n        var _this91 = this;\n\n        return slices.enter().append('g').attr('class', function (d, i) {\n          return \"\".concat(_this91._sliceCssClass, \" _\").concat(i);\n        }).classed('dc-tabbable', this._keyboardAccessible);\n      }\n    }, {\n      key: \"_createSlicePath\",\n      value: function _createSlicePath(slicesEnter, arcs) {\n        var _this92 = this;\n\n        var slicePath = slicesEnter.append('path').attr('fill', function (d, i) {\n          return _this92._fill(d, i);\n        }).on('click', d3compat.eventHandler(function (d) {\n          return _this92._onClick(d);\n        })).attr('d', function (d, i) {\n          return _this92._safeArc(d, i, arcs);\n        });\n\n        if (this._keyboardAccessible) {\n          this._makeKeyboardAccessible(this._onClick);\n        }\n\n        var tranNodes = transition(slicePath, this.transitionDuration(), this.transitionDelay());\n\n        if (tranNodes.attrTween) {\n          var chart = this;\n          tranNodes.attrTween('d', function (d) {\n            return chart._tweenPie(d, this);\n          });\n        }\n      }\n    }, {\n      key: \"_createTitles\",\n      value: function _createTitles(slicesEnter) {\n        var _this93 = this;\n\n        if (this.renderTitle()) {\n          slicesEnter.append('title').text(function (d) {\n            return _this93.title()(d.data);\n          });\n        }\n      }\n    }, {\n      key: \"_applyLabelText\",\n      value: function _applyLabelText(labels) {\n        var _this94 = this;\n\n        labels.text(function (d) {\n          var data = d.data;\n\n          if ((_this94._sliceHasNoData(data) || _this94._sliceTooSmall(d)) && !_this94._isSelectedSlice(d)) {\n            return '';\n          }\n\n          return _this94.label()(d.data);\n        });\n      }\n    }, {\n      key: \"_positionLabels\",\n      value: function _positionLabels(labels, arcs) {\n        var _this95 = this;\n\n        this._applyLabelText(labels);\n\n        transition(labels, this.transitionDuration(), this.transitionDelay()).attr('transform', function (d) {\n          return _this95._labelPosition(d, arcs);\n        }).attr('text-anchor', 'middle');\n      }\n    }, {\n      key: \"_highlightSlice\",\n      value: function _highlightSlice(i, whether) {\n        this.select(\"g.pie-slice._\".concat(i)).classed('highlight', whether);\n      }\n    }, {\n      key: \"_createLabels\",\n      value: function _createLabels(labels, pieData, arcs) {\n        var _this96 = this;\n\n        if (this.renderLabel()) {\n          var labelsEnter = labels.enter().append('text').attr('class', function (d, i) {\n            var classes = \"\".concat(_this96._sliceCssClass, \" \").concat(_this96._labelCssClass, \" _\").concat(i);\n\n            if (_this96._externalLabelRadius) {\n              classes += ' external';\n            }\n\n            return classes;\n          }).on('click', d3compat.eventHandler(function (d) {\n            return _this96._onClick(d);\n          })).on('mouseover', d3compat.eventHandler(function (d) {\n            _this96._highlightSlice(d.index, true);\n          })).on('mouseout', d3compat.eventHandler(function (d) {\n            _this96._highlightSlice(d.index, false);\n          }));\n\n          this._positionLabels(labelsEnter, arcs);\n\n          if (this._externalLabelRadius && this._drawPaths) {\n            this._updateLabelPaths(pieData, arcs);\n          }\n        }\n      }\n    }, {\n      key: \"_updateLabelPaths\",\n      value: function _updateLabelPaths(pieData, arcs) {\n        var _this97 = this;\n\n        var polyline = this._g.selectAll(\"polyline.\".concat(this._sliceCssClass)).data(pieData);\n\n        polyline.exit().remove();\n        polyline = polyline.enter().append('polyline').attr('class', function (d, i) {\n          return \"pie-path _\".concat(i, \" \").concat(_this97._sliceCssClass);\n        }).on('click', d3compat.eventHandler(function (d) {\n          return _this97._onClick(d);\n        })).on('mouseover', d3compat.eventHandler(function (d) {\n          _this97._highlightSlice(d.index, true);\n        })).on('mouseout', d3compat.eventHandler(function (d) {\n          _this97._highlightSlice(d.index, false);\n        })).merge(polyline);\n        var arc2 = d3Shape.arc().outerRadius(this._radius - this._externalRadiusPadding + this._externalLabelRadius).innerRadius(this._radius - this._externalRadiusPadding);\n        var tranNodes = transition(polyline, this.transitionDuration(), this.transitionDelay()); // this is one rare case where d3.selection differs from d3.transition\n\n        if (tranNodes.attrTween) {\n          tranNodes.attrTween('points', function (d) {\n            var current = this._current || d;\n            current = {\n              startAngle: current.startAngle,\n              endAngle: current.endAngle\n            };\n\n            var _interpolate = d3Interpolate.interpolate(current, d);\n\n            this._current = _interpolate(0);\n            return function (t) {\n              var d2 = _interpolate(t);\n\n              return [arcs.centroid(d2), arc2.centroid(d2)];\n            };\n          });\n        } else {\n          tranNodes.attr('points', function (d) {\n            return [arcs.centroid(d), arc2.centroid(d)];\n          });\n        }\n\n        tranNodes.style('visibility', function (d) {\n          return d.endAngle - d.startAngle < 0.0001 ? 'hidden' : 'visible';\n        });\n      }\n    }, {\n      key: \"_updateElements\",\n      value: function _updateElements(pieData, arcs) {\n        this._updateSlicePaths(pieData, arcs);\n\n        this._updateLabels(pieData, arcs);\n\n        this._updateTitles(pieData);\n      }\n    }, {\n      key: \"_updateSlicePaths\",\n      value: function _updateSlicePaths(pieData, arcs) {\n        var _this98 = this;\n\n        var slicePaths = this._g.selectAll(\"g.\".concat(this._sliceCssClass)).data(pieData).select('path').attr('d', function (d, i) {\n          return _this98._safeArc(d, i, arcs);\n        });\n\n        var tranNodes = transition(slicePaths, this.transitionDuration(), this.transitionDelay());\n\n        if (tranNodes.attrTween) {\n          var chart = this;\n          tranNodes.attrTween('d', function (d) {\n            return chart._tweenPie(d, this);\n          });\n        }\n\n        tranNodes.attr('fill', function (d, i) {\n          return _this98._fill(d, i);\n        });\n      }\n    }, {\n      key: \"_updateLabels\",\n      value: function _updateLabels(pieData, arcs) {\n        if (this.renderLabel()) {\n          var labels = this._g.selectAll(\"text.\".concat(this._labelCssClass)).data(pieData);\n\n          this._positionLabels(labels, arcs);\n\n          if (this._externalLabelRadius && this._drawPaths) {\n            this._updateLabelPaths(pieData, arcs);\n          }\n        }\n      }\n    }, {\n      key: \"_updateTitles\",\n      value: function _updateTitles(pieData) {\n        var _this99 = this;\n\n        if (this.renderTitle()) {\n          this._g.selectAll(\"g.\".concat(this._sliceCssClass)).data(pieData).select('title').text(function (d) {\n            return _this99.title()(d.data);\n          });\n        }\n      }\n    }, {\n      key: \"_removeElements\",\n      value: function _removeElements(slices, labels) {\n        slices.exit().remove();\n        labels.exit().remove();\n      }\n    }, {\n      key: \"_highlightFilter\",\n      value: function _highlightFilter() {\n        var chart = this;\n\n        if (this.hasFilter()) {\n          this.selectAll(\"g.\".concat(this._sliceCssClass)).each(function (d) {\n            if (chart._isSelectedSlice(d)) {\n              chart.highlightSelected(this);\n            } else {\n              chart.fadeDeselected(this);\n            }\n          });\n        } else {\n          this.selectAll(\"g.\".concat(this._sliceCssClass)).each(function () {\n            chart.resetHighlight(this);\n          });\n        }\n      }\n      /**\n       * Get or set the external radius padding of the pie chart. This will force the radius of the\n       * pie chart to become smaller or larger depending on the value.\n       * @param {Number} [externalRadiusPadding=0]\n       * @returns {Number|PieChart}\n       */\n\n    }, {\n      key: \"externalRadiusPadding\",\n      value: function externalRadiusPadding(_externalRadiusPadding) {\n        if (!arguments.length) {\n          return this._externalRadiusPadding;\n        }\n\n        this._externalRadiusPadding = _externalRadiusPadding;\n        return this;\n      }\n      /**\n       * Get or set the inner radius of the pie chart. If the inner radius is greater than 0px then the\n       * pie chart will be rendered as a doughnut chart.\n       * @param {Number} [innerRadius=0]\n       * @returns {Number|PieChart}\n       */\n\n    }, {\n      key: \"innerRadius\",\n      value: function innerRadius(_innerRadius) {\n        if (!arguments.length) {\n          return this._innerRadius;\n        }\n\n        this._innerRadius = _innerRadius;\n        return this;\n      }\n      /**\n       * Get or set the outer radius. If the radius is not set, it will be half of the minimum of the\n       * chart width and height.\n       * @param {Number} [radius]\n       * @returns {Number|PieChart}\n       */\n\n    }, {\n      key: \"radius\",\n      value: function radius(_radius) {\n        if (!arguments.length) {\n          return this._givenRadius;\n        }\n\n        this._givenRadius = _radius;\n        return this;\n      }\n      /**\n       * Get or set center x coordinate position. Default is center of svg.\n       * @param {Number} [cx]\n       * @returns {Number|PieChart}\n       */\n\n    }, {\n      key: \"cx\",\n      value: function cx(_cx) {\n        if (!arguments.length) {\n          return this._cx || this.width() / 2;\n        }\n\n        this._cx = _cx;\n        return this;\n      }\n      /**\n       * Get or set center y coordinate position. Default is center of svg.\n       * @param {Number} [cy]\n       * @returns {Number|PieChart}\n       */\n\n    }, {\n      key: \"cy\",\n      value: function cy(_cy) {\n        if (!arguments.length) {\n          return this._cy || this.height() / 2;\n        }\n\n        this._cy = _cy;\n        return this;\n      }\n    }, {\n      key: \"_buildArcs\",\n      value: function _buildArcs() {\n        return d3Shape.arc().outerRadius(this._radius - this._externalRadiusPadding).innerRadius(this._innerRadius);\n      }\n    }, {\n      key: \"_isSelectedSlice\",\n      value: function _isSelectedSlice(d) {\n        return this.hasFilter(this.cappedKeyAccessor(d.data));\n      }\n    }, {\n      key: \"_doRedraw\",\n      value: function _doRedraw() {\n        this._drawChart();\n\n        return this;\n      }\n      /**\n       * Get or set the minimal slice angle for label rendering. Any slice with a smaller angle will not\n       * display a slice label.\n       * @param {Number} [minAngleForLabel=0.5]\n       * @returns {Number|PieChart}\n       */\n\n    }, {\n      key: \"minAngleForLabel\",\n      value: function minAngleForLabel(_minAngleForLabel) {\n        if (!arguments.length) {\n          return this._minAngleForLabel;\n        }\n\n        this._minAngleForLabel = _minAngleForLabel;\n        return this;\n      }\n    }, {\n      key: \"_pieLayout\",\n      value: function _pieLayout() {\n        var _this100 = this;\n\n        return d3Shape.pie().sort(null).value(function (d) {\n          return _this100.cappedValueAccessor(d);\n        });\n      }\n    }, {\n      key: \"_sliceTooSmall\",\n      value: function _sliceTooSmall(d) {\n        var angle = d.endAngle - d.startAngle;\n        return isNaN(angle) || angle < this._minAngleForLabel;\n      }\n    }, {\n      key: \"_sliceHasNoData\",\n      value: function _sliceHasNoData(d) {\n        return this.cappedValueAccessor(d) === 0;\n      }\n    }, {\n      key: \"_isOffCanvas\",\n      value: function _isOffCanvas(current) {\n        return !current || isNaN(current.startAngle) || isNaN(current.endAngle);\n      }\n    }, {\n      key: \"_fill\",\n      value: function _fill(d, i) {\n        return this.getColor(d.data, i);\n      }\n    }, {\n      key: \"_onClick\",\n      value: function _onClick(d) {\n        if (this._g.attr('class') !== this._emptyCssClass) {\n          this.onClick(d.data);\n        }\n      }\n    }, {\n      key: \"_safeArc\",\n      value: function _safeArc(d, i, _arc) {\n        var path = _arc(d, i);\n\n        if (path.indexOf('NaN') >= 0) {\n          path = 'M0,0';\n        }\n\n        return path;\n      }\n      /**\n       * Title to use for the only slice when there is no data.\n       * @param {String} [title]\n       * @returns {String|PieChart}\n       */\n\n    }, {\n      key: \"emptyTitle\",\n      value: function emptyTitle(title) {\n        if (arguments.length === 0) {\n          return this._emptyTitle;\n        }\n\n        this._emptyTitle = title;\n        return this;\n      }\n      /**\n       * Position slice labels offset from the outer edge of the chart.\n       *\n       * The argument specifies the extra radius to be added for slice labels.\n       * @param {Number} [externalLabelRadius]\n       * @returns {Number|PieChart}\n       */\n\n    }, {\n      key: \"externalLabels\",\n      value: function externalLabels(externalLabelRadius) {\n        if (arguments.length === 0) {\n          return this._externalLabelRadius;\n        } else if (externalLabelRadius) {\n          this._externalLabelRadius = externalLabelRadius;\n        } else {\n          this._externalLabelRadius = undefined;\n        }\n\n        return this;\n      }\n      /**\n       * Get or set whether to draw lines from pie slices to their labels.\n       *\n       * @param {Boolean} [drawPaths]\n       * @returns {Boolean|PieChart}\n       */\n\n    }, {\n      key: \"drawPaths\",\n      value: function drawPaths(_drawPaths) {\n        if (arguments.length === 0) {\n          return this._drawPaths;\n        }\n\n        this._drawPaths = _drawPaths;\n        return this;\n      }\n    }, {\n      key: \"_labelPosition\",\n      value: function _labelPosition(d, _arc) {\n        var centroid;\n\n        if (this._externalLabelRadius) {\n          centroid = d3Shape.arc().outerRadius(this._radius - this._externalRadiusPadding + this._externalLabelRadius).innerRadius(this._radius - this._externalRadiusPadding + this._externalLabelRadius).centroid(d);\n        } else {\n          centroid = _arc.centroid(d);\n        }\n\n        if (isNaN(centroid[0]) || isNaN(centroid[1])) {\n          return 'translate(0,0)';\n        } else {\n          return \"translate(\".concat(centroid, \")\");\n        }\n      }\n    }, {\n      key: \"legendables\",\n      value: function legendables() {\n        var _this101 = this;\n\n        return this.data().map(function (d, i) {\n          var legendable = {\n            name: d.key,\n            data: d.value,\n            others: d.others,\n            chart: _this101\n          };\n          legendable.color = _this101.getColor(d, i);\n          return legendable;\n        });\n      }\n    }, {\n      key: \"legendHighlight\",\n      value: function legendHighlight(d) {\n        this._highlightSliceFromLegendable(d, true);\n      }\n    }, {\n      key: \"legendReset\",\n      value: function legendReset(d) {\n        this._highlightSliceFromLegendable(d, false);\n      }\n    }, {\n      key: \"legendToggle\",\n      value: function legendToggle(d) {\n        this.onClick({\n          key: d.name,\n          others: d.others\n        });\n      }\n    }, {\n      key: \"_highlightSliceFromLegendable\",\n      value: function _highlightSliceFromLegendable(legendable, highlighted) {\n        this.selectAll('g.pie-slice').each(function (d) {\n          if (legendable.name === d.data.key) {\n            d3Selection.select(this).classed('highlight', highlighted);\n          }\n        });\n      }\n    }, {\n      key: \"_tweenPie\",\n      value: function _tweenPie(b, element) {\n        var _this102 = this;\n\n        b.innerRadius = this._innerRadius;\n        var current = element._current;\n\n        if (this._isOffCanvas(current)) {\n          current = {\n            startAngle: 0,\n            endAngle: 0\n          };\n        } else {\n          // only interpolate startAngle & endAngle, not the whole data object\n          current = {\n            startAngle: current.startAngle,\n            endAngle: current.endAngle\n          };\n        }\n\n        var i = d3Interpolate.interpolate(current, b);\n        element._current = i(0);\n        return function (t) {\n          return _this102._safeArc(i(t), 0, _this102._buildArcs());\n        };\n      }\n    }]);\n\n    return PieChart;\n  }(CapMixin(ColorMixin(BaseMixin)));\n\n  var pieChart = function pieChart(parent, chartGroup) {\n    return new PieChart(parent, chartGroup);\n  };\n  /**\n   * Concrete row chart implementation.\n   *\n   * Examples:\n   * - {@link http://dc-js.github.com/dc.js/ Nasdaq 100 Index}\n   * @mixes CapMixin\n   * @mixes MarginMixin\n   * @mixes ColorMixin\n   * @mixes BaseMixin\n   */\n\n\n  var RowChart = /*#__PURE__*/function (_CapMixin2) {\n    _inherits(RowChart, _CapMixin2);\n\n    var _super23 = _createSuper(RowChart);\n\n    /**\n     * Create a Row Chart.\n     * @example\n     * // create a row chart under #chart-container1 element using the default global chart group\n     * var chart1 = new RowChart('#chart-container1');\n     * // create a row chart under #chart-container2 element using chart group A\n     * var chart2 = new RowChart('#chart-container2', 'chartGroupA');\n     * @param {String|node|d3.selection} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector} specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function RowChart(parent, chartGroup) {\n      var _this103;\n\n      _classCallCheck(this, RowChart);\n\n      _this103 = _super23.call(this);\n      _this103._g = undefined;\n      _this103._labelOffsetX = 10;\n      _this103._labelOffsetY = 15;\n      _this103._hasLabelOffsetY = false;\n      _this103._dyOffset = '0.35em'; // this helps center labels https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#svg_text\n\n      _this103._titleLabelOffsetX = 2;\n      _this103._gap = 5;\n      _this103._fixedBarHeight = false;\n      _this103._rowCssClass = 'row';\n      _this103._titleRowCssClass = 'titlerow';\n      _this103._renderTitleLabel = false;\n      _this103._x = undefined;\n      _this103._elasticX = undefined;\n      _this103._xAxis = d3Axis.axisBottom();\n      _this103._rowData = undefined;\n      _this103.rowsCap = _this103.cap;\n\n      _this103.title(function (d) {\n        return \"\".concat(_this103.cappedKeyAccessor(d), \": \").concat(_this103.cappedValueAccessor(d));\n      });\n\n      _this103.label(function (d) {\n        return _this103.cappedKeyAccessor(d);\n      });\n\n      _this103.anchor(parent, chartGroup);\n\n      return _this103;\n    }\n\n    _createClass(RowChart, [{\n      key: \"_calculateAxisScale\",\n      value: function _calculateAxisScale() {\n        var _this104 = this;\n\n        if (!this._x || this._elasticX) {\n          var _extent = d3Array.extent(this._rowData, function (d) {\n            return _this104.cappedValueAccessor(d);\n          });\n\n          if (_extent[0] > 0) {\n            _extent[0] = 0;\n          }\n\n          if (_extent[1] < 0) {\n            _extent[1] = 0;\n          }\n\n          this._x = d3Scale.scaleLinear().domain(_extent).range([0, this.effectiveWidth()]);\n        }\n\n        this._xAxis.scale(this._x);\n      }\n    }, {\n      key: \"_drawAxis\",\n      value: function _drawAxis() {\n        var axisG = this._g.select('g.axis');\n\n        this._calculateAxisScale();\n\n        if (axisG.empty()) {\n          axisG = this._g.append('g').attr('class', 'axis');\n        }\n\n        axisG.attr('transform', \"translate(0, \".concat(this.effectiveHeight(), \")\"));\n        transition(axisG, this.transitionDuration(), this.transitionDelay()).call(this._xAxis);\n      }\n    }, {\n      key: \"_doRender\",\n      value: function _doRender() {\n        this.resetSvg();\n        this._g = this.svg().append('g').attr('transform', \"translate(\".concat(this.margins().left, \",\").concat(this.margins().top, \")\"));\n\n        this._drawChart();\n\n        return this;\n      }\n      /**\n       * Gets or sets the x scale. The x scale can be any d3\n       * {@link https://github.com/d3/d3-scale/blob/master/README.md d3.scale}.\n       * @see {@link https://github.com/d3/d3-scale/blob/master/README.md d3.scale}\n       * @param {d3.scale} [scale]\n       * @returns {d3.scale|RowChart}\n       */\n\n    }, {\n      key: \"x\",\n      value: function x(scale) {\n        if (!arguments.length) {\n          return this._x;\n        }\n\n        this._x = scale;\n        return this;\n      }\n    }, {\n      key: \"_drawGridLines\",\n      value: function _drawGridLines() {\n        var _this105 = this;\n\n        this._g.selectAll('g.tick').select('line.grid-line').remove();\n\n        this._g.selectAll('g.tick').append('line').attr('class', 'grid-line').attr('x1', 0).attr('y1', 0).attr('x2', 0).attr('y2', function () {\n          return -_this105.effectiveHeight();\n        });\n      }\n    }, {\n      key: \"_drawChart\",\n      value: function _drawChart() {\n        this._rowData = this.data();\n\n        this._drawAxis();\n\n        this._drawGridLines();\n\n        var rows = this._g.selectAll(\"g.\".concat(this._rowCssClass)).data(this._rowData);\n\n        this._removeElements(rows);\n\n        rows = this._createElements(rows).merge(rows);\n\n        this._updateElements(rows);\n      }\n    }, {\n      key: \"_createElements\",\n      value: function _createElements(rows) {\n        var _this106 = this;\n\n        var rowEnter = rows.enter().append('g').attr('class', function (d, i) {\n          return \"\".concat(_this106._rowCssClass, \" _\").concat(i);\n        });\n        rowEnter.append('rect').attr('width', 0);\n\n        this._createLabels(rowEnter);\n\n        return rowEnter;\n      }\n    }, {\n      key: \"_removeElements\",\n      value: function _removeElements(rows) {\n        rows.exit().remove();\n      }\n    }, {\n      key: \"_rootValue\",\n      value: function _rootValue() {\n        var root = this._x(0);\n\n        return root === -Infinity || root !== root ? this._x(1) : root;\n      }\n    }, {\n      key: \"_updateElements\",\n      value: function _updateElements(rows) {\n        var _this107 = this;\n\n        var n = this._rowData.length;\n        var height;\n\n        if (!this._fixedBarHeight) {\n          height = (this.effectiveHeight() - (n + 1) * this._gap) / n;\n        } else {\n          height = this._fixedBarHeight;\n        } // vertically align label in center unless they override the value via property setter\n\n\n        if (!this._hasLabelOffsetY) {\n          this._labelOffsetY = height / 2;\n        }\n\n        var rect = rows.attr('transform', function (d, i) {\n          return \"translate(0,\".concat((i + 1) * _this107._gap + i * height, \")\");\n        }).select('rect').attr('height', height).attr('fill', this.getColor).on('click', d3compat.eventHandler(function (d) {\n          return _this107._onClick(d);\n        })).classed('dc-tabbable', this._keyboardAccessible).classed('deselected', function (d) {\n          return _this107.hasFilter() ? !_this107._isSelectedRow(d) : false;\n        }).classed('selected', function (d) {\n          return _this107.hasFilter() ? _this107._isSelectedRow(d) : false;\n        });\n\n        if (this._keyboardAccessible) {\n          this._makeKeyboardAccessible(function (d) {\n            return _this107._onClick(d);\n          });\n        }\n\n        transition(rect, this.transitionDuration(), this.transitionDelay()).attr('width', function (d) {\n          return Math.abs(_this107._rootValue() - _this107._x(_this107.cappedValueAccessor(d)));\n        }).attr('transform', function (d) {\n          return _this107._translateX(d);\n        });\n\n        this._createTitles(rows);\n\n        this._updateLabels(rows);\n      }\n    }, {\n      key: \"_createTitles\",\n      value: function _createTitles(rows) {\n        if (this.renderTitle()) {\n          rows.select('title').remove();\n          rows.append('title').text(this.title());\n        }\n      }\n    }, {\n      key: \"_createLabels\",\n      value: function _createLabels(rowEnter) {\n        var _this108 = this;\n\n        if (this.renderLabel()) {\n          rowEnter.append('text').on('click', d3compat.eventHandler(function (d) {\n            return _this108._onClick(d);\n          }));\n        }\n\n        if (this.renderTitleLabel()) {\n          rowEnter.append('text').attr('class', this._titleRowCssClass).on('click', d3compat.eventHandler(function (d) {\n            return _this108._onClick(d);\n          }));\n        }\n      }\n    }, {\n      key: \"_updateLabels\",\n      value: function _updateLabels(rows) {\n        var _this109 = this;\n\n        if (this.renderLabel()) {\n          var lab = rows.select('text').attr('x', this._labelOffsetX).attr('y', this._labelOffsetY).attr('dy', this._dyOffset).on('click', d3compat.eventHandler(function (d) {\n            return _this109._onClick(d);\n          })).attr('class', function (d, i) {\n            return \"\".concat(_this109._rowCssClass, \" _\").concat(i);\n          }).text(function (d) {\n            return _this109.label()(d);\n          });\n          transition(lab, this.transitionDuration(), this.transitionDelay()).attr('transform', function (d) {\n            return _this109._translateX(d);\n          });\n        }\n\n        if (this.renderTitleLabel()) {\n          var titlelab = rows.select(\".\".concat(this._titleRowCssClass)).attr('x', this.effectiveWidth() - this._titleLabelOffsetX).attr('y', this._labelOffsetY).attr('dy', this._dyOffset).attr('text-anchor', 'end').on('click', d3compat.eventHandler(function (d) {\n            return _this109._onClick(d);\n          })).attr('class', function (d, i) {\n            return \"\".concat(_this109._titleRowCssClass, \" _\").concat(i);\n          }).text(function (d) {\n            return _this109.title()(d);\n          });\n          transition(titlelab, this.transitionDuration(), this.transitionDelay()).attr('transform', function (d) {\n            return _this109._translateX(d);\n          });\n        }\n      }\n      /**\n       * Turn on/off Title label rendering (values) using SVG style of text-anchor 'end'.\n       * @param {Boolean} [renderTitleLabel=false]\n       * @returns {Boolean|RowChart}\n       */\n\n    }, {\n      key: \"renderTitleLabel\",\n      value: function renderTitleLabel(_renderTitleLabel) {\n        if (!arguments.length) {\n          return this._renderTitleLabel;\n        }\n\n        this._renderTitleLabel = _renderTitleLabel;\n        return this;\n      }\n    }, {\n      key: \"_onClick\",\n      value: function _onClick(d) {\n        this.onClick(d);\n      }\n    }, {\n      key: \"_translateX\",\n      value: function _translateX(d) {\n        var x = this._x(this.cappedValueAccessor(d)),\n            x0 = this._rootValue(),\n            s = x > x0 ? x0 : x;\n\n        return \"translate(\".concat(s, \",0)\");\n      }\n    }, {\n      key: \"_doRedraw\",\n      value: function _doRedraw() {\n        this._drawChart();\n\n        return this;\n      }\n      /**\n       * Get or sets the x axis for the row chart instance.\n       * See the {@link https://github.com/d3/d3-axis/blob/master/README.md d3.axis}\n       * documention for more information.\n       * @param {d3.axis} [xAxis]\n       * @example\n       * // customize x axis tick format\n       * chart.xAxis().tickFormat(function (v) {return v + '%';});\n       * // customize x axis tick values\n       * chart.xAxis().tickValues([0, 100, 200, 300]);\n       * // use a top-oriented axis. Note: position of the axis and grid lines will need to\n       * // be set manually, see https://dc-js.github.io/dc.js/examples/row-top-axis.html\n       * chart.xAxis(d3.axisTop())\n       * @returns {d3.axis|RowChart}\n       */\n\n    }, {\n      key: \"xAxis\",\n      value: function xAxis(_xAxis2) {\n        if (!arguments.length) {\n          return this._xAxis;\n        }\n\n        this._xAxis = _xAxis2;\n        return this;\n      }\n      /**\n       * Get or set the fixed bar height. Default is [false] which will auto-scale bars.\n       * For example, if you want to fix the height for a specific number of bars (useful in TopN charts)\n       * you could fix height as follows (where count = total number of bars in your TopN and gap is\n       * your vertical gap space).\n       * @example\n       * chart.fixedBarHeight( chartheight - (count + 1) * gap / count);\n       * @param {Boolean|Number} [fixedBarHeight=false]\n       * @returns {Boolean|Number|RowChart}\n       */\n\n    }, {\n      key: \"fixedBarHeight\",\n      value: function fixedBarHeight(_fixedBarHeight) {\n        if (!arguments.length) {\n          return this._fixedBarHeight;\n        }\n\n        this._fixedBarHeight = _fixedBarHeight;\n        return this;\n      }\n      /**\n       * Get or set the vertical gap space between rows on a particular row chart instance.\n       * @param {Number} [gap=5]\n       * @returns {Number|RowChart}\n       */\n\n    }, {\n      key: \"gap\",\n      value: function gap(_gap3) {\n        if (!arguments.length) {\n          return this._gap;\n        }\n\n        this._gap = _gap3;\n        return this;\n      }\n      /**\n       * Get or set the elasticity on x axis. If this attribute is set to true, then the x axis will rescale to auto-fit the\n       * data range when filtered.\n       * @param {Boolean} [elasticX]\n       * @returns {Boolean|RowChart}\n       */\n\n    }, {\n      key: \"elasticX\",\n      value: function elasticX(_elasticX2) {\n        if (!arguments.length) {\n          return this._elasticX;\n        }\n\n        this._elasticX = _elasticX2;\n        return this;\n      }\n      /**\n       * Get or set the x offset (horizontal space to the top left corner of a row) for labels on a particular row chart.\n       * @param {Number} [labelOffsetX=10]\n       * @returns {Number|RowChart}\n       */\n\n    }, {\n      key: \"labelOffsetX\",\n      value: function labelOffsetX(_labelOffsetX) {\n        if (!arguments.length) {\n          return this._labelOffsetX;\n        }\n\n        this._labelOffsetX = _labelOffsetX;\n        return this;\n      }\n      /**\n       * Get or set the y offset (vertical space to the top left corner of a row) for labels on a particular row chart.\n       * @param {Number} [labelOffsety=15]\n       * @returns {Number|RowChart}\n       */\n\n    }, {\n      key: \"labelOffsetY\",\n      value: function labelOffsetY(labelOffsety) {\n        if (!arguments.length) {\n          return this._labelOffsetY;\n        }\n\n        this._labelOffsetY = labelOffsety;\n        this._hasLabelOffsetY = true;\n        return this;\n      }\n      /**\n       * Get of set the x offset (horizontal space between right edge of row and right edge or text.\n       * @param {Number} [titleLabelOffsetX=2]\n       * @returns {Number|RowChart}\n       */\n\n    }, {\n      key: \"titleLabelOffsetX\",\n      value: function titleLabelOffsetX(_titleLabelOffsetX) {\n        if (!arguments.length) {\n          return this._titleLabelOffsetX;\n        }\n\n        this._titleLabelOffsetX = _titleLabelOffsetX;\n        return this;\n      }\n    }, {\n      key: \"_isSelectedRow\",\n      value: function _isSelectedRow(d) {\n        return this.hasFilter(this.cappedKeyAccessor(d));\n      }\n    }]);\n\n    return RowChart;\n  }(CapMixin(ColorMixin(MarginMixin)));\n\n  var rowChart = function rowChart(parent, chartGroup) {\n    return new RowChart(parent, chartGroup);\n  };\n  /**\n   * A scatter plot chart\n   *\n   * Examples:\n   * - {@link http://dc-js.github.io/dc.js/examples/scatter.html Scatter Chart}\n   * - {@link http://dc-js.github.io/dc.js/examples/multi-scatter.html Multi-Scatter Chart}\n   * @mixes CoordinateGridMixin\n   */\n\n\n  var ScatterPlot = /*#__PURE__*/function (_CoordinateGridMixin4) {\n    _inherits(ScatterPlot, _CoordinateGridMixin4);\n\n    var _super24 = _createSuper(ScatterPlot);\n\n    /**\n     * Create a Scatter Plot.\n     * @example\n     * // create a scatter plot under #chart-container1 element using the default global chart group\n     * var chart1 = new ScatterPlot('#chart-container1');\n     * // create a scatter plot under #chart-container2 element using chart group A\n     * var chart2 = new ScatterPlot('#chart-container2', 'chartGroupA');\n     * // create a sub-chart under a composite parent chart\n     * var chart3 = new ScatterPlot(compositeChart);\n     * @param {String|node|d3.selection} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector} specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function ScatterPlot(parent, chartGroup) {\n      var _this110;\n\n      _classCallCheck(this, ScatterPlot);\n\n      _this110 = _super24.call(this);\n      _this110._symbol = d3Shape.symbol();\n\n      _this110._existenceAccessor = function (d) {\n        return d.value;\n      };\n\n      var originalKeyAccessor = _this110.keyAccessor();\n\n      _this110.keyAccessor(function (d) {\n        return originalKeyAccessor(d)[0];\n      });\n\n      _this110.valueAccessor(function (d) {\n        return originalKeyAccessor(d)[1];\n      });\n\n      _this110.colorAccessor(function () {\n        return _this110._groupName;\n      }); // this basically just counteracts the setting of its own key/value accessors\n      // see https://github.com/dc-js/dc.js/issues/702\n\n\n      _this110.title(function (d) {\n        return \"\".concat(_this110.keyAccessor()(d), \",\").concat(_this110.valueAccessor()(d), \": \").concat(_this110.existenceAccessor()(d));\n      });\n\n      _this110._highlightedSize = 7;\n      _this110._symbolSize = 5;\n      _this110._excludedSize = 3;\n      _this110._excludedColor = null;\n      _this110._excludedOpacity = 1.0;\n      _this110._emptySize = 0;\n      _this110._emptyOpacity = 0;\n      _this110._nonemptyOpacity = 1;\n      _this110._emptyColor = null;\n      _this110._filtered = [];\n      _this110._canvas = null;\n      _this110._context = null;\n      _this110._useCanvas = false; // Use a 2 dimensional brush\n\n      _this110.brush(d3Brush.brush());\n\n      _this110._symbol.size(function (d, i) {\n        return _this110._elementSize(d, i);\n      });\n\n      _this110.anchor(parent, chartGroup);\n\n      return _this110;\n    } // Calculates element radius for canvas plot to be comparable to D3 area based symbol sizes\n\n\n    _createClass(ScatterPlot, [{\n      key: \"_canvasElementSize\",\n      value: function _canvasElementSize(d, isFiltered) {\n        if (!this._existenceAccessor(d)) {\n          return this._emptySize / Math.sqrt(Math.PI);\n        } else if (isFiltered) {\n          return this._symbolSize / Math.sqrt(Math.PI);\n        } else {\n          return this._excludedSize / Math.sqrt(Math.PI);\n        }\n      }\n    }, {\n      key: \"_elementSize\",\n      value: function _elementSize(d, i) {\n        if (!this._existenceAccessor(d)) {\n          return Math.pow(this._emptySize, 2);\n        } else if (this._filtered[i]) {\n          return Math.pow(this._symbolSize, 2);\n        } else {\n          return Math.pow(this._excludedSize, 2);\n        }\n      }\n    }, {\n      key: \"_locator\",\n      value: function _locator(d) {\n        return \"translate(\".concat(this.x()(this.keyAccessor()(d)), \",\").concat(this.y()(this.valueAccessor()(d)), \")\");\n      }\n    }, {\n      key: \"filter\",\n      value: function filter(_filter3) {\n        if (!arguments.length) {\n          return _get(_getPrototypeOf(ScatterPlot.prototype), \"filter\", this).call(this);\n        }\n\n        return _get(_getPrototypeOf(ScatterPlot.prototype), \"filter\", this).call(this, filters.RangedTwoDimensionalFilter(_filter3));\n      }\n      /**\n       * Method that replaces original resetSvg and appropriately inserts canvas\n       * element along with svg element and sets their CSS properties appropriately\n       * so they are overlapped on top of each other.\n       * Remove the chart's SVGElements from the dom and recreate the container SVGElement.\n       * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/SVGElement SVGElement}\n       * @returns {SVGElement}\n       */\n\n    }, {\n      key: \"resetSvg\",\n      value: function resetSvg() {\n        if (!this._useCanvas) {\n          return _get(_getPrototypeOf(ScatterPlot.prototype), \"resetSvg\", this).call(this);\n        } else {\n          _get(_getPrototypeOf(ScatterPlot.prototype), \"resetSvg\", this).call(this); // Perform original svgReset inherited from baseMixin\n\n\n          this.select('canvas').remove(); // remove old canvas\n\n          var svgSel = this.svg();\n          var rootSel = this.root(); // Set root node to relative positioning and svg to absolute\n\n          rootSel.style('position', 'relative');\n          svgSel.style('position', 'relative'); // Check if SVG element already has any extra top/left CSS offsets\n\n          var svgLeft = isNaN(parseInt(svgSel.style('left'), 10)) ? 0 : parseInt(svgSel.style('left'), 10);\n          var svgTop = isNaN(parseInt(svgSel.style('top'), 10)) ? 0 : parseInt(svgSel.style('top'), 10);\n          var width = this.effectiveWidth();\n          var height = this.effectiveHeight();\n          var margins = this.margins(); // {top: 10, right: 130, bottom: 42, left: 42}\n          // Add the canvas element such that it perfectly overlaps the plot area of the scatter plot SVG\n\n          var devicePixelRatio = window.devicePixelRatio || 1;\n          this._canvas = this.root().append('canvas').attr('x', 0).attr('y', 0).attr('width', width * devicePixelRatio).attr('height', height * devicePixelRatio).style('width', \"\".concat(width, \"px\")).style('height', \"\".concat(height, \"px\")).style('position', 'absolute').style('top', \"\".concat(margins.top + svgTop, \"px\")).style('left', \"\".concat(margins.left + svgLeft, \"px\")).style('z-index', -1) // Place behind SVG\n          .style('pointer-events', 'none'); // Disable pointer events on canvas so SVG can capture brushing\n          // Define canvas context and set clipping path\n\n          this._context = this._canvas.node().getContext('2d');\n\n          this._context.scale(devicePixelRatio, devicePixelRatio);\n\n          this._context.rect(0, 0, width, height);\n\n          this._context.clip(); // Setup clipping path\n\n\n          this._context.imageSmoothingQuality = 'high';\n          return this.svg(); // Respect original return param for this.resetSvg;\n        }\n      }\n    }, {\n      key: \"_resizeCanvas\",\n      value: function _resizeCanvas() {\n        var width = this.effectiveWidth();\n        var height = this.effectiveHeight();\n        var devicePixelRatio = window.devicePixelRatio || 1;\n\n        this._canvas.attr('width', width * devicePixelRatio).attr('height', height * devicePixelRatio).style('width', \"\".concat(width, \"px\")).style('height', \"\".concat(height, \"px\"));\n\n        this._context.scale(devicePixelRatio, devicePixelRatio);\n      }\n      /**\n       * Set or get whether to use canvas backend for plotting scatterPlot. Note that the\n       * canvas backend does not currently support\n       * {@link ScatterPlot#customSymbol customSymbol} or\n       * {@link ScatterPlot#symbol symbol} methods and is limited to always plotting\n       * with filled circles. Symbols are drawn with\n       * {@link ScatterPlot#symbolSize symbolSize} radius. By default, the SVG backend\n       * is used when `useCanvas` is set to `false`.\n       * @param {Boolean} [useCanvas=false]\n       * @return {Boolean|d3.selection}\n       */\n\n    }, {\n      key: \"useCanvas\",\n      value: function useCanvas(_useCanvas) {\n        if (!arguments.length) {\n          return this._useCanvas;\n        }\n\n        this._useCanvas = _useCanvas;\n        return this;\n      }\n      /**\n       * Set or get canvas element. You should usually only ever use the get method as\n       * dc.js will handle canvas element generation.  Provides valid canvas only when\n       * {@link ScatterPlot#useCanvas useCanvas} is set to `true`\n       * @param {CanvasElement|d3.selection} [canvasElement]\n       * @return {CanvasElement|d3.selection}\n       */\n\n    }, {\n      key: \"canvas\",\n      value: function canvas(canvasElement) {\n        if (!arguments.length) {\n          return this._canvas;\n        }\n\n        this._canvas = canvasElement;\n        return this;\n      }\n      /**\n       * Get canvas 2D context. Provides valid context only when\n       * {@link ScatterPlot#useCanvas useCanvas} is set to `true`\n       * @return {CanvasContext}\n       */\n\n    }, {\n      key: \"context\",\n      value: function context() {\n        return this._context;\n      }\n      /*eslint complexity: [2,11] */\n      // Plots data on canvas element. If argument provided, assumes legend is\n      // currently being highlighted and modifies opacity/size of symbols accordingly\n      // @param {Object} [legendHighlightDatum] - Datum provided to legendHighlight method\n\n    }, {\n      key: \"_plotOnCanvas\",\n      value: function _plotOnCanvas(legendHighlightDatum) {\n        var _this111 = this;\n\n        this._resizeCanvas();\n\n        var context = this.context();\n        context.clearRect(0, 0, (context.canvas.width + 2) * 1, (context.canvas.height + 2) * 1);\n        var data = this.data(); // Draw the data on canvas\n\n        data.forEach(function (d, i) {\n          var isFiltered = !_this111.filter() || _this111.filter().isFiltered([d.key[0], d.key[1]]); // Calculate opacity for current data point\n\n\n          var cOpacity = 1;\n\n          if (!_this111._existenceAccessor(d)) {\n            cOpacity = _this111._emptyOpacity;\n          } else if (isFiltered) {\n            cOpacity = _this111._nonemptyOpacity;\n          } else {\n            cOpacity = _this111.excludedOpacity();\n          } // Calculate color for current data point\n\n\n          var cColor = null;\n\n          if (_this111._emptyColor && !_this111._existenceAccessor(d)) {\n            cColor = _this111._emptyColor;\n          } else if (_this111.excludedColor() && !isFiltered) {\n            cColor = _this111.excludedColor();\n          } else {\n            cColor = _this111.getColor(d);\n          }\n\n          var cSize = _this111._canvasElementSize(d, isFiltered); // Adjust params for data points if legend is highlighted\n\n\n          if (legendHighlightDatum) {\n            var isHighlighted = cColor === legendHighlightDatum.color; // Calculate opacity for current data point\n\n            var fadeOutOpacity = 0.1; // TODO: Make this programmatically setable\n\n            if (!isHighlighted) {\n              // Fade out non-highlighted colors + highlighted colors outside filter\n              cOpacity = fadeOutOpacity;\n            }\n\n            if (isHighlighted) {\n              // Set size for highlighted color data points\n              cSize = _this111._highlightedSize / Math.sqrt(Math.PI);\n            }\n          } // Draw point on canvas\n\n\n          context.save();\n          context.globalAlpha = cOpacity;\n          context.beginPath();\n          context.arc(_this111.x()(_this111.keyAccessor()(d)), _this111.y()(_this111.valueAccessor()(d)), cSize, 0, 2 * Math.PI, true);\n          context.fillStyle = cColor;\n          context.fill(); // context.lineWidth = 0.5; // Commented out code to add stroke around scatter points if desired\n          // context.strokeStyle = '#333';\n          // context.stroke();\n\n          context.restore();\n        });\n      }\n    }, {\n      key: \"_plotOnSVG\",\n      value: function _plotOnSVG() {\n        var _this112 = this;\n\n        var data = this.data();\n\n        if (this._keyboardAccessible) {\n          // sort based on the x value (key)\n          data.sort(function (a, b) {\n            return d3Array.ascending(_this112.keyAccessor()(a), _this112.keyAccessor()(b));\n          });\n        }\n\n        var symbols = this.chartBodyG().selectAll('path.symbol').data(data);\n        transition(symbols.exit(), this.transitionDuration(), this.transitionDelay()).attr('opacity', 0).remove();\n        symbols = symbols.enter().append('path').attr('class', 'symbol').classed('dc-tabbable', this._keyboardAccessible).attr('opacity', 0).attr('fill', this.getColor).attr('transform', function (d) {\n          return _this112._locator(d);\n        }).merge(symbols); // no click handler - just tabindex for reading out of tooltips\n\n        if (this._keyboardAccessible) {\n          this._makeKeyboardAccessible();\n\n          symbols.order();\n        }\n\n        symbols.call(function (s) {\n          return _this112._renderTitles(s, data);\n        });\n        symbols.each(function (d, i) {\n          _this112._filtered[i] = !_this112.filter() || _this112.filter().isFiltered([_this112.keyAccessor()(d), _this112.valueAccessor()(d)]);\n        });\n        transition(symbols, this.transitionDuration(), this.transitionDelay()).attr('opacity', function (d, i) {\n          if (!_this112._existenceAccessor(d)) {\n            return _this112._emptyOpacity;\n          } else if (_this112._filtered[i]) {\n            return _this112._nonemptyOpacity;\n          } else {\n            return _this112.excludedOpacity();\n          }\n        }).attr('fill', function (d, i) {\n          if (_this112._emptyColor && !_this112._existenceAccessor(d)) {\n            return _this112._emptyColor;\n          } else if (_this112.excludedColor() && !_this112._filtered[i]) {\n            return _this112.excludedColor();\n          } else {\n            return _this112.getColor(d);\n          }\n        }).attr('transform', function (d) {\n          return _this112._locator(d);\n        }).attr('d', this._symbol);\n      }\n    }, {\n      key: \"plotData\",\n      value: function plotData() {\n        if (this._useCanvas) {\n          this._plotOnCanvas();\n        } else {\n          this._plotOnSVG();\n        }\n      }\n    }, {\n      key: \"_renderTitles\",\n      value: function _renderTitles(_symbol, _d) {\n        var _this113 = this;\n\n        if (this.renderTitle()) {\n          _symbol.selectAll('title').remove();\n\n          _symbol.append('title').text(function (d) {\n            return _this113.title()(d);\n          });\n        }\n      }\n      /**\n       * Get or set the existence accessor.  If a point exists, it is drawn with\n       * {@link ScatterPlot#symbolSize symbolSize} radius and\n       * opacity 1; if it does not exist, it is drawn with\n       * {@link ScatterPlot#emptySize emptySize} radius and opacity 0. By default,\n       * the existence accessor checks if the reduced value is truthy.\n       * @see {@link ScatterPlot#symbolSize symbolSize}\n       * @see {@link ScatterPlot#emptySize emptySize}\n       * @example\n       * // default accessor\n       * chart.existenceAccessor(function (d) { return d.value; });\n       * @param {Function} [accessor]\n       * @returns {Function|ScatterPlot}\n       */\n\n    }, {\n      key: \"existenceAccessor\",\n      value: function existenceAccessor(accessor) {\n        if (!arguments.length) {\n          return this._existenceAccessor;\n        }\n\n        this._existenceAccessor = accessor;\n        return this;\n      }\n      /**\n       * Get or set the symbol type used for each point. By default the symbol is a circle (d3.symbolCircle).\n       * Type can be a constant or an accessor.\n       * @see {@link https://github.com/d3/d3-shape/blob/master/README.md#symbol_type symbol.type}\n       * @example\n       * // Circle type\n       * chart.symbol(d3.symbolCircle);\n       * // Square type\n       * chart.symbol(d3.symbolSquare);\n       * @param {Function} [type=d3.symbolCircle]\n       * @returns {Function|ScatterPlot}\n       */\n\n    }, {\n      key: \"symbol\",\n      value: function symbol(type) {\n        if (!arguments.length) {\n          return this._symbol.type();\n        }\n\n        this._symbol.type(type);\n\n        return this;\n      }\n      /**\n       * Get or set the symbol generator. By default `ScatterPlot` will use\n       * {@link https://github.com/d3/d3-shape/blob/master/README.md#symbol d3.symbol()}\n       * to generate symbols. `ScatterPlot` will set the\n       * {@link https://github.com/d3/d3-shape/blob/master/README.md#symbol_size symbol size accessor}\n       * on the symbol generator.\n       * @see {@link https://github.com/d3/d3-shape/blob/master/README.md#symbol d3.symbol}\n       * @see {@link https://stackoverflow.com/questions/25332120/create-additional-d3-js-symbols Create additional D3.js symbols}\n       * @param {String|Function} [customSymbol=d3.symbol()]\n       * @returns {String|Function|ScatterPlot}\n       */\n\n    }, {\n      key: \"customSymbol\",\n      value: function customSymbol(_customSymbol) {\n        var _this114 = this;\n\n        if (!arguments.length) {\n          return this._symbol;\n        }\n\n        this._symbol = _customSymbol;\n\n        this._symbol.size(function (d, i) {\n          return _this114._elementSize(d, i);\n        });\n\n        return this;\n      }\n      /**\n       * Set or get radius for symbols.\n       * @see {@link https://github.com/d3/d3-shape/blob/master/README.md#symbol_size d3.symbol.size}\n       * @param {Number} [symbolSize=3]\n       * @returns {Number|ScatterPlot}\n       */\n\n    }, {\n      key: \"symbolSize\",\n      value: function symbolSize(_symbolSize) {\n        if (!arguments.length) {\n          return this._symbolSize;\n        }\n\n        this._symbolSize = _symbolSize;\n        return this;\n      }\n      /**\n       * Set or get radius for highlighted symbols.\n       * @see {@link https://github.com/d3/d3-shape/blob/master/README.md#symbol_size d3.symbol.size}\n       * @param {Number} [highlightedSize=5]\n       * @returns {Number|ScatterPlot}\n       */\n\n    }, {\n      key: \"highlightedSize\",\n      value: function highlightedSize(_highlightedSize) {\n        if (!arguments.length) {\n          return this._highlightedSize;\n        }\n\n        this._highlightedSize = _highlightedSize;\n        return this;\n      }\n      /**\n       * Set or get size for symbols excluded from this chart's filter. If null, no\n       * special size is applied for symbols based on their filter status.\n       * @see {@link https://github.com/d3/d3-shape/blob/master/README.md#symbol_size d3.symbol.size}\n       * @param {Number} [excludedSize=null]\n       * @returns {Number|ScatterPlot}\n       */\n\n    }, {\n      key: \"excludedSize\",\n      value: function excludedSize(_excludedSize) {\n        if (!arguments.length) {\n          return this._excludedSize;\n        }\n\n        this._excludedSize = _excludedSize;\n        return this;\n      }\n      /**\n       * Set or get color for symbols excluded from this chart's filter. If null, no\n       * special color is applied for symbols based on their filter status.\n       * @param {Number} [excludedColor=null]\n       * @returns {Number|ScatterPlot}\n       */\n\n    }, {\n      key: \"excludedColor\",\n      value: function excludedColor(_excludedColor) {\n        if (!arguments.length) {\n          return this._excludedColor;\n        }\n\n        this._excludedColor = _excludedColor;\n        return this;\n      }\n      /**\n       * Set or get opacity for symbols excluded from this chart's filter.\n       * @param {Number} [excludedOpacity=1.0]\n       * @returns {Number|ScatterPlot}\n       */\n\n    }, {\n      key: \"excludedOpacity\",\n      value: function excludedOpacity(_excludedOpacity) {\n        if (!arguments.length) {\n          return this._excludedOpacity;\n        }\n\n        this._excludedOpacity = _excludedOpacity;\n        return this;\n      }\n      /**\n       * Set or get radius for symbols when the group is empty.\n       * @see {@link https://github.com/d3/d3-shape/blob/master/README.md#symbol_size d3.symbol.size}\n       * @param {Number} [emptySize=0]\n       * @returns {Number|ScatterPlot}\n       */\n\n    }, {\n      key: \"emptySize\",\n      value: function emptySize(_emptySize) {\n        if (!arguments.length) {\n          return this._emptySize;\n        }\n\n        this._emptySize = _emptySize;\n        return this;\n      }\n    }, {\n      key: \"hiddenSize\",\n      value: function hiddenSize(emptySize) {\n        if (!arguments.length) {\n          return this.emptySize();\n        }\n\n        return this.emptySize(emptySize);\n      }\n      /**\n       * Set or get color for symbols when the group is empty. If null, just use the\n       * {@link ColorMixin#colors colorMixin.colors} color scale zero value.\n       * @param {String} [emptyColor=null]\n       * @return {String}\n       * @return {ScatterPlot}/\n       */\n\n    }, {\n      key: \"emptyColor\",\n      value: function emptyColor(_emptyColor) {\n        if (!arguments.length) {\n          return this._emptyColor;\n        }\n\n        this._emptyColor = _emptyColor;\n        return this;\n      }\n      /**\n       * Set or get opacity for symbols when the group is empty.\n       * @param {Number} [emptyOpacity=0]\n       * @return {Number}\n       * @return {ScatterPlot}\n       */\n\n    }, {\n      key: \"emptyOpacity\",\n      value: function emptyOpacity(_emptyOpacity) {\n        if (!arguments.length) {\n          return this._emptyOpacity;\n        }\n\n        this._emptyOpacity = _emptyOpacity;\n        return this;\n      }\n      /**\n       * Set or get opacity for symbols when the group is not empty.\n       * @param {Number} [nonemptyOpacity=1]\n       * @return {Number}\n       * @return {ScatterPlot}\n       */\n\n    }, {\n      key: \"nonemptyOpacity\",\n      value: function nonemptyOpacity(_nonemptyOpacity) {\n        if (!arguments.length) {\n          return this._emptyOpacity;\n        }\n\n        this._nonemptyOpacity = _nonemptyOpacity;\n        return this;\n      }\n    }, {\n      key: \"legendables\",\n      value: function legendables() {\n        return [{\n          chart: this,\n          name: this._groupName,\n          color: this.getColor()\n        }];\n      }\n    }, {\n      key: \"legendHighlight\",\n      value: function legendHighlight(d) {\n        if (this._useCanvas) {\n          this._plotOnCanvas(d); // Supply legend datum to plotOnCanvas\n\n        } else {\n          this._resizeSymbolsWhere(function (s) {\n            return s.attr('fill') === d.color;\n          }, this._highlightedSize);\n\n          this.chartBodyG().selectAll('.chart-body path.symbol').filter(function () {\n            return d3Selection.select(this).attr('fill') !== d.color;\n          }).classed('fadeout', true);\n        }\n      }\n    }, {\n      key: \"legendReset\",\n      value: function legendReset(d) {\n        if (this._useCanvas) {\n          this._plotOnCanvas(d); // Supply legend datum to plotOnCanvas\n\n        } else {\n          this._resizeSymbolsWhere(function (s) {\n            return s.attr('fill') === d.color;\n          }, this._symbolSize);\n\n          this.chartBodyG().selectAll('.chart-body path.symbol').filter(function () {\n            return d3Selection.select(this).attr('fill') !== d.color;\n          }).classed('fadeout', false);\n        }\n      }\n    }, {\n      key: \"_resizeSymbolsWhere\",\n      value: function _resizeSymbolsWhere(condition, size) {\n        var symbols = this.chartBodyG().selectAll('.chart-body path.symbol').filter(function () {\n          return condition(d3Selection.select(this));\n        });\n\n        var oldSize = this._symbol.size();\n\n        this._symbol.size(Math.pow(size, 2));\n\n        transition(symbols, this.transitionDuration(), this.transitionDelay()).attr('d', this._symbol);\n\n        this._symbol.size(oldSize);\n      }\n    }, {\n      key: \"createBrushHandlePaths\",\n      value: function createBrushHandlePaths() {// no handle paths for poly-brushes\n      }\n    }, {\n      key: \"extendBrush\",\n      value: function extendBrush(brushSelection) {\n        if (this.round()) {\n          brushSelection[0] = brushSelection[0].map(this.round());\n          brushSelection[1] = brushSelection[1].map(this.round());\n        }\n\n        return brushSelection;\n      }\n    }, {\n      key: \"brushIsEmpty\",\n      value: function brushIsEmpty(brushSelection) {\n        return !brushSelection || brushSelection[0][0] >= brushSelection[1][0] || brushSelection[0][1] >= brushSelection[1][1];\n      }\n    }, {\n      key: \"_brushing\",\n      value: function _brushing(evt) {\n        var _this115 = this;\n\n        if (this._ignoreBrushEvents) {\n          return;\n        }\n\n        var brushSelection = evt.selection; // Testing with pixels is more reliable\n\n        var brushIsEmpty = this.brushIsEmpty(brushSelection);\n\n        if (brushSelection) {\n          brushSelection = brushSelection.map(function (point) {\n            return point.map(function (coord, i) {\n              var scale = i === 0 ? _this115.x() : _this115.y();\n              return scale.invert(coord);\n            });\n          });\n          brushSelection = this.extendBrush(brushSelection); // The rounding process might have made brushSelection empty, so we need to recheck\n\n          brushIsEmpty = brushIsEmpty && this.brushIsEmpty(brushSelection);\n        }\n\n        this.redrawBrush(brushSelection, false);\n        var ranged2DFilter = brushIsEmpty ? null : filters.RangedTwoDimensionalFilter(brushSelection);\n        events.trigger(function () {\n          _this115.replaceFilter(ranged2DFilter);\n\n          _this115.redrawGroup();\n        }, constants.EVENT_DELAY);\n      }\n    }, {\n      key: \"redrawBrush\",\n      value: function redrawBrush(brushSelection, doTransition) {\n        var _this116 = this;\n\n        // override default x axis brush from parent chart\n        this._gBrush = this.gBrush();\n\n        if (this.brushOn() && this._gBrush) {\n          if (this.resizing()) {\n            this.setBrushExtents(doTransition);\n          }\n\n          if (!brushSelection) {\n            this._withoutBrushEvents(function () {\n              _this116._gBrush.call(_this116.brush().move, brushSelection);\n            });\n          } else {\n            brushSelection = brushSelection.map(function (point) {\n              return point.map(function (coord, i) {\n                var scale = i === 0 ? _this116.x() : _this116.y();\n                return scale(coord);\n              });\n            });\n            var gBrush = optionalTransition(doTransition, this.transitionDuration(), this.transitionDelay())(this._gBrush);\n\n            this._withoutBrushEvents(function () {\n              gBrush.call(_this116.brush().move, brushSelection);\n            });\n          }\n        }\n\n        this.fadeDeselectedArea(brushSelection);\n      }\n    }]);\n\n    return ScatterPlot;\n  }(CoordinateGridMixin);\n\n  var scatterPlot = function scatterPlot(parent, chartGroup) {\n    return new ScatterPlot(parent, chartGroup);\n  };\n\n  var SELECT_CSS_CLASS = 'dc-select-menu';\n  var OPTION_CSS_CLASS = 'dc-select-option';\n  /**\n   * The select menu is a simple widget designed to filter a dimension by selecting an option from\n   * an HTML `<select/>` menu. The menu can be optionally turned into a multiselect.\n   * @mixes BaseMixin\n   */\n\n  var SelectMenu = /*#__PURE__*/function (_BaseMixin7) {\n    _inherits(SelectMenu, _BaseMixin7);\n\n    var _super25 = _createSuper(SelectMenu);\n\n    /**\n     * Create a Select Menu.\n     * @example\n     * // create a select menu under #select-container using the default global chart group\n     * var select = new SelectMenu('#select-container')\n     *                .dimension(states)\n     *                .group(stateGroup);\n     * // the option text can be set via the title() function\n     * // by default the option text is '`key`: `value`'\n     * select.title(function (d){\n     *     return 'STATE: ' + d.key;\n     * })\n     * @param {String|node|d3.selection|CompositeChart} parent - Any valid\n     * [d3 single selector](https://github.com/mbostock/d3/wiki/Selections#selecting-elements) specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this widget should be placed in.\n     * Interaction with the widget will only trigger events and redraws within its group.\n     */\n    function SelectMenu(parent, chartGroup) {\n      var _this117;\n\n      _classCallCheck(this, SelectMenu);\n\n      _this117 = _super25.call(this);\n      _this117._select = undefined;\n      _this117._promptText = 'Select all';\n      _this117._multiple = false;\n      _this117._promptValue = null;\n      _this117._numberVisible = null;\n\n      _this117.data(function (group) {\n        return group.all().filter(_this117._filterDisplayed);\n      });\n\n      _this117._filterDisplayed = function (d) {\n        return _this117.valueAccessor()(d) > 0;\n      };\n\n      _this117._order = function (a, b) {\n        if (_this117.keyAccessor()(a) > _this117.keyAccessor()(b)) {\n          return 1;\n        }\n\n        if (_this117.keyAccessor()(a) < _this117.keyAccessor()(b)) {\n          return -1;\n        }\n\n        return 0;\n      };\n\n      _this117.anchor(parent, chartGroup);\n\n      return _this117;\n    }\n\n    _createClass(SelectMenu, [{\n      key: \"_doRender\",\n      value: function _doRender() {\n        this.select('select').remove();\n        this._select = this.root().append('select').classed(SELECT_CSS_CLASS, true);\n\n        this._select.append('option').text(this._promptText).attr('value', '');\n\n        this._doRedraw();\n\n        return this;\n      }\n    }, {\n      key: \"_doRedraw\",\n      value: function _doRedraw() {\n        var _this118 = this;\n\n        this._setAttributes();\n\n        this._renderOptions(); // select the option(s) corresponding to current filter(s)\n\n\n        if (this.hasFilter() && this._multiple) {\n          this._select.selectAll('option').property('selected', function (d) {\n            return typeof d !== 'undefined' && _this118.filters().indexOf(String(_this118.keyAccessor()(d))) >= 0;\n          });\n        } else if (this.hasFilter()) {\n          this._select.property('value', this.filter());\n        } else {\n          this._select.property('value', '');\n        }\n\n        return this;\n      }\n    }, {\n      key: \"_renderOptions\",\n      value: function _renderOptions() {\n        var _this119 = this;\n\n        var options = this._select.selectAll(\"option.\".concat(OPTION_CSS_CLASS)).data(this.data(), function (d) {\n          return _this119.keyAccessor()(d);\n        });\n\n        options.exit().remove();\n        options.enter().append('option').classed(OPTION_CSS_CLASS, true).attr('value', function (d) {\n          return _this119.keyAccessor()(d);\n        }).merge(options).text(this.title());\n\n        this._select.selectAll(\"option.\".concat(OPTION_CSS_CLASS)).sort(this._order);\n\n        this._select.on('change', d3compat.eventHandler(function (d, evt) {\n          return _this119._onChange(d, evt);\n        }));\n      }\n    }, {\n      key: \"_onChange\",\n      value: function _onChange(_d, evt) {\n        var values;\n        var target = evt.target;\n\n        if (target.selectedOptions) {\n          var selectedOptions = Array.prototype.slice.call(target.selectedOptions);\n          values = selectedOptions.map(function (d) {\n            return d.value;\n          });\n        } else {\n          // IE and other browsers do not support selectedOptions\n          // adapted from this polyfill: https://gist.github.com/brettz9/4212217\n          var options = [].slice.call(evt.target.options);\n          values = options.filter(function (option) {\n            return option.selected;\n          }).map(function (option) {\n            return option.value;\n          });\n        } // console.log(values);\n        // check if only prompt option is selected\n\n\n        if (values.length === 1 && values[0] === '') {\n          values = this._promptValue || null;\n        } else if (!this._multiple && values.length === 1) {\n          values = values[0];\n        }\n\n        this.onChange(values);\n      }\n    }, {\n      key: \"onChange\",\n      value: function onChange(val) {\n        var _this120 = this;\n\n        if (val && this._multiple) {\n          this.replaceFilter([val]);\n        } else if (val) {\n          this.replaceFilter(val);\n        } else {\n          this.filterAll();\n        }\n\n        events.trigger(function () {\n          _this120.redrawGroup();\n        });\n      }\n    }, {\n      key: \"_setAttributes\",\n      value: function _setAttributes() {\n        if (this._multiple) {\n          this._select.attr('multiple', true);\n        } else {\n          this._select.attr('multiple', null);\n        }\n\n        if (this._numberVisible !== null) {\n          this._select.attr('size', this._numberVisible);\n        } else {\n          this._select.attr('size', null);\n        }\n      }\n      /**\n       * Get or set the function that controls the ordering of option tags in the\n       * select menu. By default options are ordered by the group key in ascending\n       * order.\n       * @param {Function} [order]\n       * @returns {Function|SelectMenu}\n       * @example\n       * // order by the group's value\n       * chart.order(function (a,b) {\n       *     return a.value > b.value ? 1 : b.value > a.value ? -1 : 0;\n       * });\n       */\n\n    }, {\n      key: \"order\",\n      value: function order(_order4) {\n        if (!arguments.length) {\n          return this._order;\n        }\n\n        this._order = _order4;\n        return this;\n      }\n      /**\n       * Get or set the text displayed in the options used to prompt selection.\n       * @param {String} [promptText='Select all']\n       * @returns {String|SelectMenu}\n       * @example\n       * chart.promptText('All states');\n       */\n\n    }, {\n      key: \"promptText\",\n      value: function promptText(_promptText2) {\n        if (!arguments.length) {\n          return this._promptText;\n        }\n\n        this._promptText = _promptText2;\n        return this;\n      }\n      /**\n       * Get or set the function that filters option tags prior to display. By default options\n       * with a value of < 1 are not displayed.\n       * @param {function} [filterDisplayed]\n       * @returns {Function|SelectMenu}\n       * @example\n       * // display all options override the `filterDisplayed` function:\n       * chart.filterDisplayed(function () {\n       *     return true;\n       * });\n       */\n\n    }, {\n      key: \"filterDisplayed\",\n      value: function filterDisplayed(_filterDisplayed2) {\n        if (!arguments.length) {\n          return this._filterDisplayed;\n        }\n\n        this._filterDisplayed = _filterDisplayed2;\n        return this;\n      }\n      /**\n       * Controls the type of select menu. Setting it to true converts the underlying\n       * HTML tag into a multiple select.\n       * @param {boolean} [multiple=false]\n       * @returns {boolean|SelectMenu}\n       * @example\n       * chart.multiple(true);\n       */\n\n    }, {\n      key: \"multiple\",\n      value: function multiple(_multiple2) {\n        if (!arguments.length) {\n          return this._multiple;\n        }\n\n        this._multiple = _multiple2;\n        return this;\n      }\n      /**\n       * Controls the default value to be used for\n       * [dimension.filter](https://github.com/crossfilter/crossfilter/wiki/API-Reference#dimension_filter)\n       * when only the prompt value is selected. If `null` (the default), no filtering will occur when\n       * just the prompt is selected.\n       * @param {?*} [promptValue=null]\n       * @returns {*|SelectMenu}\n       */\n\n    }, {\n      key: \"promptValue\",\n      value: function promptValue(_promptValue2) {\n        if (!arguments.length) {\n          return this._promptValue;\n        }\n\n        this._promptValue = _promptValue2;\n        return this;\n      }\n      /**\n       * Controls the number of items to show in the select menu, when `.multiple()` is true. This\n       * controls the [`size` attribute](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/select#Attributes) of\n       * the `select` element. If `null` (the default), uses the browser's default height.\n       * @param {?number} [numberVisible=null]\n       * @returns {number|SelectMenu}\n       * @example\n       * chart.numberVisible(10);\n       */\n\n    }, {\n      key: \"numberVisible\",\n      value: function numberVisible(_numberVisible) {\n        if (!arguments.length) {\n          return this._numberVisible;\n        }\n\n        this._numberVisible = _numberVisible;\n        return this;\n      }\n    }, {\n      key: \"size\",\n      value: function size(numberVisible) {\n        logger.warnOnce('selectMenu.size is ambiguous - use selectMenu.numberVisible instead');\n\n        if (!arguments.length) {\n          return this.numberVisible();\n        }\n\n        return this.numberVisible(numberVisible);\n      }\n    }]);\n\n    return SelectMenu;\n  }(BaseMixin);\n\n  var selectMenu = function selectMenu(parent, chartGroup) {\n    return new SelectMenu(parent, chartGroup);\n  };\n  /**\n   * A series chart is a chart that shows multiple series of data overlaid on one chart, where the\n   * series is specified in the data. It is a specialization of Composite Chart and inherits all\n   * composite features other than recomposing the chart.\n   *\n   * Examples:\n   * - {@link http://dc-js.github.io/dc.js/examples/series.html Series Chart}\n   * @mixes CompositeChart\n   */\n\n\n  var SeriesChart = /*#__PURE__*/function (_CompositeChart) {\n    _inherits(SeriesChart, _CompositeChart);\n\n    var _super26 = _createSuper(SeriesChart);\n\n    /**\n     * Create a Series Chart.\n     * @example\n     * // create a series chart under #chart-container1 element using the default global chart group\n     * var seriesChart1 = new SeriesChart(\"#chart-container1\");\n     * // create a series chart under #chart-container2 element using chart group A\n     * var seriesChart2 = new SeriesChart(\"#chart-container2\", \"chartGroupA\");\n     * @param {String|node|d3.selection} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector} specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function SeriesChart(parent, chartGroup) {\n      var _this121;\n\n      _classCallCheck(this, SeriesChart);\n\n      _this121 = _super26.call(this, parent, chartGroup);\n\n      _this121._keySort = function (a, b) {\n        return d3Array.ascending(_this121.keyAccessor()(a), _this121.keyAccessor()(b));\n      };\n\n      _this121._charts = {};\n      _this121._chartFunction = lineChart;\n      _this121._chartGroup = chartGroup;\n      _this121._seriesAccessor = undefined;\n      _this121._seriesSort = d3Array.ascending;\n      _this121._valueSort = _this121._keySort;\n\n      _this121._mandatoryAttributes().push('seriesAccessor', 'chart');\n\n      _this121.shareColors(true);\n\n      return _this121;\n    }\n\n    _createClass(SeriesChart, [{\n      key: \"_compose\",\n      value: function _compose(subChartArray) {\n        _get(_getPrototypeOf(SeriesChart.prototype), \"compose\", this).call(this, subChartArray);\n      }\n    }, {\n      key: \"compose\",\n      value: function compose(subChartArray) {\n        throw new Error('Not supported for this chart type');\n      }\n    }, {\n      key: \"_preprocessData\",\n      value: function _preprocessData() {\n        var _this122 = this;\n\n        var keep = [];\n        var childrenChanged;\n        var nesting = d3compat.nester({\n          key: this._seriesAccessor,\n          sortKeys: this._seriesSort,\n          sortValues: this._valueSort,\n          entries: this.data()\n        });\n        var children = nesting.map(function (sub, i) {\n          var subChart = _this122._charts[sub.key] || _this122._chartFunction(_this122, _this122._chartGroup, sub.key, i);\n\n          if (!_this122._charts[sub.key]) {\n            childrenChanged = true;\n          }\n\n          _this122._charts[sub.key] = subChart;\n          keep.push(sub.key);\n          return subChart.dimension(_this122.dimension()).group({\n            all: typeof sub.values === 'function' ? sub.values : utils.constant(sub.values)\n          }, sub.key).keyAccessor(_this122.keyAccessor()).valueAccessor(_this122.valueAccessor()).brushOn(false);\n        }); // this works around the fact compositeChart doesn't really\n        // have a removal interface\n\n        Object.keys(this._charts).filter(function (c) {\n          return keep.indexOf(c) === -1;\n        }).forEach(function (c) {\n          _this122._clearChart(c);\n\n          childrenChanged = true;\n        });\n\n        this._compose(children);\n\n        if (childrenChanged && this.legend()) {\n          this.legend().render();\n        }\n      }\n    }, {\n      key: \"_clearChart\",\n      value: function _clearChart(c) {\n        if (this._charts[c].g()) {\n          this._charts[c].g().remove();\n        }\n\n        delete this._charts[c];\n      }\n    }, {\n      key: \"_resetChildren\",\n      value: function _resetChildren() {\n        Object.keys(this._charts).map(this._clearChart.bind(this));\n        this._charts = {};\n      }\n      /**\n       * Get or set the chart function, which generates the child charts.\n       * @example\n       * // put curve on the line charts used for the series\n       * chart.chart(function(c) { return new LineChart(c).curve(d3.curveBasis); })\n       * // do a scatter series chart\n       * chart.chart(anchor => new ScatterPlot(anchor))\n       * @param {Function} [chartFunction= (anchor) =>  new LineChart(anchor)]\n       * @returns {Function|SeriesChart}\n       */\n\n    }, {\n      key: \"chart\",\n      value: function chart(chartFunction) {\n        if (!arguments.length) {\n          return this._chartFunction;\n        }\n\n        this._chartFunction = chartFunction;\n\n        this._resetChildren();\n\n        return this;\n      }\n      /**\n       * **mandatory**\n       *\n       * Get or set accessor function for the displayed series. Given a datum, this function\n       * should return the series that datum belongs to.\n       * @example\n       * // simple series accessor\n       * chart.seriesAccessor(function(d) { return \"Expt: \" + d.key[0]; })\n       * @param {Function} [accessor]\n       * @returns {Function|SeriesChart}\n       */\n\n    }, {\n      key: \"seriesAccessor\",\n      value: function seriesAccessor(accessor) {\n        if (!arguments.length) {\n          return this._seriesAccessor;\n        }\n\n        this._seriesAccessor = accessor;\n\n        this._resetChildren();\n\n        return this;\n      }\n      /**\n       * Get or set a function to sort the list of series by, given series values.\n       * @see {@link https://github.com/d3/d3-array/blob/master/README.md#ascending d3.ascending}\n       * @see {@link https://github.com/d3/d3-array/blob/master/README.md#descending d3.descending}\n       * @example\n       * chart.seriesSort(d3.descending);\n       * @param {Function} [sortFunction=d3.ascending]\n       * @returns {Function|SeriesChart}\n       */\n\n    }, {\n      key: \"seriesSort\",\n      value: function seriesSort(sortFunction) {\n        if (!arguments.length) {\n          return this._seriesSort;\n        }\n\n        this._seriesSort = sortFunction;\n\n        this._resetChildren();\n\n        return this;\n      }\n      /**\n       * Get or set a function to sort each series values by. By default this is the key accessor which,\n       * for example, will ensure a lineChart series connects its points in increasing key/x order,\n       * rather than haphazardly.\n       * @see {@link https://github.com/d3/d3-array/blob/master/README.md#ascending d3.ascending}\n       * @see {@link https://github.com/d3/d3-array/blob/master/README.md#descending d3.descending}\n       * @example\n       * // Default value sort\n       * _chart.valueSort(function keySort (a, b) {\n       *     return d3.ascending(_chart.keyAccessor()(a), _chart.keyAccessor()(b));\n       * });\n       * @param {Function} [sortFunction]\n       * @returns {Function|SeriesChart}\n       */\n\n    }, {\n      key: \"valueSort\",\n      value: function valueSort(sortFunction) {\n        if (!arguments.length) {\n          return this._valueSort;\n        }\n\n        this._valueSort = sortFunction;\n\n        this._resetChildren();\n\n        return this;\n      }\n    }]);\n\n    return SeriesChart;\n  }(CompositeChart);\n\n  var seriesChart = function seriesChart(parent, chartGroup) {\n    return new SeriesChart(parent, chartGroup);\n  };\n\n  var DEFAULT_MIN_ANGLE_FOR_LABEL$1 = 0.5;\n  /**\n   * The sunburst chart implementation is usually used to visualize a small tree distribution.  The sunburst\n   * chart uses keyAccessor to determine the slices, and valueAccessor to calculate the size of each\n   * slice relative to the sum of all values. Slices are ordered by {@link BaseMixin#ordering ordering} which defaults to sorting\n   * by key.\n   *\n   * The keys used in the sunburst chart should be arrays, representing paths in the tree.\n   *\n   * When filtering, the sunburst chart creates instances of {@link Filters.HierarchyFilter HierarchyFilter}.\n   *\n   * @mixes CapMixin\n   * @mixes ColorMixin\n   * @mixes BaseMixin\n   */\n\n  var SunburstChart = /*#__PURE__*/function (_ColorMixin5) {\n    _inherits(SunburstChart, _ColorMixin5);\n\n    var _super27 = _createSuper(SunburstChart);\n\n    /**\n     * Create a Sunburst Chart\n     * @example\n     * // create a sunburst chart under #chart-container1 element using the default global chart group\n     * var chart1 = new SunburstChart('#chart-container1');\n     * // create a sunburst chart under #chart-container2 element using chart group A\n     * var chart2 = new SunburstChart('#chart-container2', 'chartGroupA');\n     *\n     * @param {String|node|d3.selection} parent - Any valid\n     * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector} specifying\n     * a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function SunburstChart(parent, chartGroup) {\n      var _this123;\n\n      _classCallCheck(this, SunburstChart);\n\n      _this123 = _super27.call(this);\n      _this123._sliceCssClass = 'pie-slice';\n      _this123._emptyCssClass = 'empty-chart';\n      _this123._emptyTitle = 'empty';\n      _this123._radius = undefined;\n      _this123._givenRadius = undefined; // given radius, if any\n\n      _this123._innerRadius = 0;\n      _this123._ringSizes = null;\n      _this123._g = undefined;\n      _this123._cx = undefined;\n      _this123._cy = undefined;\n      _this123._minAngleForLabel = DEFAULT_MIN_ANGLE_FOR_LABEL$1;\n      _this123._externalLabelRadius = undefined;\n\n      _this123.colorAccessor(function (d) {\n        return _this123.keyAccessor()(d);\n      }); // override cap mixin\n\n\n      _this123.ordering(pluck('key'));\n\n      _this123.title(function (d) {\n        return \"\".concat(_this123.keyAccessor()(d), \": \").concat(_this123._extendedValueAccessor(d));\n      });\n\n      _this123.label(function (d) {\n        return _this123.keyAccessor()(d);\n      });\n\n      _this123.renderLabel(true);\n\n      _this123.transitionDuration(350);\n\n      _this123.anchor(parent, chartGroup);\n\n      return _this123;\n    } // Handle cases if value corresponds to generated parent nodes\n\n\n    _createClass(SunburstChart, [{\n      key: \"_extendedValueAccessor\",\n      value: function _extendedValueAccessor(d) {\n        if (d.path) {\n          return d.value;\n        }\n\n        return this.valueAccessor()(d);\n      }\n    }, {\n      key: \"_scaleRadius\",\n      value: function _scaleRadius(ringIndex, y) {\n        if (ringIndex === 0) {\n          return this._innerRadius;\n        } else {\n          var customRelativeRadius = d3Array.sum(this.ringSizes().relativeRingSizes.slice(0, ringIndex));\n          var scaleFactor = ringIndex * (1 / this.ringSizes().relativeRingSizes.length) / customRelativeRadius;\n\n          var standardRadius = (y - this.ringSizes().rootOffset) / (1 - this.ringSizes().rootOffset) * (this._radius - this._innerRadius);\n\n          return this._innerRadius + standardRadius / scaleFactor;\n        }\n      }\n    }, {\n      key: \"_doRender\",\n      value: function _doRender() {\n        this.resetSvg();\n        this._g = this.svg().append('g').attr('transform', \"translate(\".concat(this.cx(), \",\").concat(this.cy(), \")\"));\n\n        this._drawChart();\n\n        return this;\n      }\n    }, {\n      key: \"_drawChart\",\n      value: function _drawChart() {\n        // set radius from chart size if none given, or if given radius is too large\n        var maxRadius = d3Array.min([this.width(), this.height()]) / 2;\n        this._radius = this._givenRadius && this._givenRadius < maxRadius ? this._givenRadius : maxRadius;\n\n        var arcs = this._buildArcs();\n\n        var partitionedNodes, cdata; // if we have data...\n\n        if (d3Array.sum(this.data(), this.valueAccessor())) {\n          cdata = utils.toHierarchy(this.data(), this.valueAccessor());\n          partitionedNodes = this._partitionNodes(cdata); // First one is the root, which is not needed\n\n          partitionedNodes.nodes.shift();\n\n          this._g.classed(this._emptyCssClass, false);\n        } else {\n          // otherwise we'd be getting NaNs, so override\n          // note: abuse others for its ignoring the value accessor\n          cdata = utils.toHierarchy([], function (d) {\n            return d.value;\n          });\n          partitionedNodes = this._partitionNodes(cdata);\n\n          this._g.classed(this._emptyCssClass, true);\n        }\n\n        this.ringSizes().rootOffset = partitionedNodes.rootOffset;\n        this.ringSizes().relativeRingSizes = partitionedNodes.relativeRingSizes;\n\n        if (this._g) {\n          var slices = this._g.selectAll(\"g.\".concat(this._sliceCssClass)).data(partitionedNodes.nodes);\n\n          this._createElements(slices, arcs, partitionedNodes.nodes);\n\n          this._updateElements(partitionedNodes.nodes, arcs);\n\n          this._removeElements(slices);\n\n          this._highlightFilter();\n\n          transition(this._g, this.transitionDuration(), this.transitionDelay()).attr('transform', \"translate(\".concat(this.cx(), \",\").concat(this.cy(), \")\"));\n        }\n      }\n    }, {\n      key: \"_createElements\",\n      value: function _createElements(slices, arcs, sunburstData) {\n        var slicesEnter = this._createSliceNodes(slices);\n\n        this._createSlicePath(slicesEnter, arcs);\n\n        this._createTitles(slicesEnter);\n\n        this._createLabels(sunburstData, arcs);\n      }\n    }, {\n      key: \"_createSliceNodes\",\n      value: function _createSliceNodes(slices) {\n        var _this124 = this;\n\n        return slices.enter().append('g').attr('class', function (d, i) {\n          return \"\".concat(_this124._sliceCssClass, \" _\").concat(i, \" \").concat(_this124._sliceCssClass, \"-level-\").concat(d.depth);\n        });\n      }\n    }, {\n      key: \"_createSlicePath\",\n      value: function _createSlicePath(slicesEnter, arcs) {\n        var _this125 = this;\n\n        var slicePath = slicesEnter.append('path').attr('fill', function (d, i) {\n          return _this125._fill(d, i);\n        }).on('click', d3compat.eventHandler(function (d) {\n          return _this125.onClick(d);\n        })).classed('dc-tabbable', this._keyboardAccessible).attr('d', function (d) {\n          return _this125._safeArc(arcs, d);\n        });\n\n        if (this._keyboardAccessible) {\n          this._makeKeyboardAccessible(this.onClick);\n        }\n\n        var tranNodes = transition(slicePath, this.transitionDuration());\n\n        if (tranNodes.attrTween) {\n          var chart = this;\n          tranNodes.attrTween('d', function (d) {\n            return chart._tweenSlice(d, this);\n          });\n        }\n      }\n    }, {\n      key: \"_createTitles\",\n      value: function _createTitles(slicesEnter) {\n        var _this126 = this;\n\n        if (this.renderTitle()) {\n          slicesEnter.append('title').text(function (d) {\n            return _this126.title()(d);\n          });\n        }\n      }\n    }, {\n      key: \"_positionLabels\",\n      value: function _positionLabels(labelsEnter, arcs) {\n        var _this127 = this;\n\n        transition(labelsEnter, this.transitionDuration()).attr('transform', function (d) {\n          return _this127._labelPosition(d, arcs);\n        }).attr('text-anchor', 'middle').text(function (d) {\n          // position label...\n          if (_this127._sliceHasNoData(d) || _this127._sliceTooSmall(d)) {\n            return '';\n          }\n\n          return _this127.label()(d);\n        });\n      }\n    }, {\n      key: \"_createLabels\",\n      value: function _createLabels(sunburstData, arcs) {\n        var _this128 = this;\n\n        if (this.renderLabel()) {\n          var labels = this._g.selectAll(\"text.\".concat(this._sliceCssClass)).data(sunburstData);\n\n          labels.exit().remove();\n          var labelsEnter = labels.enter().append('text').attr('class', function (d, i) {\n            var classes = \"\".concat(_this128._sliceCssClass, \" _\").concat(i);\n\n            if (_this128._externalLabelRadius) {\n              classes += ' external';\n            }\n\n            return classes;\n          }).on('click', d3compat.eventHandler(function (d) {\n            return _this128.onClick(d);\n          }));\n\n          this._positionLabels(labelsEnter, arcs);\n        }\n      }\n    }, {\n      key: \"_updateElements\",\n      value: function _updateElements(sunburstData, arcs) {\n        this._updateSlicePaths(sunburstData, arcs);\n\n        this._updateLabels(sunburstData, arcs);\n\n        this._updateTitles(sunburstData);\n      }\n    }, {\n      key: \"_updateSlicePaths\",\n      value: function _updateSlicePaths(sunburstData, arcs) {\n        var _this129 = this;\n\n        var slicePaths = this._g.selectAll(\"g.\".concat(this._sliceCssClass)).data(sunburstData).select('path').attr('d', function (d, i) {\n          return _this129._safeArc(arcs, d);\n        });\n\n        var tranNodes = transition(slicePaths, this.transitionDuration());\n\n        if (tranNodes.attrTween) {\n          var chart = this;\n          tranNodes.attrTween('d', function (d) {\n            return chart._tweenSlice(d, this);\n          });\n        }\n\n        tranNodes.attr('fill', function (d, i) {\n          return _this129._fill(d, i);\n        });\n      }\n    }, {\n      key: \"_updateLabels\",\n      value: function _updateLabels(sunburstData, arcs) {\n        if (this.renderLabel()) {\n          var labels = this._g.selectAll(\"text.\".concat(this._sliceCssClass)).data(sunburstData);\n\n          this._positionLabels(labels, arcs);\n        }\n      }\n    }, {\n      key: \"_updateTitles\",\n      value: function _updateTitles(sunburstData) {\n        var _this130 = this;\n\n        if (this.renderTitle()) {\n          this._g.selectAll(\"g.\".concat(this._sliceCssClass)).data(sunburstData).select('title').text(function (d) {\n            return _this130.title()(d);\n          });\n        }\n      }\n    }, {\n      key: \"_removeElements\",\n      value: function _removeElements(slices) {\n        slices.exit().remove();\n      }\n    }, {\n      key: \"_highlightFilter\",\n      value: function _highlightFilter() {\n        var chart = this;\n\n        if (chart.hasFilter()) {\n          chart.selectAll(\"g.\".concat(chart._sliceCssClass)).each(function (d) {\n            if (chart._isSelectedSlice(d)) {\n              chart.highlightSelected(this);\n            } else {\n              chart.fadeDeselected(this);\n            }\n          });\n        } else {\n          chart.selectAll(\"g.\".concat(chart._sliceCssClass)).each(function (d) {\n            chart.resetHighlight(this);\n          });\n        }\n      }\n      /**\n       * Get or set the inner radius of the sunburst chart. If the inner radius is greater than 0px then the\n       * sunburst chart will be rendered as a doughnut chart. Default inner radius is 0px.\n       * @param {Number} [innerRadius=0]\n       * @returns {Number|SunburstChart}\n       */\n\n    }, {\n      key: \"innerRadius\",\n      value: function innerRadius(_innerRadius2) {\n        if (!arguments.length) {\n          return this._innerRadius;\n        }\n\n        this._innerRadius = _innerRadius2;\n        return this;\n      }\n      /**\n       * Get or set the outer radius. If the radius is not set, it will be half of the minimum of the\n       * chart width and height.\n       * @param {Number} [radius]\n       * @returns {Number|SunburstChart}\n       */\n\n    }, {\n      key: \"radius\",\n      value: function radius(_radius2) {\n        if (!arguments.length) {\n          return this._givenRadius;\n        }\n\n        this._givenRadius = _radius2;\n        return this;\n      }\n      /**\n       * Get or set center x coordinate position. Default is center of svg.\n       * @param {Number} [cx]\n       * @returns {Number|SunburstChart}\n       */\n\n    }, {\n      key: \"cx\",\n      value: function cx(_cx2) {\n        if (!arguments.length) {\n          return this._cx || this.width() / 2;\n        }\n\n        this._cx = _cx2;\n        return this;\n      }\n      /**\n       * Get or set center y coordinate position. Default is center of svg.\n       * @param {Number} [cy]\n       * @returns {Number|SunburstChart}\n       */\n\n    }, {\n      key: \"cy\",\n      value: function cy(_cy2) {\n        if (!arguments.length) {\n          return this._cy || this.height() / 2;\n        }\n\n        this._cy = _cy2;\n        return this;\n      }\n      /**\n       * Get or set the minimal slice angle for label rendering. Any slice with a smaller angle will not\n       * display a slice label.\n       * @param {Number} [minAngleForLabel=0.5]\n       * @returns {Number|SunburstChart}\n       */\n\n    }, {\n      key: \"minAngleForLabel\",\n      value: function minAngleForLabel(_minAngleForLabel2) {\n        if (!arguments.length) {\n          return this._minAngleForLabel;\n        }\n\n        this._minAngleForLabel = _minAngleForLabel2;\n        return this;\n      }\n      /**\n       * Title to use for the only slice when there is no data.\n       * @param {String} [title]\n       * @returns {String|SunburstChart}\n       */\n\n    }, {\n      key: \"emptyTitle\",\n      value: function emptyTitle(title) {\n        if (arguments.length === 0) {\n          return this._emptyTitle;\n        }\n\n        this._emptyTitle = title;\n        return this;\n      }\n      /**\n       * Position slice labels offset from the outer edge of the chart.\n       *\n       * The argument specifies the extra radius to be added for slice labels.\n       * @param {Number} [externalLabelRadius]\n       * @returns {Number|SunburstChart}\n       */\n\n    }, {\n      key: \"externalLabels\",\n      value: function externalLabels(externalLabelRadius) {\n        if (arguments.length === 0) {\n          return this._externalLabelRadius;\n        } else if (externalLabelRadius) {\n          this._externalLabelRadius = externalLabelRadius;\n        } else {\n          this._externalLabelRadius = undefined;\n        }\n\n        return this;\n      }\n      /**\n       * Constructs the default RingSizes parameter for {@link SunburstChart#ringSizes ringSizes()},\n       * which makes the rings narrower as they get farther away from the center.\n       *\n       * Can be used as a parameter to ringSizes() to reset the default behavior, or modified for custom ring sizes.\n       *\n       * @example\n       *   var chart = new dc.SunburstChart(...);\n       *   chart.ringSizes(chart.defaultRingSizes())\n       * @returns {RingSizes}\n       */\n\n    }, {\n      key: \"defaultRingSizes\",\n      value: function defaultRingSizes() {\n        var _this131 = this;\n\n        return {\n          partitionDy: function partitionDy() {\n            return _this131._radius * _this131._radius;\n          },\n          scaleInnerRadius: function scaleInnerRadius(d) {\n            return d.data.path && d.data.path.length === 1 ? _this131._innerRadius : Math.sqrt(d.y0);\n          },\n          scaleOuterRadius: function scaleOuterRadius(d) {\n            return Math.sqrt(d.y1);\n          },\n          relativeRingSizesFunction: function relativeRingSizesFunction() {\n            return [];\n          }\n        };\n      }\n      /**\n       * Constructs a RingSizes parameter for {@link SunburstChart#ringSizes ringSizes()}\n       * that will make the chart rings equally wide.\n       *\n       * @example\n       *   var chart = new dc.SunburstChart(...);\n       *   chart.ringSizes(chart.equalRingSizes())\n       * @returns {RingSizes}\n       */\n\n    }, {\n      key: \"equalRingSizes\",\n      value: function equalRingSizes() {\n        return this.relativeRingSizes(function (ringCount) {\n          var result = [];\n\n          for (var i = 0; i < ringCount; i++) {\n            result.push(1 / ringCount);\n          }\n\n          return result;\n        });\n      }\n      /**\n       * Constructs a RingSizes parameter for {@link SunburstChart#ringSizes ringSizes()} using the given function\n       * to determine each rings width.\n       *\n       * * The function must return an array containing portion values for each ring/level of the chart.\n       * * The length of the array must match the number of rings of the chart at runtime, which is provided as the only\n       *   argument.\n       * * The sum of all portions from the array must be 1 (100%).\n       *\n       * @example\n       * // specific relative portions (the number of rings (3) is known in this case)\n       * chart.ringSizes(chart.relativeRingSizes(function (ringCount) {\n       *     return [.1, .3, .6];\n       * });\n       * @param {Function} [relativeRingSizesFunction]\n       * @returns {RingSizes}\n       */\n\n    }, {\n      key: \"relativeRingSizes\",\n      value: function relativeRingSizes(_relativeRingSizesFunction) {\n        var _this132 = this;\n\n        function assertPortionsArray(relativeSizes, numberOfRings) {\n          if (!Array.isArray(relativeSizes)) {\n            throw new BadArgumentException('relativeRingSizes function must return an array');\n          }\n\n          var portionsSum = d3Array.sum(relativeSizes);\n\n          if (Math.abs(portionsSum - 1) > constants.NEGLIGIBLE_NUMBER) {\n            throw new BadArgumentException(\"relativeRingSizes : portions must add up to 1, but sum was \".concat(portionsSum));\n          }\n\n          if (relativeSizes.length !== numberOfRings) {\n            throw new BadArgumentException(\"relativeRingSizes : number of values must match number of rings (\".concat(numberOfRings, \") but was \").concat(relativeSizes.length));\n          }\n        }\n\n        return {\n          partitionDy: function partitionDy() {\n            return 1;\n          },\n          scaleInnerRadius: function scaleInnerRadius(d) {\n            return _this132._scaleRadius(d.data.path.length - 1, d.y0);\n          },\n          scaleOuterRadius: function scaleOuterRadius(d) {\n            return _this132._scaleRadius(d.data.path.length, d.y1);\n          },\n          relativeRingSizesFunction: function relativeRingSizesFunction(ringCount) {\n            var result = _relativeRingSizesFunction(ringCount);\n\n            assertPortionsArray(result, ringCount);\n            return result;\n          }\n        };\n      }\n      /**\n       * Get or set the strategy to use for sizing the charts rings.\n       *\n       * There are three strategies available\n       * * {@link SunburstChart#defaultRingSizes `defaultRingSizes`}: the rings get narrower farther away from the center\n       * * {@link SunburstChart#relativeRingSizes `relativeRingSizes`}: set the ring sizes as portions of 1\n       * * {@link SunburstChart#equalRingSizes `equalRingSizes`}: the rings are equally wide\n       *\n       * You can modify the returned strategy, or create your own, for custom ring sizing.\n       *\n       * RingSizes is a duck-typed interface that must support the following methods:\n       * * `partitionDy()`: used for\n       *   {@link https://github.com/d3/d3-hierarchy/blob/v1.1.9/README.md#partition_size `d3.partition.size`}\n       * * `scaleInnerRadius(d)`: takes datum and returns radius for\n       *    {@link https://github.com/d3/d3-shape/blob/v1.3.7/README.md#arc_innerRadius `d3.arc.innerRadius`}\n       * * `scaleOuterRadius(d)`: takes datum and returns radius for\n       *    {@link https://github.com/d3/d3-shape/blob/v1.3.7/README.md#arc_outerRadius `d3.arc.outerRadius`}\n       * * `relativeRingSizesFunction(ringCount)`: takes ring count and returns an array of portions that\n       *   must add up to 1\n       *\n       * @example\n       * // make rings equally wide\n       * chart.ringSizes(chart.equalRingSizes())\n       * // reset to default behavior\n       * chart.ringSizes(chart.defaultRingSizes()))\n       * @param {RingSizes} ringSizes\n       * @returns {Object|SunburstChart}\n       */\n\n    }, {\n      key: \"ringSizes\",\n      value: function ringSizes(_ringSizes) {\n        if (!arguments.length) {\n          if (!this._ringSizes) {\n            this._ringSizes = this.defaultRingSizes();\n          }\n\n          return this._ringSizes;\n        }\n\n        this._ringSizes = _ringSizes;\n        return this;\n      }\n    }, {\n      key: \"_buildArcs\",\n      value: function _buildArcs() {\n        var _this133 = this;\n\n        return d3Shape.arc().startAngle(function (d) {\n          return d.x0;\n        }).endAngle(function (d) {\n          return d.x1;\n        }).innerRadius(function (d) {\n          return _this133.ringSizes().scaleInnerRadius(d);\n        }).outerRadius(function (d) {\n          return _this133.ringSizes().scaleOuterRadius(d);\n        });\n      }\n    }, {\n      key: \"_isSelectedSlice\",\n      value: function _isSelectedSlice(d) {\n        return this._isPathFiltered(d.path);\n      }\n    }, {\n      key: \"_isPathFiltered\",\n      value: function _isPathFiltered(path) {\n        for (var i = 0; i < this.filters().length; i++) {\n          var currentFilter = this.filters()[i];\n\n          if (currentFilter.isFiltered(path)) {\n            return true;\n          }\n        }\n\n        return false;\n      } // returns all filters that are a parent or child of the path\n\n    }, {\n      key: \"_filtersForPath\",\n      value: function _filtersForPath(path) {\n        var pathFilter = filters.HierarchyFilter(path);\n        var filtersList = [];\n\n        for (var i = 0; i < this.filters().length; i++) {\n          var currentFilter = this.filters()[i];\n\n          if (currentFilter.isFiltered(path) || pathFilter.isFiltered(currentFilter)) {\n            filtersList.push(currentFilter);\n          }\n        }\n\n        return filtersList;\n      }\n    }, {\n      key: \"_doRedraw\",\n      value: function _doRedraw() {\n        this._drawChart();\n\n        return this;\n      }\n    }, {\n      key: \"_partitionNodes\",\n      value: function _partitionNodes(data) {\n        var _this134 = this;\n\n        var getSortable = function getSortable(d) {\n          return {\n            'key': d.data.key,\n            'value': d.value\n          };\n        };\n\n        var _hierarchy = d3Hierarchy.hierarchy(data).sum(function (d) {\n          return d.children ? 0 : _this134._extendedValueAccessor(d);\n        }).sort(function (a, b) {\n          return d3Array.ascending(_this134.ordering()(getSortable(a)), _this134.ordering()(getSortable(b)));\n        });\n\n        var _partition = d3Hierarchy.partition().size([2 * Math.PI, this.ringSizes().partitionDy()]);\n\n        _partition(_hierarchy); // In D3v4 the returned data is slightly different, change it enough to suit our purposes.\n\n\n        var nodes = _hierarchy.descendants().map(function (d) {\n          d.key = d.data.key;\n          d.path = d.data.path;\n          return d;\n        });\n\n        var relativeSizes = this.ringSizes().relativeRingSizesFunction(_hierarchy.height);\n        return {\n          nodes: nodes,\n          rootOffset: _hierarchy.y1,\n          relativeRingSizes: relativeSizes\n        };\n      }\n    }, {\n      key: \"_sliceTooSmall\",\n      value: function _sliceTooSmall(d) {\n        var angle = d.x1 - d.x0;\n        return isNaN(angle) || angle < this._minAngleForLabel;\n      }\n    }, {\n      key: \"_sliceHasNoData\",\n      value: function _sliceHasNoData(d) {\n        return this._extendedValueAccessor(d) === 0;\n      }\n    }, {\n      key: \"_isOffCanvas\",\n      value: function _isOffCanvas(d) {\n        return !d || isNaN(d.x0) || isNaN(d.y0);\n      }\n    }, {\n      key: \"_fill\",\n      value: function _fill(d, i) {\n        return this.getColor(d.data, i);\n      }\n    }, {\n      key: \"onClick\",\n      value: function onClick(d) {\n        var _this135 = this;\n\n        if (this._g.attr('class') === this._emptyCssClass) {\n          return;\n        } // Must be better way to handle this, in legends we need to access `d.key`\n\n\n        var path = d.path || d.key;\n        var filter = filters.HierarchyFilter(path); // filters are equal to parents or children of the path.\n\n        var filtersList = this._filtersForPath(path);\n\n        var exactMatch = false; // clear out any filters that cover the path filtered.\n\n        for (var j = filtersList.length - 1; j >= 0; j--) {\n          var currentFilter = filtersList[j];\n\n          if (utils.arraysIdentical(currentFilter, path)) {\n            exactMatch = true;\n          }\n\n          this.filter(filtersList[j]);\n        }\n\n        events.trigger(function () {\n          // if it is a new filter - put it in.\n          if (!exactMatch) {\n            _this135.filter(filter);\n          }\n\n          _this135.redrawGroup();\n        });\n      }\n    }, {\n      key: \"_safeArc\",\n      value: function _safeArc(_arc, d) {\n        var path = _arc(d);\n\n        if (path.indexOf('NaN') >= 0) {\n          path = 'M0,0';\n        }\n\n        return path;\n      }\n    }, {\n      key: \"_labelPosition\",\n      value: function _labelPosition(d, _arc) {\n        var centroid;\n\n        if (this._externalLabelRadius) {\n          centroid = d3Shape.arc().outerRadius(this._radius + this._externalLabelRadius).innerRadius(this._radius + this._externalLabelRadius).centroid(d);\n        } else {\n          centroid = _arc.centroid(d);\n        }\n\n        if (isNaN(centroid[0]) || isNaN(centroid[1])) {\n          return 'translate(0,0)';\n        } else {\n          return \"translate(\".concat(centroid, \")\");\n        }\n      }\n    }, {\n      key: \"legendables\",\n      value: function legendables() {\n        var _this136 = this;\n\n        return this.data().map(function (d, i) {\n          var legendable = {\n            name: d.key,\n            data: d.value,\n            others: d.others,\n            chart: _this136\n          };\n          legendable.color = _this136.getColor(d, i);\n          return legendable;\n        });\n      }\n    }, {\n      key: \"legendHighlight\",\n      value: function legendHighlight(d) {\n        this._highlightSliceFromLegendable(d, true);\n      }\n    }, {\n      key: \"legendReset\",\n      value: function legendReset(d) {\n        this._highlightSliceFromLegendable(d, false);\n      }\n    }, {\n      key: \"legendToggle\",\n      value: function legendToggle(d) {\n        this.onClick({\n          key: d.name,\n          others: d.others\n        });\n      }\n    }, {\n      key: \"_highlightSliceFromLegendable\",\n      value: function _highlightSliceFromLegendable(legendable, highlighted) {\n        this.selectAll('g.pie-slice').each(function (d) {\n          if (legendable.name === d.key) {\n            d3Selection.select(this).classed('highlight', highlighted);\n          }\n        });\n      }\n    }, {\n      key: \"_tweenSlice\",\n      value: function _tweenSlice(d, element) {\n        var _this137 = this;\n\n        var current = element._current;\n\n        if (this._isOffCanvas(current)) {\n          current = {\n            x0: 0,\n            x1: 0,\n            y0: 0,\n            y1: 0\n          };\n        }\n\n        var tweenTarget = {\n          x0: d.x0,\n          x1: d.x1,\n          y0: d.y0,\n          y1: d.y1\n        };\n        var i = d3Interpolate.interpolate(current, tweenTarget);\n        element._current = i(0);\n        return function (t) {\n          return _this137._safeArc(_this137._buildArcs(), Object.assign({}, d, i(t)));\n        };\n      }\n    }]);\n\n    return SunburstChart;\n  }(ColorMixin(BaseMixin));\n\n  var sunburstChart = function sunburstChart(parent, chartGroup) {\n    return new SunburstChart(parent, chartGroup);\n  };\n\n  var INPUT_CSS_CLASS = 'dc-text-filter-input';\n  /**\n   * Text Filter Widget\n   *\n   * The text filter widget is a simple widget designed to display an input field allowing to filter\n   * data that matches the text typed.\n   * As opposed to the other charts, this doesn't display any result and doesn't update its display,\n   * it's just to input an filter other charts.\n   *\n   * @mixes BaseMixin\n   */\n\n  var TextFilterWidget = /*#__PURE__*/function (_BaseMixin8) {\n    _inherits(TextFilterWidget, _BaseMixin8);\n\n    var _super28 = _createSuper(TextFilterWidget);\n\n    /**\n     * Create Text Filter widget\n     * @example\n     *\n     * var data = [{\"firstName\":\"John\",\"lastName\":\"Coltrane\"}{\"firstName\":\"Miles\",lastName:\"Davis\"}]\n     * var ndx = crossfilter(data);\n     * var dimension = ndx.dimension(function(d) {\n     *     return d.lastName.toLowerCase() + ' ' + d.firstName.toLowerCase();\n     * });\n     *\n     * new TextFilterWidget('#search')\n     *     .dimension(dimension);\n     *     // you don't need the group() function\n     *\n     * @param {String|node|d3.selection|CompositeChart} parent - Any valid\n     * {@link https://github.com/d3/d3-selection/blob/master/README.md#select d3 single selector}\n     * specifying a dom block element such as a div; or a dom element or d3 selection.\n     * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n     * Interaction with a chart will only trigger events and redraws within the chart's group.\n     */\n    function TextFilterWidget(parent, chartGroup) {\n      var _this138;\n\n      _classCallCheck(this, TextFilterWidget);\n\n      _this138 = _super28.call(this);\n\n      _this138._normalize = function (s) {\n        return s.toLowerCase();\n      };\n\n      _this138._filterFunctionFactory = function (query) {\n        query = _this138._normalize(query);\n        return function (d) {\n          return _this138._normalize(d).indexOf(query) !== -1;\n        };\n      };\n\n      _this138._placeHolder = 'search';\n\n      _this138.group(function () {\n        throw 'the group function on textFilterWidget should never be called, please report the issue';\n      });\n\n      _this138.anchor(parent, chartGroup);\n\n      return _this138;\n    }\n\n    _createClass(TextFilterWidget, [{\n      key: \"_doRender\",\n      value: function _doRender() {\n        this.select('input').remove();\n        this._input = this.root().append('input').classed(INPUT_CSS_CLASS, true);\n        var chart = this;\n\n        this._input.on('input', function () {\n          chart.dimension().filterFunction(chart._filterFunctionFactory(this.value));\n          events.trigger(function () {\n            chart.redrawGroup();\n          }, constants.EVENT_DELAY);\n        });\n\n        this._doRedraw();\n\n        return this;\n      }\n    }, {\n      key: \"_doRedraw\",\n      value: function _doRedraw() {\n        this.root().selectAll('input').attr('placeholder', this._placeHolder);\n        return this;\n      }\n      /**\n       * This function will be called on values before calling the filter function.\n       * @example\n       * // This is the default\n       * chart.normalize(function (s) {\n       *   return s.toLowerCase();\n       * });\n       * @param {function} [normalize]\n       * @returns {TextFilterWidget|function}\n       */\n\n    }, {\n      key: \"normalize\",\n      value: function normalize(_normalize) {\n        if (!arguments.length) {\n          return this._normalize;\n        }\n\n        this._normalize = _normalize;\n        return this;\n      }\n      /**\n       * Placeholder text in the search box.\n       * @example\n       * // This is the default\n       * chart.placeHolder('type to filter');\n       * @param {function} [placeHolder='search']\n       * @returns {TextFilterWidget|string}\n       */\n\n    }, {\n      key: \"placeHolder\",\n      value: function placeHolder(_placeHolder) {\n        if (!arguments.length) {\n          return this._placeHolder;\n        }\n\n        this._placeHolder = _placeHolder;\n        return this;\n      }\n      /**\n       * This function will be called with the search text, it needs to return a function that will be used to\n       * filter the data. The default function checks presence of the search text.\n       * @example\n       * // This is the default\n       * function (query) {\n       *     query = _normalize(query);\n       *     return function (d) {\n       *         return _normalize(d).indexOf(query) !== -1;\n       *     };\n       * };\n       * @param {function} [filterFunctionFactory]\n       * @returns {TextFilterWidget|function}\n       */\n\n    }, {\n      key: \"filterFunctionFactory\",\n      value: function filterFunctionFactory(_filterFunctionFactory) {\n        if (!arguments.length) {\n          return this._filterFunctionFactory;\n        }\n\n        this._filterFunctionFactory = _filterFunctionFactory;\n        return this;\n      }\n    }]);\n\n    return TextFilterWidget;\n  }(BaseMixin);\n\n  var textFilterWidget = function textFilterWidget(parent, chartGroup) {\n    return new TextFilterWidget(parent, chartGroup);\n  };\n\n  var majorVer = +d3.version[0];\n\n  if (majorVer < 6) {\n    Object.assign(d3compat, {\n      eventHandler: function eventHandler(handler) {\n        return function eventHandler(d, _) {\n          handler.call(this, d, d3Selection.event);\n        };\n      },\n      // manual firing of event, usu for tests\n      callHandler: function callHandler(handler, that, _, d) {\n        // note: dropping event as well as any extra args\n        // d3@6 does not pass extra args anymore, so we can't use them and remain compatible\n        handler.call(that, d);\n      },\n      nester: function nester(_ref3) {\n        var key = _ref3.key,\n            sortKeys = _ref3.sortKeys,\n            sortValues = _ref3.sortValues,\n            entries = _ref3.entries;\n        var nester = d3Collection.nest().key(key);\n\n        if (sortKeys) {\n          nester.sortKeys(sortKeys);\n        }\n\n        if (sortValues) {\n          nester.sortValues(sortValues);\n        }\n\n        return nester.entries(entries);\n      },\n      pointer: function pointer(evt, elem) {\n        return d3Selection.mouse(elem);\n      }\n    });\n  }\n\n  var majorVer$1 = +d3.version[0];\n\n  if (majorVer$1 > 5) {\n    Object.assign(d3compat, {\n      eventHandler: function eventHandler(handler) {\n        return function eventHandler(event, d) {\n          handler.call(this, d, event);\n        };\n      },\n      // manual firing of event, usu for tests\n      callHandler: function callHandler(handler, that, event, d) {\n        handler.call(that, event, d);\n      },\n      nester: function nester(_ref4) {\n        var key = _ref4.key,\n            sortKeys = _ref4.sortKeys,\n            sortValues = _ref4.sortValues,\n            entries = _ref4.entries;\n\n        if (sortValues) {\n          entries = _toConsumableArray(entries).sort(sortValues);\n        }\n\n        var out = d3Array.groups(entries, key);\n\n        if (sortKeys) {\n          out = out.sort(sortKeys);\n        } // remap to d3@v5 structure\n\n\n        return out.map(function (e) {\n          return {\n            key: \"\".concat(e[0]),\n            // d3@v5 always returns key as string\n            values: e[1]\n          };\n        });\n      },\n      pointer: d3Selection.pointer\n    });\n  }\n\n  exports.BadArgumentException = BadArgumentException;\n  exports.BarChart = BarChart;\n  exports.BaseMixin = BaseMixin;\n  exports.BoxPlot = BoxPlot;\n  exports.BubbleChart = BubbleChart;\n  exports.BubbleMixin = BubbleMixin;\n  exports.BubbleOverlay = BubbleOverlay;\n  exports.CapMixin = CapMixin;\n  exports.CboxMenu = CboxMenu;\n  exports.ColorMixin = ColorMixin;\n  exports.CompositeChart = CompositeChart;\n  exports.Config = Config;\n  exports.CoordinateGridMixin = CoordinateGridMixin;\n  exports.DataCount = DataCount;\n  exports.DataGrid = DataGrid;\n  exports.DataTable = DataTable;\n  exports.GeoChoroplethChart = GeoChoroplethChart;\n  exports.HeatMap = HeatMap;\n  exports.HtmlLegend = HtmlLegend;\n  exports.InvalidStateException = InvalidStateException;\n  exports.Legend = Legend;\n  exports.LineChart = LineChart;\n  exports.Logger = Logger;\n  exports.MarginMixin = MarginMixin;\n  exports.NumberDisplay = NumberDisplay;\n  exports.PieChart = PieChart;\n  exports.RowChart = RowChart;\n  exports.ScatterPlot = ScatterPlot;\n  exports.SelectMenu = SelectMenu;\n  exports.SeriesChart = SeriesChart;\n  exports.StackMixin = StackMixin;\n  exports.SunburstChart = SunburstChart;\n  exports.TextFilterWidget = TextFilterWidget;\n  exports.afterTransition = afterTransition;\n  exports.barChart = barChart;\n  exports.baseMixin = baseMixin;\n  exports.boxPlot = boxPlot;\n  exports.bubbleChart = bubbleChart;\n  exports.bubbleOverlay = bubbleOverlay;\n  exports.cboxMenu = cboxMenu;\n  exports.chartRegistry = chartRegistry;\n  exports.compositeChart = compositeChart;\n  exports.config = config;\n  exports.constants = constants;\n  exports.d3Box = d3Box;\n  exports.d3compat = d3compat;\n  exports.dataCount = dataCount;\n  exports.dataGrid = dataGrid;\n  exports.dataTable = dataTable;\n  exports.deregisterAllCharts = deregisterAllCharts;\n  exports.deregisterChart = deregisterChart;\n  exports.events = events;\n  exports.filterAll = filterAll;\n  exports.filters = filters;\n  exports.geoChoroplethChart = geoChoroplethChart;\n  exports.hasChart = hasChart;\n  exports.heatMap = heatMap;\n  exports.htmlLegend = htmlLegend;\n  exports.instanceOfChart = instanceOfChart;\n  exports.legend = legend;\n  exports.lineChart = lineChart;\n  exports.logger = logger;\n  exports.numberDisplay = numberDisplay;\n  exports.optionalTransition = optionalTransition;\n  exports.pieChart = pieChart;\n  exports.pluck = pluck;\n  exports.printers = printers;\n  exports.redrawAll = redrawAll;\n  exports.refocusAll = refocusAll;\n  exports.registerChart = registerChart;\n  exports.renderAll = renderAll;\n  exports.renderlet = renderlet;\n  exports.rowChart = rowChart;\n  exports.scatterPlot = scatterPlot;\n  exports.selectMenu = selectMenu;\n  exports.seriesChart = seriesChart;\n  exports.sunburstChart = sunburstChart;\n  exports.textFilterWidget = textFilterWidget;\n  exports.transition = transition;\n  exports.units = units;\n  exports.utils = utils;\n  exports.version = version;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});"],"sourceRoot":""}